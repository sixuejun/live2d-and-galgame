<head><style>html{width:100%;height:auto;margin:0;padding:0;overflow:visible;background:0 0}body{width:100%;height:auto;margin:0;padding:0;overflow-x:hidden;background:0 0}#app{width:100%;min-height:100vh;display:flex;justify-content:center;align-items:flex-start;background:0 0}</style><script type="module">import'https://testingcf.jsdelivr.net/npm/klona/+esm';var e={426:(e,t)=>{t.A=(e,t)=>{const n=e.__vccOpts||e;for(const[e,a]of t)n[e]=a;return n}}},t={};function n(a){var l=t[a];if(void 0!==l)return l.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const a=Vue,l=toastr;var o=n.n(l);const c=[{id:'spring',title:'春之邂逅',description:'樱花飘落的季节，命运的相遇悄然开始...',image:'',message:'樱花飘落的季节，我在樱花树下与你相遇...'},{id:'summer',title:'夏之约定',description:'蝉鸣声中，许下永不忘记的誓言...',image:'',message:'夏日的午后，我们许下了永不忘记的约定...'},{id:'autumn',title:'秋之离别',description:'红叶纷飞，不舍的泪水模糊了视线...',image:'',message:'秋天的风带走了你，却带不走我的思念...'},{id:'winter',title:'冬之重逢',description:'白雪皑皑，终于再次见到思念的人...',image:'',message:'雪花飘落，我们终于在冬天再次相遇...'}],s=[{name:'樱井 美月',role:'女主角',desc:'温柔善良的少女，拥有感知星光的神秘能力。在一次偶然中与命运相遇，开启了一段跨越时空的旅程。',image:'',colorClass:''},{name:'星野 苍',role:'男主角',desc:'神秘的转学生，似乎隐藏着不为人知的过去。冷淡的外表下，有着温暖的内心。',image:'',colorClass:'blue'},{name:'日向 心',role:'好友',desc:'美月的青梅竹马，活泼开朗的性格总能带给周围人欢笑。暗中守护着美月。',image:'',colorClass:'orange'},{name:'月见 透',role:'神秘人物',desc:'在关键时刻出现的神秘人物，似乎知道所有事情的真相。身份成谜。',image:'',colorClass:'gray'}],r='开场界面-模型数据',i=['models/','model/',''],m=['model3.json','model.json'],u={count:20,minDuration:5,maxDuration:10,maxDelay:5};function d(){try{const e=function(){if(document.querySelector('.opening-interface')){const e=800,t=window.innerWidth,n=window.innerHeight,a=1200,l=20,o=Math.max(t-2*l,0),c=Math.max(n-2*l,0);if(o>0&&c>0){const t=o/a,n=c/e,l=e*Math.min(t,n,1);return Math.max(400,Math.min(1.1*l,2e3))}}const e=document.body,t=document.documentElement,n=document.getElementById('app'),a=[e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight,n?.scrollHeight||0,n?.offsetHeight||0],l=Math.max(...a.filter(e=>e>0));return Math.max(400,Math.min(l,2e3))}(),t=window.frameElement;t?(t.style.height=`${e}px`,console.info(`[开场界面] 调整 iframe 高度: ${e}px`)):(document.body.style.minHeight=`${e}px`,console.info(`[开场界面] 调整 body 高度: ${e}px`))}catch(e){console.warn('[开场界面] 调整高度失败:',e)}}const p={class:'icon icon-sm',viewBox:'0 0 24 24'};var v=n(426);const f={},g=(0,v.A)(f,[['render',function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)('svg',p,[...t[0]||(t[0]=[(0,a.createElementVNode)('line',{x1:'19',y1:'12',x2:'5',y2:'12'},null,-1),(0,a.createElementVNode)('polyline',{points:'12 19 5 12 12 5'},null,-1)])])}]]),h={class:'icon icon-sm',viewBox:'0 0 24 24'};const y={},b=(0,v.A)(y,[['render',function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)('svg',h,[...t[0]||(t[0]=[(0,a.createElementVNode)('polyline',{points:'20 6 9 17 4 12'},null,-1)])])}]]),k={class:'icon icon-lg',viewBox:'0 0 24 24'};const N={},V=(0,v.A)(N,[['render',function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)('svg',k,[...t[0]||(t[0]=[(0,a.createElementVNode)('polyline',{points:'15 18 9 12 15 6'},null,-1)])])}]]),E={class:'icon icon-lg',viewBox:'0 0 24 24'};const x={},B=(0,v.A)(x,[['render',function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)('svg',E,[...t[0]||(t[0]=[(0,a.createElementVNode)('polyline',{points:'9 18 15 12 9 6'},null,-1)])])}]]),w={class:'icon icon-sm',viewBox:'0 0 24 24'};const C={},M=(0,v.A)(C,[['render',function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)('svg',w,[...t[0]||(t[0]=[(0,a.createElementVNode)('line',{x1:'18',y1:'6',x2:'6',y2:'18'},null,-1),(0,a.createElementVNode)('line',{x1:'6',y1:'6',x2:'18',y2:'18'},null,-1)])])}]]);const S={class:'icon',viewBox:'0 0 24 24'};const D={},j=(0,v.A)(D,[['render',function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)('svg',S,[...t[0]||(t[0]=[(0,a.createElementVNode)('polygon',{points:'5 3 19 12 5 21 5 3'},null,-1)])])}]]),L={class:'icon',viewBox:'0 0 24 24'};const T={},U=(0,v.A)(T,[['render',function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)('svg',L,[...t[0]||(t[0]=[(0,a.createElementVNode)('circle',{cx:'12',cy:'12',r:'3'},null,-1),(0,a.createElementVNode)('path',{d:'M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z'},null,-1)])])}]]),I={class:'icon',viewBox:'0 0 24 24'};const R={},F=(0,v.A)(R,[['render',function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)('svg',I,[...t[0]||(t[0]=[(0,a.createElementVNode)('path',{d:'M12 3l1.912 5.813L20 9.5l-4.562 3.937L17 19l-5-3.5L7 19l1.563-5.563L4 9.5l6.088-.687L12 3z',fill:'currentColor',stroke:'none'},null,-1)])])}]]),A={class:'icon',viewBox:'0 0 24 24'};const O={},W=(0,v.A)(O,[['render',function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)('svg',A,[...t[0]||(t[0]=[(0,a.createElementVNode)('path',{d:'M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4'},null,-1),(0,a.createElementVNode)('polyline',{points:'17 8 12 3 7 8'},null,-1),(0,a.createElementVNode)('line',{x1:'12',y1:'3',x2:'12',y2:'15'},null,-1)])])}]]),G={class:'icon',viewBox:'0 0 24 24'};const H={},K=(0,v.A)(H,[['render',function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)('svg',G,[...t[0]||(t[0]=[(0,a.createElementVNode)('path',{d:'M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2'},null,-1),(0,a.createElementVNode)('circle',{cx:'9',cy:'7',r:'4'},null,-1),(0,a.createElementVNode)('path',{d:'M23 21v-2a4 4 0 0 0-3-3.87'},null,-1),(0,a.createElementVNode)('path',{d:'M16 3.13a4 4 0 0 1 0 7.75'},null,-1)])])}]]),P={class:'collapsible-section'},q={class:'header-title'},J={key:1,class:'badge'},Q={class:'collapsible-content'},X=(Boolean,'model-files');function Y(){return new Promise((e,t)=>{const n=indexedDB.open('live2d-models-db',1);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(X)||t.createObjectStore(X,{keyPath:'id'})}})}async function Z(e,t,n){const a=await Y(),l=function(e,t){return`${e}::${t}`}(e,t);return new Promise((o,c)=>{const s=a.transaction([X],'readwrite').objectStore(X),r=new FileReader;r.onload=()=>{const a={id:l,modelName:e,filename:t,data:r.result,type:n.type,size:n.size,lastModified:n.lastModified},i=s.put(a);i.onsuccess=()=>{console.info(`[IndexedDB] 已存储文件: ${t} (${(n.size/1024).toFixed(2)}KB)`),o(l)},i.onerror=()=>c(i.error)},r.onerror=()=>c(r.error),r.readAsArrayBuffer(n)})}function ee(e,t){return{name:e?`[立绘资源] ${e}`:'[立绘资源]',enabled:!0,strategy:{type:'selective',keys:e?[e,`${e}的立绘`]:['立绘','角色立绘'],keys_secondary:{logic:'and_any',keys:[]},scan_depth:'same_as_global'},position:{type:'after_character_definition',role:'system',depth:0,order:1},content:`\`\`\`json\n${JSON.stringify(t,null,2)}\n\`\`\`\n`,probability:100,recursion:{prevent_incoming:!1,prevent_outgoing:!1,delay_until:null},effect:{sticky:null,cooldown:null,delay:null}}}const te={class:'page-header'},ne=(0,a.defineComponent)({__name:'PageHeader',props:{title:{}},emits:['back'],setup:e=>(t,n)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',te,[(0,a.createElementVNode)('button',{class:'bubble-btn bubble-btn-sm',onClick:n[0]||(n[0]=e=>t.$emit('back'))},[(0,a.createVNode)(g),n[1]||(n[1]=(0,a.createTextVNode)(' 返回 ',-1))]),(0,a.createElementVNode)('h2',null,[(0,a.renderSlot)(t.$slots,'default'),(0,a.createTextVNode)(' '+(0,a.toDisplayString)(e.title),1)]),n[2]||(n[2]=(0,a.createElementVNode)('div',{class:'spacer'},null,-1))]))}),ae={class:'model-upload-wizard'},le={class:'steps-indicator'},oe={class:'step-number'},ce={class:'step-label'},se={class:'step-content'},re={key:0,class:'uploaded-files-preview'},ie={class:'files-summary'},me={key:0,class:'hint'},ue={class:'files-list'},de={class:'file-name'},pe={key:0,class:'file-source-badge',title:'URL导入'},ve=['onClick'],fe={class:'upload-methods-container'},ge={class:'upload-method-section'},he={class:'upload-area-inner'},ye={class:'upload-placeholder'},be={class:'upload-method-section'},ke={class:'url-upload-area'},Ne={class:'url-input-group'},Ve=['disabled'],Ee={class:'step-actions'},xe=['disabled'],Be={class:'step-content'},we={key:0,class:'classifying-status'},Ce={key:1,class:'classified-files'},$e={class:'settings-card'},Me={class:'files-categories'},Se={key:0,class:'category-section'},De={class:'file-category'},_e={key:0,class:'category-item'},je={key:1,class:'category-item'},Le={key:1,class:'category-section'},Te={class:'file-category'},Ue={class:'file-name'},Ie=['onChange'],Re={key:2,class:'category-section'},Fe={class:'file-category'},Ae=['onClick'],Oe={key:3,class:'category-section'},We={class:'file-category'},ze={class:'file-name'},Ge={key:0,class:'character-name-badge'},He=['onChange'],Ke={key:4,class:'category-section'},Pe={class:'file-category'},qe={class:'file-name'},Je=['onChange'],Qe={key:5,class:'category-section'},Xe={class:'file-category'},Ye={class:'file-name'},Ze=['onChange'],et={key:6,class:'category-section'},tt={class:'file-category'},nt={class:'file-name'},at=['onChange'],lt={key:7,class:'category-section'},ot={class:'file-category'},ct={class:'step-actions'},st=['disabled'],rt={class:'step-content'},it={key:0,class:'model-settings'},mt={class:'settings-card'},ut={class:'setting-item'},dt={class:'setting-item'},pt={key:1,class:'settings-card'},vt={class:'step-actions'},ft={class:'step-content'},gt={class:'resource-settings-list'},ht={class:'resource-entry-content'},yt={class:'resource-entry-desc'},bt={class:'resource-entry-badge'},kt={class:'resource-entry-badge'},Nt={class:'resource-entry-badge'},Vt={class:'resource-entry-badge'},Et={key:4,class:'no-resources-hint'},xt={class:'step-content resource-detail-page'},Bt={class:'resource-detail-content'},wt={class:'resource-detail-header'},Ct={class:'resource-detail-title'},$t={key:0,class:'animation-settings'},Mt={class:'setting-item'},St=['value'],Dt={class:'setting-item'},_t=['value'],jt={class:'setting-item'},Lt={class:'text-mapping-section'},Tt={class:'text-mapping-header'},Ut={class:'mapping-list'},It={class:'mapping-inputs-vertical'},Rt={class:'text-tags-input-wrapper'},Ft=['value','onBlur','onKeydown'],At={key:0,class:'text-tags'},Ot=['onClick'],Wt={class:'mapping-selects-row'},zt={class:'mapping-select-item'},Gt=['onUpdate:modelValue'],Ht=['value'],Kt={class:'mapping-select-item'},Pt=['onUpdate:modelValue'],qt=['value'],Jt=['onClick'],Qt={key:1,class:'sprite-settings'},Xt={class:'sprite-header'},Yt={class:'sprite-name'},Zt={key:0,class:'character-name-badge'},en=['onClick'],tn={class:'text-mapping-section compact'},nn={class:'mapping-list'},an={class:'mapping-inputs'},ln={class:'text-tags-input-wrapper'},on=['value','onBlur','onKeydown'],cn={key:0,class:'text-tags'},sn=['onClick'],rn=['onClick'],mn={key:2,class:'background-settings'},un={class:'resource-header'},dn={class:'resource-name'},pn=['onClick'],vn={class:'text-mapping-section compact'},fn={class:'mapping-list'},gn={class:'mapping-inputs'},hn={class:'text-tags-input-wrapper'},yn=['value','onBlur','onKeydown'],bn={key:0,class:'text-tags'},kn=['onClick'],Nn=['onClick'],Vn={key:3,class:'cg-settings'},En={class:'resource-header'},xn={class:'resource-name'},Bn=['onClick'],wn={class:'text-mapping-section compact'},Cn={class:'mapping-list'},$n={class:'mapping-inputs'},Mn={class:'text-tags-input-wrapper'},Sn=['value','onBlur','onKeydown'],Dn={key:0,class:'text-tags'},_n=['onClick'],jn=['onClick'],Ln={class:'step-content'},Tn={class:'completion-summary'},Un={class:'summary-details'},In={class:'step-actions'},Rn=['disabled'],Fn={key:0},An={key:1},On=(0,a.defineComponent)({__name:'ModelUploadWizard',emits:['close','complete'],setup(e,{emit:t}){const n=t,l=[{label:'上传文件'},{label:'分类文件'},{label:'模型设置'},{label:'资源设置'},{label:'完成'}],c=(0,a.ref)(0),s=(0,a.ref)(),u=(0,a.ref)(null),d=(0,a.computed)(()=>{switch(u.value){case'animation':return'动画和表情设置';case'sprite':return'角色立绘设置';case'background':return'背景设置';case'cg':return'CG设置';default:return''}});function p(e){u.value=e}function v(){u.value=null}const f=(0,a.ref)([]),g=(0,a.ref)(''),h=(0,a.ref)(!1),y=(0,a.ref)(!1),k=(0,a.ref)(3),N=(0,a.ref)(''),V=(0,a.ref)(!1),E=(0,a.ref)({textures:[],moc3:null,model3:null,cdi3:null,motions:[],sprites:[],backgrounds:[],cgs:[],unclassifiedImages:[],others:[]}),x=(0,a.computed)(()=>E.value.moc3||E.value.model3),B=(0,a.computed)(()=>E.value.motions.filter(e=>'motion'===e.type).length),w=(0,a.computed)(()=>E.value.motions.filter(e=>'expression'===e.type).length),C=(0,a.computed)(()=>{const e=E.value.moc3||E.value.model3,t=E.value.sprites.length>0||E.value.backgrounds.length>0||E.value.cgs.length>0||E.value.textures.length>0,n=E.value.unclassifiedImages.length>0;return''!==g.value.trim()&&(e||t)&&!n});function S(){s.value?.click()}function D(e){const t=e.target,n=t.files;if(n&&n.length>0){const e=Array.from(n),t=new Set(f.value.map(e=>e.file.name)),a=e.filter(e=>!t.has(e.name));f.value.push(...a.map(e=>({file:e,sourceUrl:void 0}))),a.length<e.length&&o().info(`已跳过 ${e.length-a.length} 个重复文件`)}t.value=''}function j(e){const t=e.dataTransfer?.files;if(t&&t.length>0){const e=Array.from(t),n=new Set(f.value.map(e=>e.file.name)),a=e.filter(e=>!n.has(e.name));f.value.push(...a.map(e=>({file:e,sourceUrl:void 0}))),a.length<e.length&&o().info(`已跳过 ${e.length-a.length} 个重复文件`)}}function L(){f.value=[]}async function T(){const e=N.value.trim();if(e){V.value=!0;try{const t=e.split(/[,\n;]/).map(e=>e.trim()).filter(e=>e.length>0);if(1===t.length&&function(e){try{const t=new URL(e);return'github.com'===t.hostname||'raw.githubusercontent.com'===t.hostname||t.hostname.endsWith('.github.io')}catch{return!1}}(t[0]))try{return await async function(e){let t=e.trim();t.endsWith('/')||(t+='/');try{const e=new URL(t);if('github.com'===e.hostname){const n=e.pathname.split('/').filter(e=>e);if(n.length>=2){const[e,a,...l]=n;if(0===l.length||'tree'===l[0]||'blob'===l[0]){const n=l.length>2?l.slice(2).join('/')+'/':'';t=`https://${e}.github.io/${a}/${n.replace(/[^/]+\.(json|moc3|png)$/,'')}`}}}if('raw.githubusercontent.com'===e.hostname){const n=e.pathname.split('/').filter(e=>e);if(n.length>=3){const[e,a,l,...o]=n;if(o.length>0){(t.includes('.json')||t.includes('.moc3')||t.includes('.png'))&&o.pop();t=`https://${e}.github.io/${a}/${o.length>0?o.join('/')+'/':''}`}else t=`https://${e}.github.io/${a}/`}}}catch(e){console.warn('URL 规范化失败，使用原始 URL:',e)}o().info('正在解析GitHub仓库结构...');let n='',a='',l=!0;for(const e of i){for(const o of m){const c=new URL(t).pathname.split('/').filter(e=>e&&'models'!==e&&'model'!==e);if(c.length>0){const s=c[c.length-1].replace(/\/$/,''),r=`${t}${e}${s}.${o}`;try{if((await fetch(r,{method:'HEAD'})).ok){n=r,a=s,l='model3.json'===o;break}}catch{}}}if(n)break}if(!n)for(const e of['model','character','live2d']){for(const o of m){const c=`${t}${e}.${o}`;try{if((await fetch(c,{method:'HEAD'})).ok){n=c,a=e,l='model3.json'===o;break}}catch{}}if(n)break}if(!n)throw new Error('未能自动找到模型配置文件，请直接输入 model3.json 的完整URL');const c=await fetch(n);if(!c.ok)throw new Error(`无法加载模型配置文件: ${c.statusText}`);const s=await c.json(),r=n.substring(0,n.lastIndexOf('/')+1);if(!a||'model'===a){const e=s.FileReferences;if(e?.Moc){const t=e.Moc.match(/[\\/]([^\\/]+)\.moc3?$/);t&&(a=t[1])}a&&'model'!==a||(a=n.split('/').pop()?.replace(/\.(model3|model)\.json$/,'')||'unknown')}const u=[{url:n,filename:n.split('/').pop()||'model3.json'}],d=s.FileReferences;if(d){if(d.Moc){const e=d.Moc,t=e.startsWith('http')?e:new URL(e,r).href;u.push({url:t,filename:e.split('/').pop()||'model.moc3'})}if(Array.isArray(d.Textures))for(const e of d.Textures){const t=e.startsWith('http')?e:new URL(e,r).href;u.push({url:t,filename:e.split('/').pop()||'texture.png'})}if(d.DisplayInfo){const e=d.DisplayInfo,t=e.startsWith('http')?e:new URL(e,r).href;u.push({url:t,filename:e.split('/').pop()||'cdi3.json'})}if(l&&d.Groups&&Array.isArray(d.Groups)){const e=d.Groups;for(const t of e)if(Array.isArray(t.Files))for(const e of t.Files){const t=e.startsWith('http')?e:new URL(e,r).href;u.push({url:t,filename:e.split('/').pop()||'motion.json'})}else if(t.File&&'string'==typeof t.File){const e=t.File,n=e.startsWith('http')?e:new URL(e,r).href;u.push({url:n,filename:e.split('/').pop()||'motion.json'})}}}const p=new Set(f.value.map(e=>e.file.name));let v=0,g=0;for(const e of u)try{if(p.has(e.filename)){console.info(`已跳过重复文件: ${e.filename}`);continue}const t=await fetch(e.url);if(!t.ok){console.warn(`无法下载文件: ${e.url}`),g++;continue}const n=await t.blob(),a=new File([n],e.filename,{type:n.type});f.value.push({file:a,sourceUrl:e.url}),p.add(e.filename),v++}catch(t){console.warn(`下载文件失败 ${e.url}:`,t),g++}N.value='',v>0&&o().success(`成功从GitHub仓库导入 ${v} 个文件`);g>0&&o().warning(`导入失败 ${g} 个文件`);if(0===v)throw new Error('未能导入任何文件')}(t[0]),void(N.value='')}catch(e){console.warn('GitHub仓库解析失败，降级为普通URL导入:',e),o().info('GitHub仓库解析失败，尝试作为普通URL导入...')}const n=new Set(f.value.map(e=>e.file.name));let a=0,l=0;for(const e of t)try{const t=await fetch(e);if(!t.ok){console.error(`无法下载文件: ${e}`,t.statusText),l++;continue}const o=await t.blob();let c=e.split('/').pop()||'unknown';const s=t.headers.get('Content-Disposition');if(s){const e=s.match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/);e&&e[1]&&(c=e[1].replace(/['"]/g,''))}if(!c.match(/\.[a-z0-9]+$/i)){const e=t.headers.get('Content-Type');if(e){c+={'image/png':'.png','image/jpeg':'.jpg','image/jpg':'.jpg','application/json':'.json','application/octet-stream':'.moc3'}[e]||''}}if(n.has(c)){console.info(`已跳过重复文件: ${c}`);continue}const r=new File([o],c,{type:o.type});f.value.push({file:r,sourceUrl:e}),n.add(c),a++}catch(t){console.error(`导入URL失败: ${e}`,t),l++}N.value='',a>0&&o().success(`成功导入 ${a} 个文件`),l>0&&o().warning(`导入失败 ${l} 个文件，请检查URL是否正确`)}catch(e){console.error('URL导入失败:',e);const t=e instanceof Error?e.message:'未知错误';o().error(`URL导入失败: ${t}`)}finally{V.value=!1}}else o().warning('请输入URL')}function U(e){const t=(e instanceof File?e.name:e.file.name).toLowerCase();return t.endsWith('.moc3')?'type-moc3':t.endsWith('.model3.json')?'type-model3':t.endsWith('.cdi3.json')?'type-cdi3':t.endsWith('.motion3.json')?'type-motion':t.match(/\.(png|jpg|jpeg)$/)?'type-image':'type-other'}function I(e){const t=(e instanceof File?e.name:e.file.name).toLowerCase();return t.endsWith('.moc3')?'MOC':t.endsWith('.model3.json')?'模型配置':t.endsWith('.cdi3.json')?'显示信息':t.endsWith('.motion3.json')?'动作/表情':t.match(/\.(png|jpg|jpeg)$/)?'图片':'其他'}async function R(){0!==f.value.length&&(await O(),c.value<l.length-1&&c.value++)}async function F(){if(0===c.value){if(0===f.value.length)return;await O()}c.value<l.length-1&&c.value++}function A(){c.value>0&&c.value--}async function O(){h.value=!0;try{if(!g.value){const e=f.value.find(e=>e.file.name.endsWith('.model3.json')||e.file.name.endsWith('.moc3'));if(e)g.value=e.file.name.replace(/\.(model3\.json|moc3)$/,'');else{const e=f.value[0];g.value=e&&e.file.name.replace(/\.[^.]*$/,'')||'新资源'}}const e=f.value.map(e=>{const t=e.file,n=t.name.toLowerCase();let a='other',l=!1;return n.endsWith('.moc3')?a='moc3':n.endsWith('.model3.json')?a='model3':n.endsWith('.cdi3.json')?a='cdi3':n.endsWith('.motion3.json')?(a=function(e){const t=e.toLowerCase(),n=[/_e\./i,/\.e\./i,/expression/i,/表情/i,/exp/i,/f\d+/i,/^expr/i],a=[/_m\./i,/\.m\./i,/motion/i,/动作/i,/mot/i,/idle/i,/tap/i,/touch/i];for(const e of n)if(e.test(t))return'expression';for(const e of a)if(e.test(t))return'motion';return'motion'}(t.name),l=!/_e\.|\.e\.|expression|表情|_m\.|\.m\.|motion|动作/i.test(t.name)):n.match(/\.(png|jpg|jpeg)$/)&&(a='unclassified_image'),{name:t.name,file:t,sourceUrl:e.sourceUrl,type:a,canToggle:l,characterName:undefined}});E.value={textures:[],moc3:e.find(e=>'moc3'===e.type)||null,model3:e.find(e=>'model3'===e.type)||null,cdi3:e.find(e=>'cdi3'===e.type)||null,motions:e.filter(e=>'motion'===e.type||'expression'===e.type),sprites:[],backgrounds:[],cgs:[],unclassifiedImages:e.filter(e=>'unclassified_image'===e.type),others:e.filter(e=>'other'===e.type)},te.value=E.value.sprites.map(e=>({name:e.name,file:e.file,characterName:e.characterName,textMappings:[]})),On.value=E.value.backgrounds.map(e=>({name:e.name,file:e.file,textMappings:[]})),Wn.value=E.value.cgs.map(e=>({name:e.name,file:e.file,textMappings:[]}))}catch(e){console.error('分类文件失败:',e),o().error('分类文件失败')}finally{h.value=!1}}function G(e,t,n){if(n===e)return;let a,l;if('sprite'===e){if(l=E.value.sprites.findIndex(e=>e.name===t),-1!==l){a=E.value.sprites[l],E.value.sprites.splice(l,1);const e=te.value.findIndex(e=>e.name===t);e>=0&&te.value.splice(e,1)}}else if('background'===e){if(l=E.value.backgrounds.findIndex(e=>e.name===t),-1!==l){a=E.value.backgrounds[l],E.value.backgrounds.splice(l,1);const e=On.value.findIndex(e=>e.name===t);e>=0&&On.value.splice(e,1)}}else if('cg'===e){if(l=E.value.cgs.findIndex(e=>e.name===t),-1!==l){a=E.value.cgs[l],E.value.cgs.splice(l,1);const e=Wn.value.findIndex(e=>e.name===t);e>=0&&Wn.value.splice(e,1)}}else'texture'===e&&(l=E.value.textures.findIndex(e=>e.name===t),-1!==l&&(a=E.value.textures[l],E.value.textures.splice(l,1)));if(a)if(a.type='unclassified_image',a.characterName&&'sprite'!==n&&(a.characterName=void 0),'unclassified'===n)E.value.unclassifiedImages.push(a),o().info(`已将 "${a.name}" 移回待分类`);else{if(a.type=n,'sprite'===n){const e=a.name.match(/([^_/\\]+?)[_-]?(sprite|立绘|stand|portrait)/i);e&&e[1]&&(a.characterName=e[1])}'sprite'===n?(E.value.sprites.push(a),te.value.push({name:a.name,file:a.file,characterName:a.characterName,textMappings:[]})):'background'===n?(E.value.backgrounds.push(a),On.value.push({name:a.name,file:a.file,textMappings:[]})):'cg'===n?(E.value.cgs.push(a),Wn.value.push({name:a.name,file:a.file,textMappings:[]})):'texture'===n&&E.value.textures.push(a),o().success(`已将 "${a.name}" 重新分类为${'sprite'===n?'立绘':'background'===n?'背景':'cg'===n?'CG':'纹理'}`)}else console.warn(`未找到文件: ${t} 在分类 ${e} 中`)}const H=(0,a.ref)('none'),K=(0,a.ref)('none'),P=(0,a.ref)(!0),q=(0,a.ref)([]),J=(0,a.computed)(()=>E.value.motions.filter(e=>'motion'===e.type).map(e=>({name:Gn(e.name),file:e.file}))),Q=(0,a.computed)(()=>E.value.motions.filter(e=>'expression'===e.type).map(e=>({name:Gn(e.name),file:e.file})));function X(){q.value.push({text:'',textTags:[],expression:'none',motion:'none'})}function Y(e){return e.split(';').map(e=>e.trim()).filter(e=>e.length>0)}const te=(0,a.ref)([]),On=(0,a.ref)([]),Wn=(0,a.ref)([]);async function zn(){if(!C.value)return void o().warning('请先完成所有必填项');y.value=!0;const e=[],t=[];let a=0,l=0;try{o().info('正在保存文件并创建世界书条目...');const c=[];for(const e of E.value.textures)try{if(e.sourceUrl)c.push({type:'texture',filename:e.file.name,url:e.sourceUrl}),a++;else{const t=await Z(g.value,e.file.name,e.file);c.push({type:'texture',fileId:t,filename:e.file.name}),a++}}catch(n){const a=n instanceof Error?n.message:String(n);t.push(`纹理文件 "${e.file.name}": ${a}`),console.error(`存储纹理文件失败: ${e.file.name}`,n),l++}if(E.value.moc3)try{if(E.value.moc3.sourceUrl)c.push({type:'moc3',filename:E.value.moc3.file.name,url:E.value.moc3.sourceUrl}),a++;else{const e=await Z(g.value,E.value.moc3.file.name,E.value.moc3.file);c.push({type:'moc3',fileId:e,filename:E.value.moc3.file.name}),a++}}catch(e){const n=e instanceof Error?e.message:String(e);t.push(`模型文件 "${E.value.moc3.file.name}": ${n}`),console.error(`存储 moc3 文件失败: ${E.value.moc3.file.name}`,e),l++}if(E.value.model3)try{if(E.value.model3.sourceUrl)c.push({type:'model3',filename:E.value.model3.file.name,url:E.value.model3.sourceUrl}),a++;else{const e=await Z(g.value,E.value.model3.file.name,E.value.model3.file);c.push({type:'model3',fileId:e,filename:E.value.model3.file.name}),a++}}catch(e){const n=e instanceof Error?e.message:String(e);t.push(`模型文件 "${E.value.model3.file.name}": ${n}`),console.error(`存储 model3 文件失败: ${E.value.model3.file.name}`,e),l++}if(E.value.cdi3)try{if(E.value.cdi3.sourceUrl)c.push({type:'cdi3',filename:E.value.cdi3.file.name,url:E.value.cdi3.sourceUrl}),a++;else{const e=await Z(g.value,E.value.cdi3.file.name,E.value.cdi3.file);c.push({type:'cdi3',fileId:e,filename:E.value.cdi3.file.name}),a++}}catch(e){const n=e instanceof Error?e.message:String(e);t.push(`显示信息文件 "${E.value.cdi3.file.name}": ${n}`),console.error(`存储 cdi3 文件失败: ${E.value.cdi3.file.name}`,e),l++}const s=[];for(const e of E.value.motions.filter(e=>'motion'===e.type||'expression'===e.type))try{if(e.sourceUrl)s.push({name:Gn(e.name),filename:e.file.name,url:e.sourceUrl,type:e.type}),a++;else{const t=await Z(g.value,e.file.name,e.file);s.push({name:Gn(e.name),fileId:t,filename:e.file.name,type:e.type}),a++}}catch(n){const a=n instanceof Error?n.message:String(n);t.push(`${'motion'===e.type?'动作':'表情'}文件 "${e.file.name}": ${a}`),console.error(`存储动作文件失败: ${e.file.name}`,n),l++}const i=new Map;for(const e of te.value)try{const t=E.value.sprites.find(t=>t.name===e.name),n=e.characterName||'default';i.has(n)||i.set(n,[]);const l=(e.textMappings||[]).map(e=>e.text.trim()).filter(e=>e.length>0);if(t?.sourceUrl)i.get(n).push({name:e.name,filename:e.file.name,url:t.sourceUrl,textMappings:l}),a++;else{const t=await Z(g.value,e.file.name,e.file);i.get(n).push({name:e.name,fileId:t,filename:e.file.name,textMappings:l}),a++}}catch(n){const a=n instanceof Error?n.message:String(n);t.push(`立绘文件 "${e.file.name}": ${a}`),console.error(`存储立绘文件失败: ${e.file.name}`,n),l++}const m=[];for(const e of On.value)try{const t=E.value.backgrounds.find(t=>t.name===e.name),n=(e.textMappings||[]).map(e=>e.text.trim()).filter(e=>e.length>0);if(t?.sourceUrl)m.push({name:e.name,filename:e.file.name,url:t.sourceUrl,textMappings:n}),a++;else{const t=await Z(g.value,e.file.name,e.file);m.push({name:e.name,fileId:t,filename:e.file.name,textMappings:n}),a++}}catch(n){const a=n instanceof Error?n.message:String(n);t.push(`背景文件 "${e.file.name}": ${a}`),console.error(`存储背景文件失败: ${e.file.name}`,n),l++}const u=[];for(const e of Wn.value)try{const t=E.value.cgs.find(t=>t.name===e.name),n=(e.textMappings||[]).map(e=>e.text.trim()).filter(e=>e.length>0);if(t?.sourceUrl)u.push({name:e.name,filename:e.file.name,url:t.sourceUrl,textMappings:n}),a++;else{const t=await Z(g.value,e.file.name,e.file);u.push({name:e.name,fileId:t,filename:e.file.name,textMappings:n}),a++}}catch(n){const a=n instanceof Error?n.message:String(n);t.push(`CG文件 "${e.file.name}": ${a}`),console.error(`存储CG文件失败: ${e.file.name}`,n),l++}const d=[];if(c.some(e=>'model3'===e.type||'moc3'===e.type))try{const e=c.find(e=>'model3'===e.type),t=c.find(e=>'moc3'===e.type),n=c.find(e=>'cdi3'===e.type),a=c.filter(e=>'texture'===e.type),l=s.filter(e=>'motion'===e.type).map(e=>({name:e.name,file:e.url||`indexeddb://${g.value}/${e.filename}`,group:'default'})),o=s.filter(e=>'expression'===e.type).map(e=>({name:e.name,file:e.url||`indexeddb://${g.value}/${e.filename}`})),r={};H.value&&'none'!==H.value&&(r.expression=H.value),K.value&&'none'!==K.value&&(r.motion=K.value,r.autoLoop=P.value);const i={},m={},u={};for(const e of q.value){const t=e.text.trim();if(t){if(e.expression&&'none'!==e.expression){const n=o.find(t=>t.name===e.expression);if(n){m[n.file.split('/').pop()||`${e.expression}.exp3.json`]=t}}if(e.motion&&'none'!==e.motion){const n=l.find(t=>t.name===e.motion);if(n){u[n.file.split('/').pop()||`${e.motion}.motion3.json`]=t}}}}Object.keys(m).length>0&&(i.expression=m),Object.keys(u).length>0&&(i.motion=u);const p=function(e,t){return{name:`[模型资源] ${e}`,enabled:!0,strategy:{type:'selective',keys:[`__MODEL_RESOURCE_${e}_${Date.now()}__`],keys_secondary:{logic:'and_any',keys:[]},scan_depth:'same_as_global'},position:{type:'after_character_definition',role:'system',depth:0,order:0},content:`\`\`\`json\n${JSON.stringify(t,null,2)}\n\`\`\`\n`,probability:100,recursion:{prevent_incoming:!0,prevent_outgoing:!0,delay_until:null},effect:{sticky:null,cooldown:null,delay:null}}}(g.value,{type:'live2d_model',modelName:g.value,files:{model3:e?e.url||`indexeddb://${g.value}/${e.filename}`:void 0,moc3:t?t.url||`indexeddb://${g.value}/${t.filename}`:void 0,textures:a.map(e=>e.url||`indexeddb://${g.value}/${e.filename}`),cdi3:n?n.url||`indexeddb://${g.value}/${n.filename}`:void 0},motions:l,expressions:o,defaultAnimation:Object.keys(r).length>0?r:void 0,textMappings:Object.keys(i).length>0?i:void 0});d.push(p)}catch(e){const n=e instanceof Error?e.message:String(e);t.push(`创建模型资源世界书条目失败: ${n}`),console.error('创建模型资源世界书条目失败:',e)}for(const[e,t]of i.entries())if(t.length>0){const n=ee('default'===e?'':e,{type:'sprite',characterName:'default'===e?void 0:e,sprites:t.map(t=>({name:t.name,file:t.url?t.url:e&&'default'!==e?`indexeddb://${e}/${t.filename}`:`indexeddb://${g.value}/${t.filename}`,textMappings:t.textMappings.length>0?t.textMappings:void 0}))});d.push(n)}if(m.length>0){const e=function(e){const t=['背景','场景'];for(const n of e.backgrounds)n.textMappings&&t.push(...n.textMappings),t.push(n.name);return{name:'[背景资源]',enabled:!0,strategy:{type:'selective',keys:[...new Set(t)],keys_secondary:{logic:'and_any',keys:[]},scan_depth:'same_as_global'},position:{type:'after_character_definition',role:'system',depth:0,order:2},content:`\`\`\`json\n${JSON.stringify(e,null,2)}\n\`\`\`\n`,probability:100,recursion:{prevent_incoming:!1,prevent_outgoing:!1,delay_until:null},effect:{sticky:null,cooldown:null,delay:null}}}({type:'background',backgrounds:m.map(e=>({name:e.name,file:e.url||`indexeddb://backgrounds/${e.filename}`,textMappings:e.textMappings.length>0?e.textMappings:void 0}))});d.push(e)}if(u.length>0){const e=function(e){const t=['CG','cg'];for(const n of e.cgs)n.textMappings&&t.push(...n.textMappings),t.push(n.name);return{name:'[CG资源]',enabled:!0,strategy:{type:'selective',keys:[...new Set(t)],keys_secondary:{logic:'and_any',keys:[]},scan_depth:'same_as_global'},position:{type:'after_character_definition',role:'system',depth:0,order:3},content:`\`\`\`json\n${JSON.stringify(e,null,2)}\n\`\`\`\n`,probability:100,recursion:{prevent_incoming:!1,prevent_outgoing:!1,delay_until:null},effect:{sticky:null,cooldown:null,delay:null}}}({type:'cg',cgs:u.map(e=>({name:e.name,file:e.url||`indexeddb://cgs/${e.filename}`,textMappings:e.textMappings.length>0?e.textMappings:void 0}))});d.push(e)}if(d.length>0)try{let e=null;try{const t=getCharWorldbookNames('current');e=t.primary||t.additional[0]||null}catch(e){console.warn('获取角色卡世界书失败，使用默认世界书:',e)}e||(e=r);try{await getWorldbook(e)}catch{try{await createWorldbook(e,[])}catch(t){if(console.warn(`创建世界书 ${e} 失败:`,t),e===r)throw t;e=r;try{await getWorldbook(r)}catch{await createWorldbook(r,[])}}}await createWorldbookEntries(e,d),console.info(`已在世界书 ${e} 中创建 ${d.length} 个资源世界书条目`)}catch(e){const n=e instanceof Error?e.message:String(e);t.push(`创建资源世界书条目失败: ${n}`),console.error('创建资源世界书条目失败:',e),o().warning('创建资源世界书条目时出现问题，但文件已保存')}const p={name:g.value,files:c.map(e=>({type:e.type,url:e.url||'',filename:e.filename,fileId:e.fileId,isLocal:!e.url})),motions:s.map(e=>({name:e.name,url:e.url||'',type:e.type,fileId:e.fileId,isLocal:!e.url}))};for(const t of e)try{URL.revokeObjectURL(t)}catch(e){console.warn('清理 Object URL 失败:',e)}const v=te.value.length+On.value.length+Wn.value.length,f=v>0?`，包含 ${v} 个资源文件`:'';if(0===l)o().success(`模型 "${g.value}" 已成功创建世界书条目并保存文件${f}`);else{if(!(a>0))return o().error('保存失败：所有文件都未能成功保存'),t.length>0&&(console.group('文件保存错误详情'),t.forEach((e,t)=>{console.error(`${t+1}. ${e}`)}),console.groupEnd()),void(y.value=!1);o().warning(`模型 "${g.value}" 已部分完成：成功 ${a} 个，失败 ${l} 个${f}`),t.length>0&&(console.group('文件保存错误详情'),t.forEach((e,t)=>{console.error(`${t+1}. ${e}`)}),console.groupEnd())}setTimeout(()=>{n('complete',p)},500)}catch(n){for(const t of e)try{URL.revokeObjectURL(t)}catch(e){console.warn('清理 Object URL 失败:',e)}const a=n instanceof Error?n.message:String(n);console.error('创建世界书条目失败:',n),o().error(`创建世界书条目失败: ${a}`),t.length>0&&(console.group('错误详情'),t.forEach((e,t)=>{console.error(`${t+1}. ${e}`)}),console.groupEnd())}finally{y.value=!1}}function Gn(e){return e.replace(/\.motion3?\.json$/i,'').replace(/^\d+_/,'').replace(/_m$/i,'').replace(/_e$/i,'').replace(/_motion$/i,'').replace(/_expression$/i,'')}return(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',ae,[(0,a.createVNode)(ne,{title:'游戏设置',onBack:t[0]||(t[0]=t=>e.$emit('close'))},{default:(0,a.withCtx)(()=>[(0,a.createVNode)((0,a.unref)(W))]),_:1}),(0,a.createCommentVNode)(' 步骤指示器 '),(0,a.createElementVNode)('div',le,[((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(l,(e,t)=>(0,a.createElementVNode)('div',{key:t,class:(0,a.normalizeClass)(['step-item',{active:c.value===t,completed:c.value>t}])},[(0,a.createElementVNode)('div',oe,(0,a.toDisplayString)(t+1),1),(0,a.createElementVNode)('div',ce,(0,a.toDisplayString)(e.label),1)],2)),64))]),(0,a.createCommentVNode)(' 步骤1: 上传文件 '),(0,a.withDirectives)((0,a.createElementVNode)('div',se,[(0,a.createCommentVNode)(' 统一显示所有已上传文件列表 '),f.value.length>0?((0,a.openBlock)(),(0,a.createElementBlock)('div',re,[(0,a.createElementVNode)('div',ie,[(0,a.createElementVNode)('p',null,[(0,a.createTextVNode)(' 已选择 '+(0,a.toDisplayString)(f.value.length)+' 个文件（可混合使用本地文件和URL导入） ',1),f.value.some(e=>e.sourceUrl)?((0,a.openBlock)(),(0,a.createElementBlock)('span',me,' - '+(0,a.toDisplayString)(f.value.filter(e=>e.sourceUrl).length)+' 个来自URL ',1)):(0,a.createCommentVNode)('v-if',!0)]),(0,a.createElementVNode)('button',{class:'bubble-btn bubble-btn-sm',onClick:L},'清空')]),(0,a.createElementVNode)('div',ue,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(f.value,(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:`${e.file.name}-${t}`,class:'file-item'},[(0,a.createElementVNode)('span',de,(0,a.toDisplayString)(e.file.name),1),e.sourceUrl?((0,a.openBlock)(),(0,a.createElementBlock)('span',pe,'URL')):(0,a.createCommentVNode)('v-if',!0),(0,a.createElementVNode)('span',{class:(0,a.normalizeClass)(['file-type-badge',U(e.file)])},(0,a.toDisplayString)(I(e.file)),3),(0,a.createElementVNode)('button',{class:'remove-file-btn',title:'移除',onClick:(0,a.withModifiers)(e=>function(e){f.value.splice(e,1)}(t),['stop'])},[(0,a.createVNode)((0,a.unref)(M),{class:'icon-sm'})],8,ve)]))),128))])])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' 上传方式：本地文件和URL导入并排显示 '),(0,a.createElementVNode)('div',fe,[(0,a.createCommentVNode)(' 本地文件上传 '),(0,a.createElementVNode)('div',ge,[t[17]||(t[17]=(0,a.createElementVNode)('h3',{class:'method-title'},'本地文件上传',-1)),(0,a.createElementVNode)('div',{class:'upload-area',onClick:S,onDragover:t[1]||(t[1]=(0,a.withModifiers)(()=>{},['prevent'])),onDrop:(0,a.withModifiers)(j,['prevent'])},[(0,a.createElementVNode)('input',{ref_key:'fileInputRef',ref:s,type:'file',class:'hidden-input',accept:'.png,.jpg,.jpeg,.moc3,.model3.json,.cdi3.json,.motion3.json,.physics3.json',multiple:'',onChange:D},null,544),(0,a.createElementVNode)('div',he,[(0,a.createElementVNode)('div',ye,[(0,a.createVNode)((0,a.unref)(W),{class:'icon-lg'}),t[14]||(t[14]=(0,a.createElementVNode)('p',null,'点击或拖拽文件到这里上传',-1)),t[15]||(t[15]=(0,a.createElementVNode)('p',{class:'hint'},'支持模型文件（.moc3, .model3.json等）',-1)),t[16]||(t[16]=(0,a.createElementVNode)('p',{class:'hint'},'支持图片文件（.png, .jpg等）',-1))])])],32)]),(0,a.createCommentVNode)(' URL导入 '),(0,a.createElementVNode)('div',be,[t[21]||(t[21]=(0,a.createElementVNode)('h3',{class:'method-title'},'URL导入',-1)),(0,a.createElementVNode)('div',ke,[(0,a.createElementVNode)('div',Ne,[(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[2]||(t[2]=e=>N.value=e),type:'text',class:'url-input',placeholder:'请输入文件URL（支持图片和模型文件）',onKeyup:(0,a.withKeys)(T,['enter'])},null,544),[[a.vModelText,N.value]]),(0,a.createElementVNode)('button',{class:'bubble-btn bubble-btn-primary',disabled:!N.value.trim()||V.value,onClick:T},(0,a.toDisplayString)(V.value?'导入中...':'导入'),9,Ve)]),t[18]||(t[18]=(0,a.createElementVNode)('p',{class:'hint'},'可以输入多个URL，每行一个，或使用逗号/分号分隔',-1)),t[19]||(t[19]=(0,a.createElementVNode)('p',{class:'hint'},'支持 GitHub 仓库，自动解析文件结构',-1)),t[20]||(t[20]=(0,a.createElementVNode)('p',{class:'hint'},'导入的文件会与本地文件合并显示',-1))])])]),(0,a.createElementVNode)('div',Ee,[(0,a.createElementVNode)('button',{class:'bubble-btn',onClick:t[3]||(t[3]=t=>e.$emit('close'))},'取消'),(0,a.createElementVNode)('button',{class:'bubble-btn bubble-btn-primary',disabled:0===f.value.length,onClick:R},' 完成上传并分类文件 ',8,xe)])],512),[[a.vShow,0===c.value]]),(0,a.createCommentVNode)(' 步骤2: 分类和确认 '),(0,a.withDirectives)((0,a.createElementVNode)('div',Be,[h.value?((0,a.openBlock)(),(0,a.createElementBlock)('div',we,[...t[22]||(t[22]=[(0,a.createElementVNode)('p',null,'正在自动分类文件...',-1)])])):((0,a.openBlock)(),(0,a.createElementBlock)('div',Ce,[(0,a.createCommentVNode)(' 资源名称输入 '),(0,a.createElementVNode)('div',$e,[t[23]||(t[23]=(0,a.createElementVNode)('h3',null,'资源名称',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[4]||(t[4]=e=>g.value=e),type:'text',placeholder:'请输入资源名称',class:'model-name-input'},null,512),[[a.vModelText,g.value]]),t[24]||(t[24]=(0,a.createElementVNode)('p',{class:'hint'},'资源名称将用于世界书条目和配置（可以是模型名、角色名等）',-1))]),(0,a.createCommentVNode)(' 文件分类显示 '),(0,a.createElementVNode)('div',Me,[(0,a.createCommentVNode)(' 模型文件 '),E.value.moc3||E.value.model3?((0,a.openBlock)(),(0,a.createElementBlock)('div',Se,[t[25]||(t[25]=(0,a.createElementVNode)('h3',null,'模型文件',-1)),(0,a.createElementVNode)('div',De,[E.value.model3?((0,a.openBlock)(),(0,a.createElementBlock)('div',_e,[(0,a.createVNode)((0,a.unref)(b),{class:'icon-sm'}),(0,a.createElementVNode)('span',null,(0,a.toDisplayString)(E.value.model3.name),1)])):(0,a.createCommentVNode)('v-if',!0),E.value.moc3?((0,a.openBlock)(),(0,a.createElementBlock)('div',je,[(0,a.createVNode)((0,a.unref)(b),{class:'icon-sm'}),(0,a.createElementVNode)('span',null,(0,a.toDisplayString)(E.value.moc3.name),1)])):(0,a.createCommentVNode)('v-if',!0)])])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' 纹理文件 '),E.value.textures.length>0?((0,a.openBlock)(),(0,a.createElementBlock)('div',Le,[(0,a.createElementVNode)('h3',null,'纹理文件 ('+(0,a.toDisplayString)(E.value.textures.length)+')',1),(0,a.createElementVNode)('div',Te,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(E.value.textures,e=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.name,class:'category-item category-item-with-select'},[(0,a.createVNode)((0,a.unref)(b),{class:'icon-sm'}),(0,a.createElementVNode)('span',Ue,(0,a.toDisplayString)(e.name),1),(0,a.createElementVNode)('select',{value:'texture',class:'classify-select',onChange:t=>G('texture',e.name,t.target.value)},[...t[26]||(t[26]=[(0,a.createStaticVNode)('<option value="texture" data-v-fb6ac8e4>纹理</option><option value="sprite" data-v-fb6ac8e4>立绘</option><option value="background" data-v-fb6ac8e4>背景</option><option value="cg" data-v-fb6ac8e4>CG</option><option value="unclassified" data-v-fb6ac8e4>待分类</option>',5)])],40,Ie)]))),128))])])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' 动作文件 '),E.value.motions.length>0?((0,a.openBlock)(),(0,a.createElementBlock)('div',Re,[(0,a.createElementVNode)('h3',null,'动作文件 ('+(0,a.toDisplayString)(E.value.motions.length)+')',1),(0,a.createElementVNode)('div',Fe,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(E.value.motions,e=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.name,class:'category-item'},[(0,a.createVNode)((0,a.unref)(b),{class:'icon-sm'}),(0,a.createElementVNode)('span',null,(0,a.toDisplayString)(e.name),1),e.canToggle?((0,a.openBlock)(),(0,a.createElementBlock)('button',{key:0,class:'toggle-type-btn',onClick:t=>function(e){'motion'===e.type?e.type='expression':e.type='motion'}(e)},(0,a.toDisplayString)('motion'===e.type?'改为表情':'改为动作'),9,Ae)):(0,a.createCommentVNode)('v-if',!0)]))),128))])])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' 立绘文件 '),E.value.sprites.length>0?((0,a.openBlock)(),(0,a.createElementBlock)('div',Oe,[(0,a.createElementVNode)('h3',null,'角色立绘 ('+(0,a.toDisplayString)(E.value.sprites.length)+')',1),(0,a.createElementVNode)('div',We,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(E.value.sprites,e=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.name,class:'category-item category-item-with-select'},[(0,a.createVNode)((0,a.unref)(b),{class:'icon-sm'}),(0,a.createElementVNode)('span',ze,(0,a.toDisplayString)(e.name),1),e.characterName?((0,a.openBlock)(),(0,a.createElementBlock)('span',Ge,(0,a.toDisplayString)(e.characterName),1)):(0,a.createCommentVNode)('v-if',!0),(0,a.createElementVNode)('select',{value:'sprite',class:'classify-select',onChange:t=>G('sprite',e.name,t.target.value)},[...t[27]||(t[27]=[(0,a.createStaticVNode)('<option value="sprite" data-v-fb6ac8e4>立绘</option><option value="background" data-v-fb6ac8e4>背景</option><option value="cg" data-v-fb6ac8e4>CG</option><option value="texture" data-v-fb6ac8e4>纹理</option><option value="unclassified" data-v-fb6ac8e4>待分类</option>',5)])],40,He)]))),128))])])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' 背景文件 '),E.value.backgrounds.length>0?((0,a.openBlock)(),(0,a.createElementBlock)('div',Ke,[(0,a.createElementVNode)('h3',null,'背景 ('+(0,a.toDisplayString)(E.value.backgrounds.length)+')',1),(0,a.createElementVNode)('div',Pe,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(E.value.backgrounds,e=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.name,class:'category-item category-item-with-select'},[(0,a.createVNode)((0,a.unref)(b),{class:'icon-sm'}),(0,a.createElementVNode)('span',qe,(0,a.toDisplayString)(e.name),1),(0,a.createElementVNode)('select',{value:'background',class:'classify-select',onChange:t=>G('background',e.name,t.target.value)},[...t[28]||(t[28]=[(0,a.createStaticVNode)('<option value="background" data-v-fb6ac8e4>背景</option><option value="sprite" data-v-fb6ac8e4>立绘</option><option value="cg" data-v-fb6ac8e4>CG</option><option value="texture" data-v-fb6ac8e4>纹理</option><option value="unclassified" data-v-fb6ac8e4>待分类</option>',5)])],40,Je)]))),128))])])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' CG文件 '),E.value.cgs.length>0?((0,a.openBlock)(),(0,a.createElementBlock)('div',Qe,[(0,a.createElementVNode)('h3',null,'CG ('+(0,a.toDisplayString)(E.value.cgs.length)+')',1),(0,a.createElementVNode)('div',Xe,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(E.value.cgs,e=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.name,class:'category-item category-item-with-select'},[(0,a.createVNode)((0,a.unref)(b),{class:'icon-sm'}),(0,a.createElementVNode)('span',Ye,(0,a.toDisplayString)(e.name),1),(0,a.createElementVNode)('select',{value:'cg',class:'classify-select',onChange:t=>G('cg',e.name,t.target.value)},[...t[29]||(t[29]=[(0,a.createStaticVNode)('<option value="cg" data-v-fb6ac8e4>CG</option><option value="sprite" data-v-fb6ac8e4>立绘</option><option value="background" data-v-fb6ac8e4>背景</option><option value="texture" data-v-fb6ac8e4>纹理</option><option value="unclassified" data-v-fb6ac8e4>待分类</option>',5)])],40,Ze)]))),128))])])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' 待分类图片 '),E.value.unclassifiedImages.length>0?((0,a.openBlock)(),(0,a.createElementBlock)('div',et,[(0,a.createElementVNode)('h3',null,'待分类图片 ('+(0,a.toDisplayString)(E.value.unclassifiedImages.length)+')',1),t[31]||(t[31]=(0,a.createElementVNode)('p',{class:'hint'},'点击选择框将图片分类为立绘、背景、CG或纹理',-1)),(0,a.createElementVNode)('div',tt,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(E.value.unclassifiedImages,e=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.name,class:'category-item category-item-with-select'},[(0,a.createVNode)((0,a.unref)(b),{class:'icon-sm'}),(0,a.createElementVNode)('span',nt,(0,a.toDisplayString)(e.name),1),(0,a.createElementVNode)('select',{value:'',class:'classify-select',onChange:t=>function(e,t){const n=E.value.unclassifiedImages.findIndex(t=>t.name===e);if(-1===n)return void console.warn(`未找到文件: ${e}`);const a=E.value.unclassifiedImages[n];if(a){if(E.value.unclassifiedImages.splice(n,1),a.type=t,'sprite'===t){const e=a.name.match(/([^_/\\]+?)[_-]?(sprite|立绘|stand|portrait)/i);e&&e[1]&&(a.characterName=e[1])}'sprite'===t?(E.value.sprites.push(a),te.value.push({name:a.name,file:a.file,characterName:a.characterName,textMappings:[]})):'background'===t?(E.value.backgrounds.push(a),On.value.push({name:a.name,file:a.file,textMappings:[]})):'cg'===t?(E.value.cgs.push(a),Wn.value.push({name:a.name,file:a.file,textMappings:[]})):'texture'===t&&E.value.textures.push(a),o().success(`已将 "${a.name}" 分类为${'sprite'===t?'立绘':'background'===t?'背景':'cg'===t?'CG':'纹理'}`)}}(e.name,t.target.value)},[...t[30]||(t[30]=[(0,a.createStaticVNode)('<option value="" disabled data-v-fb6ac8e4>选择分类...</option><option value="sprite" data-v-fb6ac8e4>立绘</option><option value="background" data-v-fb6ac8e4>背景</option><option value="cg" data-v-fb6ac8e4>CG</option><option value="texture" data-v-fb6ac8e4>纹理</option>',5)])],40,at)]))),128))])])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' 其他文件 '),E.value.others.length>0?((0,a.openBlock)(),(0,a.createElementBlock)('div',lt,[(0,a.createElementVNode)('h3',null,'其他文件 ('+(0,a.toDisplayString)(E.value.others.length)+')',1),(0,a.createElementVNode)('div',ot,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(E.value.others,e=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.name,class:'category-item'},[(0,a.createVNode)((0,a.unref)(b),{class:'icon-sm'}),(0,a.createElementVNode)('span',null,(0,a.toDisplayString)(e.name),1)]))),128))])])):(0,a.createCommentVNode)('v-if',!0)])])),(0,a.createElementVNode)('div',ct,[(0,a.createElementVNode)('button',{class:'bubble-btn',onClick:A},'上一步'),(0,a.createElementVNode)('button',{class:'bubble-btn bubble-btn-primary',disabled:!C.value,onClick:F},'下一步',8,st)])],512),[[a.vShow,1===c.value]]),(0,a.createCommentVNode)(' 步骤3: 模型设置（可选，只在有模型时显示） '),(0,a.withDirectives)((0,a.createElementVNode)('div',rt,[x.value?((0,a.openBlock)(),(0,a.createElementBlock)('div',it,[(0,a.createElementVNode)('div',mt,[t[35]||(t[35]=(0,a.createElementVNode)('h3',null,'模型设置',-1)),(0,a.createElementVNode)('div',ut,[t[32]||(t[32]=(0,a.createElementVNode)('label',null,'模型名称',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[5]||(t[5]=e=>g.value=e),type:'text'},null,512),[[a.vModelText,g.value]])]),(0,a.createElementVNode)('div',dt,[t[34]||(t[34]=(0,a.createElementVNode)('label',null,'模型版本',-1)),(0,a.withDirectives)((0,a.createElementVNode)('select',{'onUpdate:modelValue':t[6]||(t[6]=e=>k.value=e)},[...t[33]||(t[33]=[(0,a.createElementVNode)('option',{value:3},'3 (model3.json)',-1),(0,a.createElementVNode)('option',{value:2},'2 (model.json)',-1)])],512),[[a.vModelSelect,k.value]])])])])):((0,a.openBlock)(),(0,a.createElementBlock)('div',pt,[...t[36]||(t[36]=[(0,a.createElementVNode)('p',{class:'hint'},'未检测到模型文件，将跳过此步骤',-1)])])),(0,a.createElementVNode)('div',vt,[(0,a.createElementVNode)('button',{class:'bubble-btn',onClick:A},'上一步'),(0,a.createElementVNode)('button',{class:'bubble-btn bubble-btn-primary',onClick:F},(0,a.toDisplayString)(x.value?'下一步：资源设置':'下一步'),1)])],512),[[a.vShow,2===c.value]]),(0,a.createCommentVNode)(' 步骤4: 资源设置（列表界面） '),(0,a.withDirectives)((0,a.createElementVNode)('div',ft,[(0,a.createElementVNode)('div',gt,[(0,a.createCommentVNode)(' 动画和表情设置入口 '),x.value&&(B.value>0||w.value>0)?((0,a.openBlock)(),(0,a.createElementBlock)('button',{key:0,class:'resource-entry-btn',onClick:t[7]||(t[7]=e=>p('animation'))},[t[38]||(t[38]=(0,a.createElementVNode)('div',{class:'resource-entry-icon'},[(0,a.createElementVNode)('svg',{class:'icon-md',fill:'none',stroke:'currentColor',viewBox:'0 0 24 24'},[(0,a.createElementVNode)('path',{'stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',d:'M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z'}),(0,a.createElementVNode)('path',{'stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',d:'M21 12a9 9 0 11-18 0 9 9 0 0118 0z'})])],-1)),(0,a.createElementVNode)('div',ht,[t[37]||(t[37]=(0,a.createElementVNode)('span',{class:'resource-entry-title'},'动画和表情设置',-1)),(0,a.createElementVNode)('span',yt,(0,a.toDisplayString)(B.value)+' 个动作，'+(0,a.toDisplayString)(w.value)+' 个表情',1)]),(0,a.createElementVNode)('div',bt,(0,a.toDisplayString)(B.value+w.value),1),t[39]||(t[39]=(0,a.createElementVNode)('svg',{class:'resource-entry-arrow',fill:'none',stroke:'currentColor',viewBox:'0 0 24 24'},[(0,a.createElementVNode)('path',{'stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',d:'M9 5l7 7-7 7'})],-1))])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' 角色立绘设置入口 '),E.value.sprites.length>0?((0,a.openBlock)(),(0,a.createElementBlock)('button',{key:1,class:'resource-entry-btn',onClick:t[8]||(t[8]=e=>p('sprite'))},[t[40]||(t[40]=(0,a.createStaticVNode)('<div class="resource-entry-icon" data-v-fb6ac8e4><svg class="icon-md" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-fb6ac8e4><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" data-v-fb6ac8e4></path></svg></div><div class="resource-entry-content" data-v-fb6ac8e4><span class="resource-entry-title" data-v-fb6ac8e4>角色立绘设置</span><span class="resource-entry-desc" data-v-fb6ac8e4>配置立绘的文本映射</span></div>',2)),(0,a.createElementVNode)('div',kt,(0,a.toDisplayString)(E.value.sprites.length),1),t[41]||(t[41]=(0,a.createElementVNode)('svg',{class:'resource-entry-arrow',fill:'none',stroke:'currentColor',viewBox:'0 0 24 24'},[(0,a.createElementVNode)('path',{'stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',d:'M9 5l7 7-7 7'})],-1))])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' 背景设置入口 '),E.value.backgrounds.length>0?((0,a.openBlock)(),(0,a.createElementBlock)('button',{key:2,class:'resource-entry-btn',onClick:t[9]||(t[9]=e=>p('background'))},[t[42]||(t[42]=(0,a.createStaticVNode)('<div class="resource-entry-icon" data-v-fb6ac8e4><svg class="icon-md" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-fb6ac8e4><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-fb6ac8e4></path></svg></div><div class="resource-entry-content" data-v-fb6ac8e4><span class="resource-entry-title" data-v-fb6ac8e4>背景设置</span><span class="resource-entry-desc" data-v-fb6ac8e4>配置背景的文本映射</span></div>',2)),(0,a.createElementVNode)('div',Nt,(0,a.toDisplayString)(E.value.backgrounds.length),1),t[43]||(t[43]=(0,a.createElementVNode)('svg',{class:'resource-entry-arrow',fill:'none',stroke:'currentColor',viewBox:'0 0 24 24'},[(0,a.createElementVNode)('path',{'stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',d:'M9 5l7 7-7 7'})],-1))])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' CG设置入口 '),E.value.cgs.length>0?((0,a.openBlock)(),(0,a.createElementBlock)('button',{key:3,class:'resource-entry-btn',onClick:t[10]||(t[10]=e=>p('cg'))},[t[44]||(t[44]=(0,a.createStaticVNode)('<div class="resource-entry-icon" data-v-fb6ac8e4><svg class="icon-md" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-fb6ac8e4><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" data-v-fb6ac8e4></path></svg></div><div class="resource-entry-content" data-v-fb6ac8e4><span class="resource-entry-title" data-v-fb6ac8e4>CG设置</span><span class="resource-entry-desc" data-v-fb6ac8e4>配置CG的文本映射</span></div>',2)),(0,a.createElementVNode)('div',Vt,(0,a.toDisplayString)(E.value.cgs.length),1),t[45]||(t[45]=(0,a.createElementVNode)('svg',{class:'resource-entry-arrow',fill:'none',stroke:'currentColor',viewBox:'0 0 24 24'},[(0,a.createElementVNode)('path',{'stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',d:'M9 5l7 7-7 7'})],-1))])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' 无可配置资源提示 '),x.value&&(B.value>0||w.value>0)||0!==E.value.sprites.length||0!==E.value.backgrounds.length||0!==E.value.cgs.length?(0,a.createCommentVNode)('v-if',!0):((0,a.openBlock)(),(0,a.createElementBlock)('div',Et,[...t[46]||(t[46]=[(0,a.createElementVNode)('p',null,'暂无可配置的资源',-1),(0,a.createElementVNode)('p',{class:'hint'},'请在上一步中上传并分类文件',-1)])]))]),(0,a.createElementVNode)('div',{class:'step-actions'},[(0,a.createElementVNode)('button',{class:'bubble-btn',onClick:A},'上一步'),(0,a.createElementVNode)('button',{class:'bubble-btn bubble-btn-primary',onClick:F},'下一步：完成')])],512),[[a.vShow,3===c.value&&!u.value]]),(0,a.createCommentVNode)(' 步骤4: 资源设置详情页面 '),(0,a.withDirectives)((0,a.createElementVNode)('div',xt,[(0,a.createCommentVNode)(' 详情页内容区域（可滚动，包含头部） '),(0,a.createElementVNode)('div',Bt,[(0,a.createCommentVNode)(' 详情页头部（在可滚动区域内） '),(0,a.createElementVNode)('div',wt,[(0,a.createElementVNode)('button',{class:'back-btn',onClick:v},[...t[47]||(t[47]=[(0,a.createElementVNode)('svg',{class:'icon-sm',fill:'none',stroke:'currentColor',viewBox:'0 0 24 24'},[(0,a.createElementVNode)('path',{'stroke-linecap':'round','stroke-linejoin':'round','stroke-width':'2',d:'M15 19l-7-7 7-7'})],-1),(0,a.createTextVNode)(' 返回 ',-1)])]),(0,a.createElementVNode)('h3',Ct,(0,a.toDisplayString)(d.value),1)]),(0,a.createCommentVNode)(' 动画和表情设置详情 '),'animation'===u.value?((0,a.openBlock)(),(0,a.createElementBlock)('div',$t,[(0,a.createElementVNode)('div',Mt,[t[49]||(t[49]=(0,a.createElementVNode)('label',null,'默认表情',-1)),(0,a.withDirectives)((0,a.createElementVNode)('select',{'onUpdate:modelValue':t[11]||(t[11]=e=>H.value=e),class:'select-with-scroll'},[t[48]||(t[48]=(0,a.createElementVNode)('option',{value:'none'},'无',-1)),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(Q.value,e=>((0,a.openBlock)(),(0,a.createElementBlock)('option',{key:e.name,value:e.name},(0,a.toDisplayString)(e.name),9,St))),128))],512),[[a.vModelSelect,H.value]])]),(0,a.createElementVNode)('div',Dt,[t[51]||(t[51]=(0,a.createElementVNode)('label',null,'默认动作（Idle）',-1)),(0,a.withDirectives)((0,a.createElementVNode)('select',{'onUpdate:modelValue':t[12]||(t[12]=e=>K.value=e),class:'select-with-scroll'},[t[50]||(t[50]=(0,a.createElementVNode)('option',{value:'none'},'无',-1)),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(J.value,e=>((0,a.openBlock)(),(0,a.createElementBlock)('option',{key:e.name,value:e.name},(0,a.toDisplayString)(e.name),9,_t))),128))],512),[[a.vModelSelect,K.value]])]),(0,a.createElementVNode)('div',jt,[(0,a.createElementVNode)('label',null,[(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':t[13]||(t[13]=e=>P.value=e),type:'checkbox'},null,512),[[a.vModelCheckbox,P.value]]),t[52]||(t[52]=(0,a.createTextVNode)(' 自动循环默认动作 ',-1))]),t[53]||(t[53]=(0,a.createElementVNode)('p',{class:'hint'},'当没有检测到特定文本时，将自动循环播放默认动作',-1))]),(0,a.createCommentVNode)(' 文本到动作/表情映射 '),(0,a.createElementVNode)('div',Lt,[(0,a.createElementVNode)('div',Tt,[t[55]||(t[55]=(0,a.createElementVNode)('h4',null,'文本映射',-1)),(0,a.createElementVNode)('button',{class:'bubble-btn bubble-btn-sm add-mapping-btn',onClick:X},[(0,a.createVNode)((0,a.unref)(W),{class:'icon-sm'}),t[54]||(t[54]=(0,a.createTextVNode)(' 添加映射 ',-1))])]),t[61]||(t[61]=(0,a.createElementVNode)('p',{class:'hint'},'当检测到特定文本时，自动播放对应的动作和表情（多个文本用分号分隔）',-1)),(0,a.createElementVNode)('div',Ut,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(q.value,(e,n)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:n,class:'mapping-item'},[(0,a.createElementVNode)('div',It,[(0,a.createElementVNode)('div',Rt,[t[56]||(t[56]=(0,a.createElementVNode)('label',{class:'mapping-label'},'触发文本',-1)),(0,a.createElementVNode)('input',{value:e.text,type:'text',placeholder:'输入触发文本，多个用分号(;)分隔',class:'mapping-text-input tags-input',onBlur:e=>function(e,t){const n=Y(t.target.value.trim());q.value[e].text=n.join(';'),q.value[e].textTags=n}(n,e),onKeydown:(0,a.withKeys)(e=>{return(t=e).preventDefault(),void t.target.blur();var t},['enter'])},null,40,Ft),e.textTags&&e.textTags.length>0?((0,a.openBlock)(),(0,a.createElementBlock)('div',At,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.textTags,(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)('span',{key:t,class:'text-tag'},[(0,a.createTextVNode)((0,a.toDisplayString)(e)+' ',1),(0,a.createElementVNode)('button',{class:'tag-remove',onClick:e=>function(e,t){q.value[e].textTags&&(q.value[e].textTags.splice(t,1),q.value[e].text=q.value[e].textTags.join(';'))}(n,t)},'×',8,Ot)]))),128))])):(0,a.createCommentVNode)('v-if',!0)]),(0,a.createElementVNode)('div',Wt,[(0,a.createElementVNode)('div',zt,[t[58]||(t[58]=(0,a.createElementVNode)('label',{class:'mapping-label'},'表情',-1)),(0,a.withDirectives)((0,a.createElementVNode)('select',{'onUpdate:modelValue':t=>e.expression=t,class:'mapping-select select-with-scroll'},[t[57]||(t[57]=(0,a.createElementVNode)('option',{value:'none'},'无表情',-1)),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(Q.value,e=>((0,a.openBlock)(),(0,a.createElementBlock)('option',{key:e.name,value:e.name},(0,a.toDisplayString)(e.name),9,Ht))),128))],8,Gt),[[a.vModelSelect,e.expression]])]),(0,a.createElementVNode)('div',Kt,[t[60]||(t[60]=(0,a.createElementVNode)('label',{class:'mapping-label'},'动作',-1)),(0,a.withDirectives)((0,a.createElementVNode)('select',{'onUpdate:modelValue':t=>e.motion=t,class:'mapping-select select-with-scroll'},[t[59]||(t[59]=(0,a.createElementVNode)('option',{value:'none'},'无动作',-1)),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(J.value,e=>((0,a.openBlock)(),(0,a.createElementBlock)('option',{key:e.name,value:e.name},(0,a.toDisplayString)(e.name),9,qt))),128))],8,Pt),[[a.vModelSelect,e.motion]])]),(0,a.createElementVNode)('button',{class:'remove-mapping-btn',title:'删除',onClick:e=>function(e){q.value.splice(e,1)}(n)},[(0,a.createVNode)((0,a.unref)(M),{class:'icon-sm'})],8,Jt)])])]))),128))])])])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' 角色立绘设置详情 '),'sprite'===u.value?((0,a.openBlock)(),(0,a.createElementBlock)('div',Qt,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(te.value,(e,n)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:n,class:'sprite-item'},[(0,a.createElementVNode)('div',Xt,[(0,a.createElementVNode)('span',Yt,(0,a.toDisplayString)(e.name),1),e.characterName?((0,a.openBlock)(),(0,a.createElementBlock)('span',Zt,(0,a.toDisplayString)(e.characterName),1)):(0,a.createCommentVNode)('v-if',!0),(0,a.createElementVNode)('button',{class:'bubble-btn bubble-btn-sm add-mapping-btn-inline',onClick:e=>function(e){te.value[e].textMappings||(te.value[e].textMappings=[]),te.value[e].textMappings.push({text:'',textTags:[]})}(n)},[(0,a.createVNode)((0,a.unref)(W),{class:'icon-sm'}),t[62]||(t[62]=(0,a.createTextVNode)(' 添加映射 ',-1))],8,en)]),(0,a.createElementVNode)('div',tn,[(0,a.createElementVNode)('div',nn,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.textMappings||[],(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:t,class:'mapping-item'},[(0,a.createElementVNode)('div',an,[(0,a.createElementVNode)('div',ln,[(0,a.createElementVNode)('input',{value:e.text,type:'text',placeholder:'输入触发文本，多个用分号(;)分隔',class:'mapping-text-input tags-input',onBlur:e=>function(e,t,n){const a=Y(n.target.value.trim());te.value[e].textMappings&&(te.value[e].textMappings[t].text=a.join(';'),te.value[e].textMappings[t].textTags=a)}(n,t,e),onKeydown:(0,a.withKeys)(e=>{return(t=e).preventDefault(),void t.target.blur();var t},['enter'])},null,40,on),e.textTags&&e.textTags.length>0?((0,a.openBlock)(),(0,a.createElementBlock)('div',cn,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.textTags,(e,l)=>((0,a.openBlock)(),(0,a.createElementBlock)('span',{key:l,class:'text-tag'},[(0,a.createTextVNode)((0,a.toDisplayString)(e)+' ',1),(0,a.createElementVNode)('button',{class:'tag-remove',onClick:e=>function(e,t,n){te.value[e].textMappings?.[t].textTags&&(te.value[e].textMappings[t].textTags.splice(n,1),te.value[e].textMappings[t].text=te.value[e].textMappings[t].textTags.join(';'))}(n,t,l)},'×',8,sn)]))),128))])):(0,a.createCommentVNode)('v-if',!0)]),(0,a.createElementVNode)('button',{class:'remove-mapping-btn',title:'删除',onClick:e=>{return a=n,l=t,void(te.value[a].textMappings&&te.value[a].textMappings.splice(l,1));var a,l}},[(0,a.createVNode)((0,a.unref)(M),{class:'icon-sm'})],8,rn)])]))),128))])])]))),128))])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' 背景设置详情 '),'background'===u.value?((0,a.openBlock)(),(0,a.createElementBlock)('div',mn,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(On.value,(e,n)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:n,class:'background-item'},[(0,a.createElementVNode)('div',un,[(0,a.createElementVNode)('span',dn,(0,a.toDisplayString)(e.name),1),(0,a.createElementVNode)('button',{class:'bubble-btn bubble-btn-sm add-mapping-btn-inline',onClick:e=>function(e){On.value[e].textMappings||(On.value[e].textMappings=[]),On.value[e].textMappings.push({text:'',textTags:[]})}(n)},[(0,a.createVNode)((0,a.unref)(W),{class:'icon-sm'}),t[63]||(t[63]=(0,a.createTextVNode)(' 添加映射 ',-1))],8,pn)]),(0,a.createElementVNode)('div',vn,[(0,a.createElementVNode)('div',fn,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.textMappings||[],(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:t,class:'mapping-item'},[(0,a.createElementVNode)('div',gn,[(0,a.createElementVNode)('div',hn,[(0,a.createElementVNode)('input',{value:e.text,type:'text',placeholder:'输入触发文本，多个用分号(;)分隔',class:'mapping-text-input tags-input',onBlur:e=>function(e,t,n){const a=Y(n.target.value.trim());On.value[e].textMappings&&(On.value[e].textMappings[t].text=a.join(';'),On.value[e].textMappings[t].textTags=a)}(n,t,e),onKeydown:(0,a.withKeys)(e=>{return(t=e).preventDefault(),void t.target.blur();var t},['enter'])},null,40,yn),e.textTags&&e.textTags.length>0?((0,a.openBlock)(),(0,a.createElementBlock)('div',bn,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.textTags,(e,l)=>((0,a.openBlock)(),(0,a.createElementBlock)('span',{key:l,class:'text-tag'},[(0,a.createTextVNode)((0,a.toDisplayString)(e)+' ',1),(0,a.createElementVNode)('button',{class:'tag-remove',onClick:e=>function(e,t,n){On.value[e].textMappings?.[t].textTags&&(On.value[e].textMappings[t].textTags.splice(n,1),On.value[e].textMappings[t].text=On.value[e].textMappings[t].textTags.join(';'))}(n,t,l)},' × ',8,kn)]))),128))])):(0,a.createCommentVNode)('v-if',!0)]),(0,a.createElementVNode)('button',{class:'remove-mapping-btn',title:'删除',onClick:e=>{return a=n,l=t,void(On.value[a].textMappings&&On.value[a].textMappings.splice(l,1));var a,l}},[(0,a.createVNode)((0,a.unref)(M),{class:'icon-sm'})],8,Nn)])]))),128))])])]))),128))])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' CG设置详情 '),'cg'===u.value?((0,a.openBlock)(),(0,a.createElementBlock)('div',Vn,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(Wn.value,(e,n)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:n,class:'cg-item'},[(0,a.createElementVNode)('div',En,[(0,a.createElementVNode)('span',xn,(0,a.toDisplayString)(e.name),1),(0,a.createElementVNode)('button',{class:'bubble-btn bubble-btn-sm add-mapping-btn-inline',onClick:e=>function(e){Wn.value[e].textMappings||(Wn.value[e].textMappings=[]),Wn.value[e].textMappings.push({text:'',textTags:[]})}(n)},[(0,a.createVNode)((0,a.unref)(W),{class:'icon-sm'}),t[64]||(t[64]=(0,a.createTextVNode)(' 添加映射 ',-1))],8,Bn)]),(0,a.createElementVNode)('div',wn,[(0,a.createElementVNode)('div',Cn,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.textMappings||[],(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:t,class:'mapping-item'},[(0,a.createElementVNode)('div',$n,[(0,a.createElementVNode)('div',Mn,[(0,a.createElementVNode)('input',{value:e.text,type:'text',placeholder:'输入触发文本，多个用分号(;)分隔',class:'mapping-text-input tags-input',onBlur:e=>function(e,t,n){const a=Y(n.target.value.trim());Wn.value[e].textMappings&&(Wn.value[e].textMappings[t].text=a.join(';'),Wn.value[e].textMappings[t].textTags=a)}(n,t,e),onKeydown:(0,a.withKeys)(e=>{return(t=e).preventDefault(),void t.target.blur();var t},['enter'])},null,40,Sn),e.textTags&&e.textTags.length>0?((0,a.openBlock)(),(0,a.createElementBlock)('div',Dn,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.textTags,(e,l)=>((0,a.openBlock)(),(0,a.createElementBlock)('span',{key:l,class:'text-tag'},[(0,a.createTextVNode)((0,a.toDisplayString)(e)+' ',1),(0,a.createElementVNode)('button',{class:'tag-remove',onClick:e=>function(e,t,n){Wn.value[e].textMappings?.[t].textTags&&(Wn.value[e].textMappings[t].textTags.splice(n,1),Wn.value[e].textMappings[t].text=Wn.value[e].textMappings[t].textTags.join(';'))}(n,t,l)},'×',8,_n)]))),128))])):(0,a.createCommentVNode)('v-if',!0)]),(0,a.createElementVNode)('button',{class:'remove-mapping-btn',title:'删除',onClick:e=>{return a=n,l=t,void(Wn.value[a].textMappings&&Wn.value[a].textMappings.splice(l,1));var a,l}},[(0,a.createVNode)((0,a.unref)(M),{class:'icon-sm'})],8,jn)])]))),128))])])]))),128))])):(0,a.createCommentVNode)('v-if',!0)]),(0,a.createCommentVNode)(' 详情页底部操作 '),(0,a.createElementVNode)('div',{class:'step-actions'},[(0,a.createElementVNode)('button',{class:'bubble-btn bubble-btn-primary',onClick:v},'完成设置')])],512),[[a.vShow,3===c.value&&u.value]]),(0,a.createCommentVNode)(' 步骤5: 完成 '),(0,a.withDirectives)((0,a.createElementVNode)('div',Ln,[(0,a.createElementVNode)('div',Tn,[(0,a.createVNode)((0,a.unref)(b),{class:'icon-lg success-icon'}),t[65]||(t[65]=(0,a.createElementVNode)('h2',null,'准备完成',-1)),(0,a.createElementVNode)('p',null,'模型 "'+(0,a.toDisplayString)(g.value)+'" 已准备就绪',1),(0,a.createElementVNode)('div',Un,[(0,a.createElementVNode)('p',null,'模型文件: '+(0,a.toDisplayString)(x.value?'✓':'✗'),1),(0,a.createElementVNode)('p',null,'纹理文件: '+(0,a.toDisplayString)(E.value.textures.length)+' 个',1),(0,a.createElementVNode)('p',null,'动作文件: '+(0,a.toDisplayString)(B.value)+' 个',1),(0,a.createElementVNode)('p',null,'表情文件: '+(0,a.toDisplayString)(w.value)+' 个',1)])]),(0,a.createElementVNode)('div',In,[(0,a.createElementVNode)('button',{class:'bubble-btn',onClick:A},'上一步'),(0,a.createElementVNode)('button',{class:'bubble-btn bubble-btn-primary',disabled:y.value,onClick:zn},[y.value?((0,a.openBlock)(),(0,a.createElementBlock)('span',Fn,'正在创建...')):((0,a.openBlock)(),(0,a.createElementBlock)('span',An,'完成并创建世界书条目'))],8,Rn)])],512),[[a.vShow,4===c.value]])]))}}),Wn=(0,v.A)(On,[['__scopeId','data-v-fb6ac8e4']]),zn={class:'opening-interface-wrapper'},Gn={class:'opening-interface'},Hn={class:'page main-menu'},Kn={class:'menu-buttons'},Pn={class:'page start-game'},qn={class:'openings-grid'},Jn=['onClick'],Qn={class:'image-wrapper'},Xn=['src','alt'],Yn={class:'content'},Zn={class:'hover-icon'},ea={class:'page settings'},ta={class:'page character-intro'},na={class:'character-display'},aa={class:'character-card-inner'},la={class:'character-image'},oa=['src','alt'],ca={class:'character-info'},sa={class:'character-role'},ra={class:'character-name'},ia={class:'character-desc'},ma={class:'character-dots'},ua=['onClick'],da=(0,a.defineComponent)({__name:'app',setup(e){const{currentPage:t,showPage:n}=function(){const e=(0,a.ref)('main-menu');return{currentPage:e,showPage:function(t){e.value=t}}}(),l=(0,a.ref)(c),r=(0,a.ref)(s),{currentIndex:i,currentItem:m,prev:p,next:v,goTo:f}=function(e){const t=(0,a.ref)(0),n=(0,a.computed)(()=>e[t.value]);return{currentIndex:t,currentItem:n,prev:function(){t.value=0===t.value?e.length-1:t.value-1},next:function(){t.value=t.value===e.length-1?0:t.value+1},goTo:function(n){n>=0&&n<e.length&&(t.value=n)}}}(r.value),g=(0,a.ref)();async function h(e){await async function(e){try{await createChatMessages([{role:'system',message:e.message}],{refresh:'all'}),await triggerSlash('/trigger'),o().success(`已选择开场：${e.title}`)}catch(e){throw console.error('选择开场失败:',e),o().error('选择开场失败'),e}}(e)}function y(){}return(0,a.onMounted)(()=>{(0,a.nextTick)(()=>{!function(e){if(!e)return;const{count:t,minDuration:n,maxDuration:a,maxDelay:l}=u;for(let o=0;o<t;o++){const t=document.createElement('div');t.className='particle',t.style.left=100*Math.random()+'%',t.style.top=100*Math.random()+'%',t.style.animationDelay=Math.random()*l+'s',t.style.animationDuration=`${n+Math.random()*(a-n)}s`,e.appendChild(t)}}(g.value),d()})}),(0,a.watch)(t,()=>{(0,a.nextTick)(()=>{const e=window.__applyScale;e&&e(),d()})}),(e,o)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',zn,[(0,a.createElementVNode)('div',Gn,[(0,a.createCommentVNode)(' 背景 '),o[15]||(o[15]=(0,a.createElementVNode)('div',{class:'background'},null,-1)),o[16]||(o[16]=(0,a.createElementVNode)('div',{class:'overlay'},null,-1)),(0,a.createCommentVNode)(' 粒子效果 '),(0,a.createElementVNode)('div',{ref_key:'particlesRef',ref:g,class:'particles'},null,512),(0,a.createCommentVNode)(' 主菜单 '),(0,a.withDirectives)((0,a.createElementVNode)('div',Hn,[o[11]||(o[11]=(0,a.createElementVNode)('div',{class:'title-section'},[(0,a.createElementVNode)('h1',null,'星之轨迹'),(0,a.createElementVNode)('p',{class:'subtitle'},'Starlight Trail'),(0,a.createElementVNode)('p',{class:'tagline'},'— 一段跨越时空的浪漫物语 —')],-1)),(0,a.createElementVNode)('div',Kn,[(0,a.createElementVNode)('button',{class:'bubble-btn bubble-btn-lg',onClick:o[0]||(o[0]=e=>(0,a.unref)(n)('start-game'))},[(0,a.createVNode)((0,a.unref)(j)),o[8]||(o[8]=(0,a.createTextVNode)(' 开始游戏 ',-1))]),(0,a.createElementVNode)('button',{class:'bubble-btn bubble-btn-lg',onClick:o[1]||(o[1]=e=>(0,a.unref)(n)('settings'))},[(0,a.createVNode)((0,a.unref)(U)),o[9]||(o[9]=(0,a.createTextVNode)(' 游戏设置 ',-1))]),(0,a.createElementVNode)('button',{class:'bubble-btn bubble-btn-lg',onClick:o[2]||(o[2]=e=>(0,a.unref)(n)('character-intro'))},[(0,a.createVNode)((0,a.unref)(K)),o[10]||(o[10]=(0,a.createTextVNode)(' 角色介绍 ',-1))])]),o[12]||(o[12]=(0,a.createElementVNode)('div',{class:'footer'},[(0,a.createElementVNode)('p',null,'© 2025 Per Aspera Ad Astra. By sixue')],-1))],512),[[a.vShow,'main-menu'===(0,a.unref)(t)]]),(0,a.createCommentVNode)(' 开始游戏页面 '),(0,a.withDirectives)((0,a.createElementVNode)('div',Pn,[(0,a.createVNode)((0,a.unref)(ne),{title:'选择开场',onBack:o[3]||(o[3]=e=>(0,a.unref)(n)('main-menu'))},{default:(0,a.withCtx)(()=>[(0,a.createVNode)((0,a.unref)(F))]),_:1}),(0,a.createElementVNode)('div',qn,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(l.value,e=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.id,class:'opening-card',onClick:t=>h(e)},[(0,a.createElementVNode)('div',Qn,[(0,a.createElementVNode)('img',{src:e.image||'',alt:e.title},null,8,Xn)]),(0,a.createElementVNode)('div',Yn,[(0,a.createElementVNode)('h3',null,(0,a.toDisplayString)(e.title),1),(0,a.createElementVNode)('p',null,(0,a.toDisplayString)(e.description),1)]),(0,a.createElementVNode)('div',Zn,[(0,a.createVNode)((0,a.unref)(F),{class:'icon-sm'})])],8,Jn))),128))]),o[13]||(o[13]=(0,a.createElementVNode)('p',{class:'hint-text'},'选择一个开场，开启你的专属故事',-1))],512),[[a.vShow,'start-game'===(0,a.unref)(t)]]),(0,a.createCommentVNode)(' 设置页面（整合了上传向导） '),(0,a.withDirectives)((0,a.createElementVNode)('div',ea,[(0,a.createVNode)((0,a.unref)(Wn),{onClose:o[4]||(o[4]=e=>(0,a.unref)(n)('main-menu')),onComplete:y})],512),[[a.vShow,'settings'===(0,a.unref)(t)]]),(0,a.createCommentVNode)(' 角色介绍页面 '),(0,a.withDirectives)((0,a.createElementVNode)('div',ta,[(0,a.createVNode)((0,a.unref)(ne),{title:'角色介绍',onBack:o[5]||(o[5]=e=>(0,a.unref)(n)('main-menu'))}),(0,a.createElementVNode)('div',na,[(0,a.createElementVNode)('button',{class:'bubble-btn bubble-btn-round nav-btn',onClick:o[6]||(o[6]=(...e)=>(0,a.unref)(p)&&(0,a.unref)(p)(...e))},[(0,a.createVNode)((0,a.unref)(V),{class:'icon-lg'})]),(0,a.createElementVNode)('div',{class:(0,a.normalizeClass)(['character-card',(0,a.unref)(m).colorClass])},[(0,a.createElementVNode)('div',aa,[(0,a.createElementVNode)('div',la,[(0,a.createElementVNode)('img',{src:(0,a.unref)(m).image||'',alt:(0,a.unref)(m).name},null,8,oa)]),(0,a.createElementVNode)('div',ca,[(0,a.createElementVNode)('span',sa,(0,a.toDisplayString)((0,a.unref)(m).role),1),(0,a.createElementVNode)('h3',ra,(0,a.toDisplayString)((0,a.unref)(m).name),1),(0,a.createElementVNode)('p',ia,(0,a.toDisplayString)((0,a.unref)(m).desc),1),(0,a.createElementVNode)('div',ma,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(r.value,(_,e)=>((0,a.openBlock)(),(0,a.createElementBlock)('button',{key:e,class:(0,a.normalizeClass)(['dot',{active:e===(0,a.unref)(i)}]),onClick:t=>(0,a.unref)(f)(e)},null,10,ua))),128))])])])],2),(0,a.createElementVNode)('button',{class:'bubble-btn bubble-btn-round nav-btn',onClick:o[7]||(o[7]=(...e)=>(0,a.unref)(v)&&(0,a.unref)(v)(...e))},[(0,a.createVNode)((0,a.unref)(B),{class:'icon-lg'})])]),o[14]||(o[14]=(0,a.createElementVNode)('p',{class:'hint-text'},'点击左右按钮或底部指示器切换角色',-1))],512),[[a.vShow,'character-intro'===(0,a.unref)(t)]])])]))}}),pa=(0,v.A)(da,[['__scopeId','data-v-dffb8c58']]);function va(){const e=document.querySelector('.opening-interface');if(!e)return;if(e.querySelector('.main-menu')){e.classList.add('main-menu-active');const t=1200,n=800,a=window.innerWidth,l=window.innerHeight,o=20,c=Math.max(a-2*o,0),s=Math.max(l-2*o,0);if(c<=0||s<=0)return;const r=c/t,i=s/n,m=Math.min(r,i,1);e.style.transform=`scale(${m})`,e.style.transformOrigin='top center',console.info(`[开场界面] 主菜单应用缩放比例: ${m.toFixed(3)} (容器: ${a}x${l})`)}else e.classList.remove('main-menu-active'),e.style.transform='',e.style.transformOrigin='',console.info('[开场界面] 其他页面，移除缩放限制')}$(()=>{try{console.info('[开场界面] 开始初始化...');if(!document.getElementById('app'))throw new Error('找不到 #app 元素');console.info('[开场界面] 创建 Vue 应用实例...');const e=(0,a.createApp)(pa);console.info('[开场界面] 挂载到 #app...'),e.mount('#app'),console.info('[开场界面] Vue 应用挂载成功，初始化缩放和自适应高度...'),window.__applyScale=va,setTimeout(()=>{!function(){let e;va();const t=()=>{clearTimeout(e),e=setTimeout(()=>{va(),d()},100)};window.addEventListener('resize',t),window.__cleanupOpeningInterface=function(){window.removeEventListener('resize',t),n&&'undefined'!=typeof ResizeObserver&&new ResizeObserver(()=>{}).disconnect()};const n=document.querySelector('.opening-interface-wrapper');if(n&&'undefined'!=typeof ResizeObserver){const e=new ResizeObserver(()=>{va(),d()});e.observe(n);const t=document.querySelector('.opening-interface');t&&e.observe(t)}setTimeout(()=>{va(),d()},100),setTimeout(()=>{va(),d()},300),setTimeout(()=>{va(),d()},500),setTimeout(()=>{va(),d()},1e3)}(),function(){if(d(),'undefined'!=typeof ResizeObserver){const e=new ResizeObserver(()=>{clearTimeout(window.__heightAdjustTimeout),window.__heightAdjustTimeout=setTimeout(()=>{d()},100)}),t=document.getElementById('app');t&&e.observe(t),e.observe(document.body),e.observe(document.documentElement),window.addEventListener('resize',()=>{d()}),console.info('[开场界面] 已启用 ResizeObserver 自动高度调整')}else new MutationObserver(()=>{d()}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:['style','class']}),setInterval(()=>{d()},500),console.info('[开场界面] 已启用 MutationObserver 自动高度调整（降级方案）');setTimeout(()=>{d()},100),setTimeout(()=>{d()},500),setTimeout(()=>{d()},1e3)}()},100),console.info('[开场界面] 初始化成功！')}catch(e){console.error('[开场界面] 初始化失败:',e);const t=document.getElementById('app');t&&(t.innerHTML=`\n        <div style="padding: 20px; color: red; background: white; font-family: monospace;">\n          <h2>❌ 开场界面初始化错误</h2>\n          <p><strong>错误信息:</strong></p>\n          <pre style="background: #f5f5f5; padding: 10px; border-radius: 4px; overflow: auto;">${e instanceof Error?e.message:String(e)}</pre>\n          ${e instanceof Error&&e.stack?`<p><strong>堆栈跟踪:</strong></p><pre style="background: #f5f5f5; padding: 10px; border-radius: 4px; overflow: auto; font-size: 12px;">${e.stack}</pre>`:''}\n        </div>\n      `)}}),$(window).on('pagehide',()=>{window.__cleanupOpeningInterface&&window.__cleanupOpeningInterface(),console.info('[开场界面] 资源清理完成')});
//# sourceMappingURL=index.js.map</script><style>.collapsible-section[data-v-379bada6]{background:hsla(0,0%,100%,.6);border-radius:12px;overflow:hidden;backdrop-filter:blur(10px)}.collapsible-header[data-v-379bada6]{width:100%;display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:rgba(0,0,0,0);border:none;cursor:pointer;transition:all .3s;text-align:left}.collapsible-header[data-v-379bada6]:hover{background:rgba(0,0,0,.05)}.collapsible-header.expanded[data-v-379bada6]{border-bottom:1px solid rgba(0,0,0,.1)}.header-title[data-v-379bada6]{display:flex;align-items:center;gap:8px;font-size:16px;font-weight:600;color:var(--foreground)}.badge[data-v-379bada6]{padding:2px 8px;background:rgba(236,72,153,.2);color:var(--primary-color,#ec4899);border-radius:12px;font-size:12px;font-weight:500}.chevron-icon[data-v-379bada6]{width:20px;height:20px;transition:transform .3s;color:var(--muted-foreground)}.chevron-icon.rotated[data-v-379bada6]{transform:rotate(180deg)}.collapsible-content[data-v-379bada6]{padding:16px;animation:slideDown-379bada6 .3s ease-out;overflow:visible;max-height:none}@keyframes slideDown-379bada6{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.slide-enter-active[data-v-379bada6],.slide-leave-active[data-v-379bada6]{transition:all .3s ease;overflow:hidden}.slide-enter-from[data-v-379bada6],.slide-leave-to[data-v-379bada6]{max-height:0;opacity:0;padding-top:0;padding-bottom:0}.slide-enter-to[data-v-379bada6],.slide-leave-from[data-v-379bada6]{max-height:2000px;opacity:1}
.model-upload-wizard[data-v-fb6ac8e4]{width:100%;max-width:800px;margin:0 auto;height:100%;display:flex;flex-direction:column;overflow:hidden}.steps-indicator[data-v-fb6ac8e4]{display:flex;justify-content:space-between;margin:16px 0;padding:0 20px;flex-shrink:0}.step-item[data-v-fb6ac8e4]{flex:1;display:flex;flex-direction:column;align-items:center;position:relative}.step-item[data-v-fb6ac8e4]::after{content:"";position:absolute;top:20px;left:50%;width:100%;height:2px;background:rgba(0,0,0,.1);z-index:-1}.step-item[data-v-fb6ac8e4]:last-child::after{display:none}.step-item.active .step-number[data-v-fb6ac8e4]{background:var(--primary-color,#ec4899);color:#fff}.step-item.completed .step-number[data-v-fb6ac8e4]{background:#10b981;color:#fff}.step-number[data-v-fb6ac8e4]{width:40px;height:40px;border-radius:50%;background:rgba(0,0,0,.1);display:flex;align-items:center;justify-content:center;font-weight:bold;margin-bottom:8px}.step-label[data-v-fb6ac8e4]{font-size:14px;color:var(--muted-foreground)}.step-content[data-v-fb6ac8e4]{flex:1;display:flex;flex-direction:column;overflow:hidden;padding:16px;min-height:0}.step-content[data-v-fb6ac8e4]>*:not(.step-actions){flex:1;overflow-y:auto;overflow-x:hidden;min-height:0;scrollbar-width:none;-ms-overflow-style:none}.step-content[data-v-fb6ac8e4]>*:not(.step-actions)::-webkit-scrollbar{display:none}.step-content .step-actions[data-v-fb6ac8e4]{flex-shrink:0;margin-top:auto;padding-top:16px}.upload-area[data-v-fb6ac8e4]{border:2px dashed rgba(0,0,0,.2);border-radius:12px;padding:40px;text-align:center;cursor:pointer;transition:all .3s;min-height:300px;display:flex;flex-direction:column;justify-content:center}.upload-area[data-v-fb6ac8e4]:hover{border-color:var(--primary-color,#ec4899);background:rgba(236,72,153,.05)}.upload-area-inner[data-v-fb6ac8e4]{width:100%;height:100%}.upload-area-inner[data-v-fb6ac8e4]{width:100%;height:100%}.upload-placeholder[data-v-fb6ac8e4]{display:flex;flex-direction:column;align-items:center;gap:16px}.uploaded-files-preview[data-v-fb6ac8e4]{width:100%;cursor:default}.uploaded-files-preview[data-v-fb6ac8e4] *{pointer-events:auto}.files-summary[data-v-fb6ac8e4]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;flex-wrap:wrap;gap:12px}.summary-actions[data-v-fb6ac8e4]{display:flex;gap:8px}.files-list[data-v-fb6ac8e4]{display:flex;flex-direction:column;gap:8px;max-height:200px;overflow-y:auto;overflow-x:hidden;scrollbar-width:none;-ms-overflow-style:none}.files-list[data-v-fb6ac8e4]::-webkit-scrollbar{display:none}.file-item[data-v-fb6ac8e4]{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:8px 12px;background:rgba(0,0,0,.05);border-radius:8px;transition:background .2s}.file-item[data-v-fb6ac8e4]:hover{background:rgba(0,0,0,.1)}.file-name[data-v-fb6ac8e4]{flex:1;text-align:left;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.remove-file-btn[data-v-fb6ac8e4]{display:flex;align-items:center;justify-content:center;width:24px;height:24px;padding:0;border:none;background:rgba(239,68,68,.1);color:#ef4444;border-radius:4px;cursor:pointer;transition:all .2s}.remove-file-btn[data-v-fb6ac8e4]:hover{background:rgba(239,68,68,.2)}.file-source-badge[data-v-fb6ac8e4]{padding:2px 6px;border-radius:4px;font-size:11px;font-weight:500;background:rgba(59,130,246,.1);color:#3b82f6}.file-type-badge[data-v-fb6ac8e4]{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500}.file-type-badge.type-texture[data-v-fb6ac8e4]{background:#e0f2fe;color:#0369a1}.file-type-badge.type-moc3[data-v-fb6ac8e4],.file-type-badge.type-model3[data-v-fb6ac8e4]{background:#fef3c7;color:#92400e}.file-type-badge.type-motion[data-v-fb6ac8e4]{background:#dbeafe;color:#1e40af}.file-type-badge.type-image[data-v-fb6ac8e4]{background:#fce7f3;color:#9f1239}.file-type-badge.type-other[data-v-fb6ac8e4]{background:#f3f4f6;color:#6b7280}.classifying-status[data-v-fb6ac8e4]{text-align:center;padding:20px}.classified-files[data-v-fb6ac8e4]{display:flex;flex-direction:column;gap:16px;overflow-y:auto;overflow-x:hidden;scrollbar-width:none;-ms-overflow-style:none}.classified-files[data-v-fb6ac8e4]::-webkit-scrollbar{display:none}.settings-card[data-v-fb6ac8e4]{background:hsla(0,0%,100%,.6);border-radius:12px;padding:16px;backdrop-filter:blur(10px)}.model-name-input[data-v-fb6ac8e4]{width:100%;padding:12px;border:1px solid rgba(0,0,0,.2);border-radius:8px;font-size:16px;margin-top:8px}.files-categories[data-v-fb6ac8e4]{display:flex;flex-direction:column;gap:12px}.category-section[data-v-fb6ac8e4]{background:hsla(0,0%,100%,.6);border-radius:12px;padding:16px;backdrop-filter:blur(10px)}.file-category[data-v-fb6ac8e4]{display:flex;flex-direction:column;gap:8px;margin-top:12px;max-height:300px;overflow-y:auto;overflow-x:hidden;scrollbar-width:none;-ms-overflow-style:none}.file-category[data-v-fb6ac8e4]::-webkit-scrollbar{display:none}.category-item[data-v-fb6ac8e4]{display:flex;align-items:center;gap:8px;padding:8px;background:rgba(0,0,0,.05);border-radius:8px}.toggle-type-btn[data-v-fb6ac8e4]{margin-left:auto;padding:4px 8px;font-size:12px;background:rgba(0,0,0,.1);border:none;border-radius:4px;cursor:pointer}.step-actions[data-v-fb6ac8e4]{display:flex;justify-content:space-between;gap:16px;margin-top:16px;padding-top:16px;border-top:1px solid rgba(0,0,0,.1);flex-shrink:0}.character-name-badge[data-v-fb6ac8e4]{padding:2px 8px;background:rgba(99,102,241,.2);color:#6366f1;border-radius:12px;font-size:12px;font-weight:500;margin-left:auto}.upload-methods-container[data-v-fb6ac8e4]{display:grid;grid-template-columns:1fr 1fr;gap:24px;margin-top:24px}@media (max-width:768px){.upload-methods-container[data-v-fb6ac8e4]{grid-template-columns:1fr}}.upload-method-section[data-v-fb6ac8e4]{display:flex;flex-direction:column;gap:12px}.method-title[data-v-fb6ac8e4]{font-size:16px;font-weight:600;margin:0;color:var(--foreground)}.url-upload-area[data-v-fb6ac8e4]{display:flex;flex-direction:column;gap:16px}.url-input-group[data-v-fb6ac8e4]{display:flex;gap:12px;align-items:stretch}.url-input[data-v-fb6ac8e4]{flex:1;padding:12px;border:1px solid rgba(0,0,0,.2);border-radius:8px;font-size:14px;background:#fff}.category-item-with-select[data-v-fb6ac8e4]{padding:12px}.classify-select[data-v-fb6ac8e4]{margin-left:auto;min-width:140px;padding:8px 12px;border:1px solid rgba(0,0,0,.2);border-radius:8px;font-size:14px;background:#fff;cursor:pointer;transition:all .2s}.classify-select[data-v-fb6ac8e4]:hover{border-color:rgba(0,0,0,.3)}.classify-select[data-v-fb6ac8e4]:focus{outline:none;border-color:#6366f1;box-shadow:0 0 0 3px rgba(99,102,241,.1)}.completion-summary[data-v-fb6ac8e4]{text-align:center;padding:40px}.success-icon[data-v-fb6ac8e4]{width:64px;height:64px;color:#10b981;margin-bottom:16px}.summary-details[data-v-fb6ac8e4]{margin-top:24px;display:flex;flex-direction:column;gap:8px;text-align:left;max-width:300px;margin-left:auto;margin-right:auto}.hidden-input[data-v-fb6ac8e4]{display:none}.resource-settings-list[data-v-fb6ac8e4]{display:flex;flex-direction:column;gap:12px;overflow-y:auto;overflow-x:hidden;flex:1;scrollbar-width:none;-ms-overflow-style:none}.resource-settings-list[data-v-fb6ac8e4]::-webkit-scrollbar{display:none}.resource-entry-btn[data-v-fb6ac8e4]{display:flex;align-items:center;gap:16px;width:100%;padding:16px 20px;background:hsla(0,0%,100%,.6);border:1px solid rgba(0,0,0,.1);border-radius:12px;cursor:pointer;transition:all .2s;text-align:left;backdrop-filter:blur(10px)}.resource-entry-btn[data-v-fb6ac8e4]:hover{background:hsla(0,0%,100%,.8);border-color:var(--primary-color,#ec4899);transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.1)}.resource-entry-btn[data-v-fb6ac8e4]:active{transform:translateY(0)}.resource-entry-icon[data-v-fb6ac8e4]{width:48px;height:48px;display:flex;align-items:center;justify-content:center;background:rgba(236,72,153,.1);border-radius:12px;color:var(--primary-color,#ec4899);flex-shrink:0}.resource-entry-content[data-v-fb6ac8e4]{flex:1;display:flex;flex-direction:column;gap:4px;min-width:0}.resource-entry-title[data-v-fb6ac8e4]{font-size:16px;font-weight:600;color:var(--foreground)}.resource-entry-desc[data-v-fb6ac8e4]{font-size:13px;color:var(--muted-foreground)}.resource-entry-badge[data-v-fb6ac8e4]{padding:4px 12px;background:var(--primary-color,#ec4899);color:#fff;border-radius:20px;font-size:13px;font-weight:600;flex-shrink:0}.resource-entry-arrow[data-v-fb6ac8e4]{width:20px;height:20px;color:var(--muted-foreground);flex-shrink:0}.no-resources-hint[data-v-fb6ac8e4]{text-align:center;padding:40px 20px;color:var(--muted-foreground)}.no-resources-hint p[data-v-fb6ac8e4]{margin:8px 0}.resource-detail-page[data-v-fb6ac8e4]{display:flex;flex-direction:column;height:100%}.resource-detail-content[data-v-fb6ac8e4]{flex:1;overflow-y:auto;overflow-x:hidden;padding:0 4px 0 0;min-height:0;scrollbar-width:none;-ms-overflow-style:none}.resource-detail-content[data-v-fb6ac8e4]::-webkit-scrollbar{display:none}.resource-detail-header[data-v-fb6ac8e4]{display:flex;align-items:center;gap:12px;padding:12px 16px;margin-bottom:16px;flex-shrink:0;position:sticky;top:0;background:hsla(0,0%,100%,.7);backdrop-filter:blur(8px);border:1px solid rgba(0,0,0,.08);border-radius:8px;z-index:10}.back-btn[data-v-fb6ac8e4]{display:flex;align-items:center;gap:4px;padding:8px 12px;background:rgba(0,0,0,.05);border:none;border-radius:8px;cursor:pointer;font-size:14px;color:var(--foreground);transition:all .2s;flex-shrink:0}.back-btn[data-v-fb6ac8e4]:hover{background:rgba(0,0,0,.1)}.resource-detail-title[data-v-fb6ac8e4]{font-size:18px;font-weight:600;margin:0;color:var(--foreground)}.mapping-inputs-vertical[data-v-fb6ac8e4]{display:flex;flex-direction:column;gap:12px;width:100%}.mapping-selects-row[data-v-fb6ac8e4]{display:flex;gap:12px;align-items:flex-end;flex-wrap:wrap}.mapping-select-item[data-v-fb6ac8e4]{flex:1;min-width:120px;display:flex;flex-direction:column;gap:4px}.mapping-label[data-v-fb6ac8e4]{font-size:12px;color:var(--muted-foreground);font-weight:500}.animation-settings[data-v-fb6ac8e4]{display:flex;flex-direction:column;gap:16px}.setting-item[data-v-fb6ac8e4]{margin-bottom:10px}.setting-item label[data-v-fb6ac8e4]{display:block;margin-bottom:6px;font-weight:500;font-size:14px;color:var(--foreground)}.setting-item input[type=text][data-v-fb6ac8e4],.setting-item select[data-v-fb6ac8e4]{width:100%;padding:8px 12px;border:1px solid rgba(0,0,0,.2);border-radius:8px;font-size:14px;background:#fff}.setting-item input[type=checkbox][data-v-fb6ac8e4]{margin-right:8px}.select-with-scroll[data-v-fb6ac8e4]{max-height:200px;overflow-y:auto}.text-mapping-section[data-v-fb6ac8e4]{margin-top:12px;padding-top:12px;border-top:1px solid rgba(0,0,0,.1)}.text-mapping-section.compact[data-v-fb6ac8e4]{margin-top:8px;padding-top:8px}.text-mapping-section h4[data-v-fb6ac8e4]{margin-bottom:8px;font-size:14px;font-weight:600}.text-mapping-section .text-mapping-header[data-v-fb6ac8e4]{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;margin-bottom:12px}.text-mapping-section .text-mapping-header h4[data-v-fb6ac8e4]{margin:0;flex-shrink:0}.text-mapping-section .text-mapping-header .hint[data-v-fb6ac8e4]{flex:1;margin:0;font-size:12px;color:var(--muted-foreground);line-height:1.4}.text-mapping-section .text-mapping-header .add-mapping-btn[data-v-fb6ac8e4]{flex-shrink:0}.mapping-list[data-v-fb6ac8e4]{display:flex;flex-direction:column;gap:8px;max-height:400px;overflow-y:auto;overflow-x:hidden;scrollbar-width:none;-ms-overflow-style:none}.mapping-list[data-v-fb6ac8e4]::-webkit-scrollbar{display:none}.mapping-item[data-v-fb6ac8e4]{padding:10px;background:rgba(0,0,0,.05);border-radius:8px}.mapping-inputs[data-v-fb6ac8e4]{display:flex;gap:8px;align-items:flex-start;flex-wrap:wrap}.text-tags-input-wrapper[data-v-fb6ac8e4]{flex:1;min-width:200px;display:flex;flex-direction:column;gap:6px}.mapping-text-input[data-v-fb6ac8e4]{width:100%;padding:8px 12px;border:1px solid rgba(0,0,0,.2);border-radius:8px;font-size:14px}.mapping-text-input.tags-input[data-v-fb6ac8e4]{padding-bottom:6px}.mapping-text-input[data-v-fb6ac8e4]:focus{outline:none;border-color:#6366f1;box-shadow:0 0 0 3px rgba(99,102,241,.1)}.text-tags[data-v-fb6ac8e4]{display:flex;flex-wrap:wrap;gap:6px;margin-top:4px}.text-tag[data-v-fb6ac8e4]{display:inline-flex;align-items:center;gap:4px;padding:4px 8px;background:rgba(99,102,241,.1);color:#6366f1;border-radius:6px;font-size:12px;font-weight:500}.text-tag .tag-remove[data-v-fb6ac8e4]{display:inline-flex;align-items:center;justify-content:center;width:16px;height:16px;padding:0;margin-left:2px;border:none;background:rgba(99,102,241,.2);color:#6366f1;border-radius:50%;cursor:pointer;font-size:14px;line-height:1;transition:all .2s}.text-tag .tag-remove[data-v-fb6ac8e4]:hover{background:rgba(99,102,241,.3)}.mapping-select[data-v-fb6ac8e4]{min-width:120px;padding:8px 12px;border:1px solid rgba(0,0,0,.2);border-radius:8px;font-size:14px}.remove-mapping-btn[data-v-fb6ac8e4]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;padding:0;border:none;background:rgba(239,68,68,.1);color:#ef4444;border-radius:4px;cursor:pointer;transition:all .2s}.remove-mapping-btn[data-v-fb6ac8e4]:hover{background:rgba(239,68,68,.2)}.sprite-settings[data-v-fb6ac8e4],.background-settings[data-v-fb6ac8e4],.cg-settings[data-v-fb6ac8e4]{display:flex;flex-direction:column;gap:12px}.sprite-item[data-v-fb6ac8e4],.background-item[data-v-fb6ac8e4],.cg-item[data-v-fb6ac8e4]{padding:12px;background:rgba(0,0,0,.05);border-radius:8px}.sprite-header[data-v-fb6ac8e4],.resource-header[data-v-fb6ac8e4]{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:8px;flex-wrap:wrap}.sprite-name[data-v-fb6ac8e4],.resource-name[data-v-fb6ac8e4]{font-weight:500;color:var(--foreground);flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.add-mapping-btn-inline[data-v-fb6ac8e4]{flex-shrink:0}

:root{--foreground:#1a1a2e;--muted-foreground:#4a4a6a;--background:#fdf2f8}*{box-sizing:border-box;margin:0;padding:0}html,body{margin:0;padding:0;width:100%;height:auto;overflow-x:hidden;background:rgba(0,0,0,0)}#app{width:100%;height:auto;background:rgba(0,0,0,0);display:flex;justify-content:center;align-items:flex-start}.opening-interface-wrapper{width:100%;min-height:100vh;display:flex;justify-content:center;align-items:flex-start;background:rgba(0,0,0,0);padding:0;overflow:auto}.opening-interface{position:relative;display:flex;flex-direction:column;color:var(--foreground);font-family:"Segoe UI","Microsoft YaHei",sans-serif;background:rgba(0,0,0,0);transform-origin:top center;will-change:transform;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;width:100%;max-width:1200px;min-height:0;flex-shrink:1}.opening-interface.main-menu-active{width:1200px;height:800px;min-width:1200px;min-height:800px;flex-shrink:0}.background{position:absolute;inset:0;background:linear-gradient(135deg,#fce7f3 0%,#fdf2f8 50%,#f3e8ff 100%);z-index:-2}.background::before{content:"";position:absolute;inset:0;background-image:url("https://images.unsplash.com/photo-1522383225653-a7e3ad22d696?w=1920&q=80");background-size:cover;background-position:center;opacity:.4}.overlay{position:absolute;inset:0;background:linear-gradient(to bottom,rgba(253,242,248,0.3),transparent,rgba(253,242,248,0.4));z-index:-1}.particles{position:absolute;inset:0;pointer-events:none;z-index:0}.particle{position:absolute;width:8px;height:8px;background:hsla(0,0%,100%,.5);border-radius:50%;animation:float linear infinite}@keyframes float{0%,100%{transform:translateY(0) translateX(0);opacity:0}10%{opacity:.6}90%{opacity:.6}100%{transform:translateY(-100%) translateX(20px);opacity:0}}.page{position:relative;z-index:1;padding:20px;width:100%;height:100%;display:flex;flex-direction:column;flex:1;box-sizing:border-box;overflow:hidden}.upload-wizard-page{overflow:hidden}.upload-wizard-page .opening-interface{overflow:hidden}.main-menu{align-items:center;justify-content:center;text-align:center;padding-bottom:80px}.title-section{margin-bottom:80px}.title-section h1{font-size:clamp(3rem,8vw,5rem);font-weight:bold;color:var(--foreground);margin:0 0 16px 0;text-shadow:0 4px 20px hsla(0,0%,100%,.5)}.title-section .subtitle{font-size:clamp(1.2rem,3vw,1.5rem);color:var(--foreground);opacity:.8;letter-spacing:4px;margin:0}.title-section .tagline{margin-top:16px;font-size:clamp(.9rem,2vw,1.1rem);color:var(--foreground);opacity:.7;font-style:italic;margin:16px 0 0 0}.menu-buttons{display:flex;flex-direction:column;gap:20px;margin-bottom:80px}.footer{margin-top:auto;padding-top:40px;opacity:.6;font-size:14px}.bubble-btn{display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:14px 32px;background:hsla(0,0%,100%,.4);backdrop-filter:blur(12px);border:1px solid hsla(0,0%,100%,.6);border-radius:9999px;color:var(--foreground);font-size:16px;font-weight:500;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 20px hsla(0,0%,100%,.3);text-decoration:none;font-family:inherit}.bubble-btn:hover{background:hsla(0,0%,100%,.6);transform:translateY(-2px);box-shadow:0 8px 30px hsla(0,0%,100%,.4)}.bubble-btn:active{transform:translateY(0)}.bubble-btn-sm{padding:10px 20px;font-size:14px}.bubble-btn-lg{padding:16px 40px;font-size:18px;min-width:200px}.bubble-btn-round{width:50px;height:50px;padding:0;border-radius:50%}.full-width-btn{width:100%}.upload-buttons{display:flex;flex-direction:column;gap:12px;margin-top:16px}.bubble-btn-secondary{background:hsla(0,0%,100%,.6);color:var(--foreground)}.bubble-btn-secondary:hover{background:hsla(0,0%,100%,.8)}.icon{width:20px;height:20px;stroke:currentColor;stroke-width:2;fill:none}.icon-sm{width:16px;height:16px}.icon-lg{width:24px;height:24px}.start-game{width:100%;margin:0 auto;overflow-y:auto;overflow-x:hidden}.openings-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:24px;margin-bottom:24px}.opening-card{position:relative;background:hsla(0,0%,100%,.3);backdrop-filter:blur(12px);border:1px solid hsla(0,0%,100%,.5);border-radius:20px;overflow:hidden;cursor:pointer;transition:all .3s ease}.opening-card:hover{background:hsla(0,0%,100%,.5);transform:scale(1.02);box-shadow:0 10px 40px hsla(0,0%,100%,.3)}.opening-card .image-wrapper{position:relative;width:100%;aspect-ratio:16/9;overflow:hidden}.opening-card .image-wrapper::after{content:"";position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,0.4),transparent)}.opening-card img{width:100%;height:100%;object-fit:cover;transition:transform .5s ease}.opening-card:hover img{transform:scale(1.1)}.opening-card img{width:100%;height:100%;object-fit:cover}.opening-card .content{padding:16px;text-align:left}.opening-card h3{font-size:1.25rem;font-weight:bold;color:var(--foreground);margin-bottom:8px;margin:0 0 8px 0}.opening-card p{font-size:.875rem;color:var(--muted-foreground);margin:0}.opening-card .hover-icon{position:absolute;top:16px;right:16px;width:32px;height:32px;background:hsla(0,0%,100%,.5);backdrop-filter:blur(8px);border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease}.opening-card:hover .hover-icon{opacity:1}.hint-text{text-align:center;color:var(--foreground);opacity:.7;font-size:14px;margin-top:24px}.settings{width:100%;max-width:800px;margin:0 auto;overflow-y:auto;overflow-x:hidden}.settings-content{display:flex;flex-direction:column;gap:24px}.settings-card{background:hsla(0,0%,100%,.3);backdrop-filter:blur(12px);border:1px solid hsla(0,0%,100%,.5);border-radius:20px;padding:24px}.settings-card-header{display:flex;align-items:flex-start;gap:16px;margin-bottom:16px}.settings-card-icon{width:40px;height:40px;background:hsla(0,0%,100%,.5);border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.settings-card-header h3{margin:0 0 4px 0;font-size:18px;font-weight:600;color:var(--foreground)}.settings-card-header .desc{font-size:.875rem;color:var(--muted-foreground);margin:0;line-height:1.5}.url-input-group{display:flex;gap:12px}.url-input-group input{flex:1;padding:12px 20px;background:hsla(0,0%,100%,.5);border:1px solid hsla(0,0%,100%,.5);border-radius:9999px;color:var(--foreground);font-size:14px;outline:none;font-family:inherit}.url-input-group input:focus{box-shadow:0 0 0 2px hsla(0,0%,100%,.5)}.url-input-group input::placeholder{color:var(--muted-foreground)}.hidden-input{display:none}.config-list{display:flex;flex-direction:column;gap:12px}.config-item{display:flex;align-items:center;justify-content:space-between;background:hsla(0,0%,100%,.4);border-radius:12px;padding:12px 16px}.config-item-left{display:flex;align-items:center;gap:12px}.config-item-name{font-size:.875rem;color:var(--foreground);max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.config-item-right{display:flex;align-items:center;gap:12px}.check-icon{color:#16a34a}.remove-btn{width:24px;height:24px;background:hsla(0,0%,100%,.5);border:none;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:background .2s ease;padding:0}.remove-btn:hover{background:hsla(0,0%,100%,.7)}.character-intro{width:100%;max-width:1200px;margin:0 auto;overflow-y:auto;overflow-x:hidden;padding:0 10px;box-sizing:border-box}.character-display{display:flex;align-items:center;justify-content:space-between;gap:24px;margin-bottom:24px;width:100%;position:relative;padding:0 10px;box-sizing:border-box}.nav-btn{flex-shrink:0;position:relative;z-index:10}.character-display .character-card{flex:1;max-width:calc(100% - 148px);min-width:0}.character-card{flex:1;background:linear-gradient(135deg,rgba(251,207,232,0.5),rgba(244,114,182,0.3));backdrop-filter:blur(12px);border:1px solid hsla(0,0%,100%,.5);border-radius:24px;overflow:hidden;box-shadow:0 10px 40px hsla(0,0%,100%,.2);transition:all .5s ease}.character-card.blue{background:linear-gradient(135deg,rgba(191,219,254,0.5),rgba(99,102,241,0.3))}.character-card.orange{background:linear-gradient(135deg,rgba(254,215,170,0.5),rgba(251,146,60,0.3))}.character-card.gray{background:linear-gradient(135deg,rgba(226,232,240,0.5),rgba(148,163,184,0.3))}.character-card-inner{display:flex;flex-direction:column}@media (min-width:768px){.character-card-inner{flex-direction:row}}.character-image{position:relative;flex:1;min-height:300px}.character-image img{width:100%;height:100%;object-fit:cover;min-height:300px}.character-image::after{content:"";position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,0.3),transparent)}@media (min-width:768px){.character-image::after{background:linear-gradient(to right,transparent,rgba(0,0,0,0.2))}}.character-info{flex:1;padding:24px;display:flex;flex-direction:column;justify-content:center}.character-role{display:inline-block;align-self:flex-start;padding:6px 12px;background:hsla(0,0%,100%,.5);border-radius:9999px;font-size:.75rem;font-weight:500;color:var(--foreground);margin-bottom:12px}.character-name{font-size:clamp(1.8rem,5vw,2.5rem);font-weight:bold;color:var(--foreground);margin-bottom:16px;margin:0 0 16px 0}.character-desc{color:var(--muted-foreground);line-height:1.7;margin:0}.character-dots{display:flex;align-items:center;gap:8px;margin-top:32px}.character-dots .dot{width:8px;height:8px;border-radius:9999px;background:rgba(26,26,46,.3);border:none;cursor:pointer;transition:all .3s ease;padding:0}.character-dots .dot:hover{background:rgba(26,26,46,.5)}.character-dots .dot.active{width:24px;background:var(--foreground)}.page-header{width:100%;max-width:1000px;display:flex;align-items:center;justify-content:space-between;padding:20px;margin-bottom:20px;position:relative}.page-header h2{font-size:clamp(1.5rem,4vw,2rem);font-weight:bold;color:var(--foreground);display:flex;align-items:center;gap:10px;margin:0;position:absolute;left:50%;transform:translateX(-50%);white-space:nowrap}.spacer{width:80px;flex-shrink:0}@media (max-width:768px){.opening-interface{padding:10px}.title-section h1{font-size:clamp(2rem,6vw,3rem)}.title-section .subtitle{font-size:clamp(1rem,3vw,1.2rem)}.bubble-btn-lg{padding:12px 24px;font-size:16px;min-width:160px}.openings-grid{grid-template-columns:repeat(2,1fr);gap:16px}.character-display{flex-direction:column;gap:16px}.nav-btn{order:2}.character-card{order:1;width:100%}.page-header{padding:12px}.page-header h2{font-size:clamp(1.2rem,4vw,1.5rem)}.settings-card{padding:16px}}@media (max-width:480px){.opening-interface{padding:8px}.menu-buttons{gap:12px}.bubble-btn{padding:10px 20px;font-size:14px}.settings-card-header{flex-direction:column;align-items:flex-start;gap:8px}}

/*# sourceMappingURL=main.css.map*/</style></head><body><div id="app"></div></body>