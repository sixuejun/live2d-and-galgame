{"version":3,"file":"main.css","mappings":"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","sources":["src://tavern_helper_template/src/live2d‰∏égalgameÁïåÈù¢ÂâçÁ´Ø/components/CharacterSprite.vue","src://tavern_helper_template/src/live2d‰∏égalgameÁïåÈù¢ÂâçÁ´Ø/components/CharacterStatusPanel.vue","src://tavern_helper_template/src/live2d‰∏égalgameÁïåÈù¢ÂâçÁ´Ø/components/DialogBox.vue","src://tavern_helper_template/src/live2d‰∏égalgameÁïåÈù¢ÂâçÁ´Ø/components/ColorSlider.vue","src://tavern_helper_template/src/live2d‰∏égalgameÁïåÈù¢ÂâçÁ´Ø/components/SettingsPanel.vue","src://tavern_helper_template/src/live2d‰∏égalgameÁïåÈù¢ÂâçÁ´Ø/components/GalgamePlayer.vue","src://tavern_helper_template/<no source>","src://tavern_helper_template/node_modules/.pnpm/tailwindcss@4.1.17/node_modules/tailwindcss/index.css","src://tavern_helper_template/src/live2d‰∏égalgameÁïåÈù¢ÂâçÁ´Ø/styles/globals.css"],"sourcesContent":["<template>\n  <div\n    v-if=\"spriteType !== 'none'\"\n    ref=\"spriteContainerRef\"\n    class=\"absolute z-5 transition-all duration-300 pointer-events-none\"\n    :style=\"containerStyle\"\n  >\n    <!-- ÈùôÊÄÅÂõæÁâáÁ´ãÁªò -->\n    <img\n      v-if=\"spriteType === 'image'\"\n      :src=\"imageUrl\"\n      alt=\"ËßíËâ≤Á´ãÁªò\"\n      class=\"h-[70vh] w-auto object-contain drop-shadow-2xl\"\n      draggable=\"false\"\n    />\n\n    <!-- Live2D Ê®°ÂûãÊ∏≤Êüì -->\n    <canvas v-if=\"spriteType === 'live2d'\" ref=\"live2dCanvasRef\" class=\"live2d-canvas\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, onMounted, onUnmounted, ref, watch } from 'vue';\nimport { Live2DRenderer, type Live2DModelConfig } from '../Live2DRenderer';\n\ninterface Props {\n  scale: number;\n  positionX: number;\n  positionY: number;\n  spriteType: 'live2d' | 'image' | 'none';\n  imageUrl?: string;\n  live2dModelId?: string;\n  live2dModels?: any[];\n  motion?: string;\n  expression?: string;\n}\n\nconst props = defineProps<Props>();\n\nconst spriteContainerRef = ref<HTMLDivElement | null>(null);\nconst live2dCanvasRef = ref<HTMLCanvasElement | null>(null);\n\nlet live2dRenderer: Live2DRenderer | null = null;\n\n// ÂÆπÂô®Ê†∑Âºè\nconst containerStyle = computed(() => {\n  return {\n    left: `${props.positionX}%`,\n    bottom: `${100 - props.positionY}%`,\n    transform: `translateX(-50%) scale(${props.scale})`,\n    transformOrigin: 'bottom center',\n  };\n});\n\n// Âä†ËΩΩ Live2D Ê®°Âûã\nasync function loadLive2dModel() {\n  if (props.spriteType !== 'live2d' || !props.live2dModelId || !props.live2dModels || !live2dCanvasRef.value) {\n    return;\n  }\n\n  // Êü•ÊâæÊ®°ÂûãÈÖçÁΩÆ\n  const modelConfig = props.live2dModels.find(m => m.id === props.live2dModelId) as Live2DModelConfig | undefined;\n  if (!modelConfig) {\n    console.warn(`Êú™ÊâæÂà∞ Live2D Ê®°ÂûãÈÖçÁΩÆ: ${props.live2dModelId}`);\n    return;\n  }\n\n  try {\n    // ÈîÄÊØÅÊóßÊ∏≤ÊüìÂô®\n    if (live2dRenderer) {\n      live2dRenderer.destroy();\n      live2dRenderer = null;\n    }\n\n    // ÂàõÂª∫Êñ∞Ê∏≤ÊüìÂô®Âπ∂ÂàùÂßãÂåñ\n    live2dRenderer = new Live2DRenderer();\n    await live2dRenderer.init(live2dCanvasRef.value);\n    await live2dRenderer.loadModel(modelConfig);\n\n    // Êí≠ÊîæÂä®‰ΩúÂíåË°®ÊÉÖ\n    // Ê≥®ÊÑèÔºöÂ¶ÇÊûúÊ®°ÂûãÈÖçÁΩÆ‰∏≠Êúâ defaultAnimationÔºåLive2DRenderer Â∑≤Áªè‰ºöËá™Âä®Â§ÑÁêÜ\n    // Âè™ÊúâÂΩìÊòéÁ°ÆÊåáÂÆö‰∫ÜÂä®‰ΩúÊó∂ÔºåÊâç‰ºöÊí≠ÊîæÊåáÂÆöÂä®‰ΩúÔºà‰ºöÊâìÊñ≠ÈªòËÆ§Âä®‰ΩúÂæ™ÁéØÔºâ\n    if (props.motion) {\n      // Êü•ÊâæÂä®‰ΩúÁªÑÂíåÁ¥¢Âºï\n      const motionConfig = modelConfig.motions?.find((m: any) => {\n        const name = typeof m === 'string' ? m : m.name || m.file;\n        return name === props.motion || name === `${props.motion}.motion3.json`;\n      });\n\n      if (motionConfig) {\n        const group = typeof motionConfig === 'string' ? 'idle' : motionConfig.group || 'idle';\n        const normalizedGroup = group === 'default' ? 'idle' : group; // ÊîØÊåÅ'default'ÁªÑ\n        // Êü•ÊâæËØ•Âä®‰ΩúÂú®ÁªÑ‰∏≠ÁöÑÁ¥¢ÂºïÔºàÊîØÊåÅ'default'Âíå'idle'ÁªÑÔºâ\n        const groupMotions =\n          modelConfig.motions?.filter((m: any) => {\n            const mGroup = typeof m === 'string' ? 'idle' : m.group || 'idle';\n            const normalizedMGroup = mGroup === 'default' ? 'idle' : mGroup;\n            return normalizedMGroup === normalizedGroup || mGroup === group;\n          }) || [];\n        const index = groupMotions.findIndex((m: any) => {\n          const name = typeof m === 'string' ? m : m.name || m.file;\n          return name === props.motion || name === `${props.motion}.motion3.json`;\n        });\n        if (index >= 0) {\n          live2dRenderer.playMotion(normalizedGroup, index);\n        }\n      }\n    }\n    // Â¶ÇÊûúÊ≤°ÊúâÊåáÂÆöÂä®‰Ωú‰∏îÊ®°ÂûãÊúâÈªòËÆ§Âä®‰ΩúÂæ™ÁéØÔºåLive2DRenderer ‰ºöËá™Âä®Âæ™ÁéØÊí≠Êîæ\n\n    if (props.expression) {\n      // Êü•ÊâæË°®ÊÉÖÁ¥¢Âºï\n      const expressionIndex = modelConfig.expressions?.findIndex((e: any) => {\n        const name = typeof e === 'string' ? e : e.name || e.file;\n        return name === props.expression || name === `${props.expression}.exp3.json`;\n      });\n\n      if (expressionIndex !== undefined && expressionIndex >= 0) {\n        live2dRenderer.playExpression(expressionIndex);\n      }\n    }\n    // Â¶ÇÊûúÊ≤°ÊúâÊåáÂÆöË°®ÊÉÖ‰ΩÜÊ®°ÂûãÈÖçÁΩÆ‰∏≠ÊúâÈªòËÆ§Ë°®ÊÉÖÔºåLive2DRenderer Â∑≤Áªè‰ºöËá™Âä®Â∫îÁî®\n  } catch (error) {\n    console.error('Âä†ËΩΩ Live2D Ê®°ÂûãÂ§±Ë¥•:', error);\n  }\n}\n\n// ÁõëÂê¨Áõ∏ÂÖ≥Â±ûÊÄßÂèòÂåñ\nwatch(\n  () => [props.spriteType, props.live2dModelId, props.live2dModels, props.motion, props.expression],\n  () => {\n    if (props.spriteType === 'live2d') {\n      loadLive2dModel();\n    } else {\n      // Â¶ÇÊûú‰∏çÊòØ Live2D Ê®°ÂºèÔºåÈîÄÊØÅÊ∏≤ÊüìÂô®\n      if (live2dRenderer) {\n        live2dRenderer.destroy();\n        live2dRenderer = null;\n      }\n    }\n  },\n  { immediate: true },\n);\n\nonMounted(() => {\n  if (props.spriteType === 'live2d') {\n    loadLive2dModel();\n  }\n});\n\nonUnmounted(() => {\n  if (live2dRenderer) {\n    live2dRenderer.destroy();\n    live2dRenderer = null;\n  }\n});\n</script>\n\n<style scoped>\n.live2d-canvas {\n  width: 100%;\n  height: 70vh;\n  min-height: 400px;\n  display: block;\n}\n</style>\n","<template>\n  <div\n    v-if=\"show\"\n    class=\"absolute inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\"\n    @click=\"onClose\"\n  >\n    <div class=\"bg-card max-h-[85vh] w-[90%] max-w-md overflow-hidden rounded-xl shadow-2xl\" @click.stop>\n      <!-- Â§¥ÈÉ® -->\n      <div class=\"border-gray-200 flex items-center justify-between border-b px-4 py-3\">\n        <h2 class=\"text-foreground text-lg font-semibold\">ËßíËâ≤Áä∂ÊÄÅ</h2>\n        <button class=\"hover:bg-muted rounded-full p-1 transition-colors\" aria-label=\"ÂÖ≥Èó≠Áä∂ÊÄÅÊ†è\" @click=\"onClose\">\n          <svg class=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n          </svg>\n        </button>\n      </div>\n\n      <!-- ÂÜÖÂÆπ -->\n      <div class=\"max-h-[calc(85vh-60px)] overflow-y-auto p-4\">\n        <div class=\"space-y-4\">\n          <!-- Tab ÂàáÊç¢ - ÂØºËà™Ê†èÊ†∑ÂºèÔºåÂ∑¶Âè≥ÂàÜÊ†è -->\n          <div class=\"flex border-b border-gray-200\">\n            <button\n              v-for=\"tab in tabs\"\n              :key=\"tab.id\"\n              :class=\"[\n                'flex-1 px-4 py-3 text-sm font-medium transition-all relative',\n                activeTab === tab.id ? 'text-primary' : 'text-muted-foreground hover:text-foreground',\n              ]\"\n              @click=\"activeTab = tab.id\"\n            >\n              {{ tab.name }}\n              <!-- ÈÄâ‰∏≠Êó∂ÁöÑÁªøËâ≤Á≤óÊ®™Á∫ø -->\n              <div\n                v-if=\"activeTab === tab.id\"\n                class=\"absolute bottom-0 left-0 right-0 h-1 bg-primary\"\n                style=\"height: 3px\"\n              />\n            </button>\n          </div>\n\n          <!-- ËßíËâ≤Â±ûÊÄßÊ†áÁ≠æÈ°µ -->\n          <div v-if=\"activeTab === 'status'\" class=\"animate-in fade-in space-y-4 duration-200\">\n            <!-- ‰ø°ÊÅØÊ†è -->\n            <div class=\"status-info-bar\">\n              <div class=\"info-item\">\n                <span>üïí</span>\n                <span>{{ statusData.Êó∂Èó¥ || 'Êú™Áü•' }}</span>\n              </div>\n              <div class=\"info-item\">\n                <span>üìç</span>\n                <span>{{ statusData.Âú∞ÁÇπ || 'Êú™Áü•' }}</span>\n              </div>\n            </div>\n\n            <!-- Êï∞ÂÄºÁΩëÊ†º -->\n            <div v-if=\"Object.keys(statusValues).length > 0\" class=\"status-values-grid\">\n              <div v-for=\"(value, key) in statusValues\" :key=\"key\" class=\"value-card\">\n                <div class=\"value-name\">{{ key }}</div>\n                <div class=\"value-number\">{{ value }}</div>\n              </div>\n            </div>\n\n            <!-- ÊñáÊú¨Âç°Áâá -->\n            <div class=\"status-text-card\">\n              <div class=\"text-card-row\">\n                <span class=\"text-card-label\">ÂÖ≥Á≥ª</span>\n                <span class=\"text-card-content\">{{ statusData.ÂÖ≥Á≥ª || 'ÊöÇÊó†' }}</span>\n              </div>\n              <div class=\"text-card-row\">\n                <span class=\"text-card-label\">ÂøÉÊÉÖ</span>\n                <span class=\"text-card-content\">{{ statusData.ÂøÉÊÉÖ || 'ÊöÇÊó†' }}</span>\n              </div>\n              <div class=\"text-card-row\">\n                <span class=\"text-card-label\">ÂêêÊßΩ</span>\n                <span class=\"text-card-content\">{{ statusData.ÂêêÊßΩ || 'ÊöÇÊó†' }}</span>\n              </div>\n              <div class=\"text-card-row\">\n                <span class=\"text-card-label\">ÂæÖÂäû</span>\n                <span class=\"text-card-content\">{{ statusData.ÂæÖÂäû || 'ÊöÇÊó†' }}</span>\n              </div>\n            </div>\n          </div>\n\n          <!-- Â∞èÂâßÂú∫Ê†áÁ≠æÈ°µ -->\n          <div v-if=\"activeTab === 'theater'\" class=\"animate-in fade-in space-y-4 duration-200\">\n            <div class=\"theater-title\">üåø ¬∑ Â∞èÂâßÂú∫ ¬∑ üåø</div>\n            <div\n              ref=\"theaterContainer\"\n              class=\"theater-bubbles-container overflow-y-auto max-h-[calc(85vh-200px)]\"\n            ></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport _ from 'lodash';\nimport { nextTick, onMounted, ref, watch } from 'vue';\nimport type { StatusBlockData } from '../lib/messageParser';\n\ninterface Props {\n  show: boolean;\n  messageId?: number;\n  statusBlock?: StatusBlockData;\n  onClose: () => void;\n}\n\nconst props = defineProps<Props>();\n\nconst activeTab = ref<'status' | 'theater'>('status');\nconst theaterExpanded = ref(false);\nconst theaterContainer = ref<HTMLDivElement | null>(null);\nconst theaterRendered = ref(false);\nconst isLoading = ref(false);\n\n// TabÂàóË°®\nconst tabs: Array<{ id: 'status' | 'theater'; name: string }> = [\n  { id: 'status', name: 'ËßíËâ≤Â±ûÊÄß' },\n  { id: 'theater', name: 'Â∞èÂâßÂú∫' },\n] as const;\n\n// Áä∂ÊÄÅÊï∞ÊçÆ\nconst statusData = ref<StatusBlockData & { Êó∂Èó¥?: string; [key: string]: any }>({\n  Âú∞ÁÇπ: '',\n  ÂÖ≥Á≥ª: '',\n  ÂøÉÊÉÖ: '',\n  ÂêêÊßΩ: '',\n  ÂæÖÂäû: '',\n  Â∞èÂâßÂú∫: '',\n});\n\n// Êï∞ÂÄºÂ±ûÊÄßÔºà‰ªéMVU‰∏≠ÊèêÂèñÔºâ\nconst statusValues = ref<Record<string, string | number>>({});\n\n// MVU Â∑•ÂÖ∑ÂáΩÊï∞ÔºöÁ≠âÂæÖÂàùÂßãÂåñÂπ∂Ëé∑ÂèñÊï∞ÊçÆ\nasync function getMvuStatData(): Promise<any | null> {\n  try {\n    // Á≠âÂæÖMVUÂàùÂßãÂåñ\n    if (typeof window !== 'undefined' && (window as any).waitGlobalInitialized) {\n      await (window as any).waitGlobalInitialized('Mvu');\n    }\n\n    // Ëé∑ÂèñMVUÊï∞ÊçÆ\n    if (typeof window !== 'undefined' && (window as any).Mvu) {\n      const mvuData = (window as any).Mvu.getMvuData({\n        type: 'message',\n        message_id: props.messageId || 'latest',\n      });\n\n      if (mvuData?.stat_data) {\n        return mvuData.stat_data;\n      }\n    }\n  } catch (error) {\n    console.warn('Ëé∑ÂèñMVUÊï∞ÊçÆÂ§±Ë¥•:', error);\n  }\n  return null;\n}\n\n// ‰ªéMVUÂèòÈáèËé∑ÂèñÁä∂ÊÄÅÊï∞ÊçÆ\nasync function loadStatusFromMvu(): Promise<boolean> {\n  const statData = await getMvuStatData();\n  if (!statData) return false;\n\n  // ÊâπÈáèÊõ¥Êñ∞Áä∂ÊÄÅÊï∞ÊçÆ\n  const fields = ['Êó∂Èó¥', 'Âú∞ÁÇπ', 'ÂÖ≥Á≥ª', 'ÂøÉÊÉÖ', 'ÂêêÊßΩ', 'ÂæÖÂäû', 'Â∞èÂâßÂú∫'] as const;\n  fields.forEach(field => {\n    const value = _.get(statData, field);\n    if (value !== undefined) {\n      statusData.value[field] = String(value);\n    }\n  });\n\n  return true;\n}\n\n// ‰ªéStatusBlockËß£ÊûêÁä∂ÊÄÅÊï∞ÊçÆ\nfunction loadStatusFromBlock() {\n  if (props.statusBlock) {\n    statusData.value = {\n      ...statusData.value,\n      ...props.statusBlock,\n    };\n  }\n}\n\n// ‰ªéMVUÊï∞ÊçÆ‰∏≠ÊèêÂèñÊï∞ÂÄºÂ±ûÊÄß\nasync function extractStatusValues() {\n  const statData = await getMvuStatData();\n  if (!statData) return;\n\n  // Â∞ùËØï‰ªéstat_data.ËßíËâ≤.ËßíËâ≤Âêç‰∏≠Ëé∑ÂèñÂ±ûÊÄß\n  if (statData.ËßíËâ≤ && typeof statData.ËßíËâ≤ === 'object') {\n    const newValues: Record<string, string | number> = {};\n\n    // ÈÅçÂéÜËßíËâ≤ÂØπË±°ÔºåÊèêÂèñÊï∞ÂÄºÂ±ûÊÄß\n    Object.keys(statData.ËßíËâ≤).forEach(characterName => {\n      const characterData = statData.ËßíËâ≤[characterName];\n      if (characterData && typeof characterData === 'object') {\n        // ÊèêÂèñÊï∞ÂÄºÂ±ûÊÄßÔºàÂ¶Ç‰∫≤ÊÉÖ„ÄÅÁà±Ê¨≤„ÄÅÂéåÊÅ∂„ÄÅËá™ÊàëÁ≠âÔºâ\n        Object.keys(characterData).forEach(attrName => {\n          const attrValue = characterData[attrName];\n          if (typeof attrValue === 'number' || (typeof attrValue === 'string' && !isNaN(Number(attrValue)))) {\n            newValues[attrName] = attrValue;\n          }\n        });\n      }\n    });\n\n    statusValues.value = newValues;\n  }\n}\n\n// ÂàáÊç¢Â∞èÂâßÂú∫Â±ïÂºÄ/Êî∂Ëµ∑\nfunction toggleTheater() {\n  theaterExpanded.value = !theaterExpanded.value;\n  if (theaterExpanded.value) {\n    // ‰ΩøÁî®nextTickÁ°Æ‰øùDOMÂ∑≤Êõ¥Êñ∞\n    nextTick(() => {\n      if (!theaterRendered.value) {\n        renderTheater();\n      }\n    });\n  }\n}\n\n// ÁõëÂê¨Ê†áÁ≠æÈ°µÂàáÊç¢ÔºåÂàáÊç¢Âà∞Â∞èÂâßÂú∫Êó∂Ëá™Âä®Â±ïÂºÄ\nwatch(\n  activeTab,\n  newTab => {\n    if (newTab === 'theater') {\n      // ÂàáÊç¢Âà∞Â∞èÂâßÂú∫Ê†áÁ≠æÈ°µÊó∂ÔºåËá™Âä®Â±ïÂºÄÂπ∂Ê∏≤Êüì\n      theaterExpanded.value = true;\n      nextTick(() => {\n        renderTheater();\n      });\n    }\n  },\n  { immediate: true },\n);\n\n// Ê∏≤ÊüìÂ∞èÂâßÂú∫\nfunction renderTheater() {\n  if (!theaterContainer.value || !statusData.value.Â∞èÂâßÂú∫) {\n    return;\n  }\n\n  const rawText = statusData.value.Â∞èÂâßÂú∫;\n  const container = theaterContainer.value;\n\n  // Ê∏ÖÁ©∫ÂÆπÂô®\n  container.innerHTML = '';\n\n  // ÂåπÈÖç „ÄêÂèëË®Ä‰∫∫ÔºàÂèØÂê´Êã¨Âè∑ÊèèËø∞Ôºâ: ÂÜÖÂÆπ„Äë ÔºåÊîØÊåÅ‰∏≠Ëã±ÊñáÂÜíÂè∑\n  const matches = [...rawText.matchAll(/„Äê([^Ôºö:]+)[Ôºö:](.*?)„Äë/g)];\n\n  if (matches.length === 0) {\n    // Â¶ÇÊûúÊ≤°ÊúâÂåπÈÖçÂà∞ÔºåÊòæÁ§∫ÊèêÁ§∫\n    const emptyMsg = document.createElement('div');\n    emptyMsg.textContent = 'ÊöÇÊó†Â∞èÂâßÂú∫ÂÜÖÂÆπ';\n    emptyMsg.style.textAlign = 'center';\n    emptyMsg.style.color = '#788a82';\n    emptyMsg.style.padding = '20px';\n    container.appendChild(emptyMsg);\n    theaterRendered.value = true;\n    return;\n  }\n\n  // Ëé∑ÂèñÂΩìÂâçËßíËâ≤ÂêçÔºàÁî®‰∫éÂà§Êñ≠‰∏ªËßÜËßíÔºâ\n  // ÂèØ‰ª•‰ªéÂΩìÂâçÂØπËØù‰∏≠Ëé∑ÂèñËßíËâ≤ÂêçÔºåËøôÈáåÂÖà‰ΩøÁî®Á¨¨‰∏Ä‰∏™ÂèëË®Ä‰∫∫ÊàñÂåÖÂê´\"‰Ω†\"/\"Êàë\"ÁöÑ‰Ωú‰∏∫‰∏ªËßÜËßí\n  const firstSpeaker = matches[0]?.[1]?.trim() || '';\n  const mainCharacterName = firstSpeaker.split('Ôºà')[0].split('(')[0]; // ÊèêÂèñËßíËâ≤ÂêçÔºàÂéªÈô§Êã¨Âè∑ÂÜÖÂÆπÔºâ\n\n  matches.forEach(match => {\n    const fullSpeaker = match[1]?.trim(); // ‰æãÔºöÁ®ãÂåóÊûÅÔºàÂÜÖÂøÉOSÔºâ\n    const content = match[2]?.trim();\n    if (!fullSpeaker || !content) return;\n\n    // Âà§Êñ≠ÊòØÂê¶‰∏∫Áî®Êà∑ËßíËâ≤\n    // Áî®Êà∑ËßíËâ≤Ôºö{{user}}„ÄÅuser„ÄÅ‰Ω† - ÊòæÁ§∫Âú®Âè≥Ëæπ\n    // ÂÖ∂‰ªñËßíËâ≤ÔºöÊòæÁ§∫Âú®Â∑¶Ëæπ\n    const speakerName = fullSpeaker.split('Ôºà')[0].split('(')[0].trim();\n    const isUser =\n      speakerName === '{{user}}' ||\n      speakerName.toLowerCase() === 'user' ||\n      speakerName === '‰Ω†' ||\n      fullSpeaker.includes('{{user}}') ||\n      fullSpeaker.toLowerCase().includes('user') ||\n      fullSpeaker.includes('‰Ω†');\n\n    const bubbleSide = isUser ? 'right' : 'left'; // Áî®Êà∑Âú®Âè≥ËæπÔºåÂÖ∂‰ªñËßíËâ≤Âú®Â∑¶Ëæπ\n\n    // ÂàõÂª∫Â§ñÂ±ÇÂÆπÂô®ÔºàÂê´ÂèëË®Ä‰∫∫ÂêçÔºâ\n    const bubbleWrapper = document.createElement('div');\n    bubbleWrapper.style.display = 'flex';\n    bubbleWrapper.style.flexDirection = 'column';\n    bubbleWrapper.style.marginBottom = '16px';\n    bubbleWrapper.style.alignItems = isUser ? 'flex-end' : 'flex-start';\n\n    // ÂèëË®Ä‰∫∫Ê†áÁ≠æÔºàÊ∞îÊ≥°‰∏äÊñπÂ∞èÂ≠óÔºâ\n    const speakerLabel = document.createElement('div');\n    speakerLabel.textContent = speakerName; // Âè™ÊòæÁ§∫ËßíËâ≤ÂêçÔºå‰∏çÂåÖÂê´Êã¨Âè∑ÂÜÖÂÆπ\n    speakerLabel.style.fontSize = '0.75em';\n    speakerLabel.style.color = '#788a82';\n    speakerLabel.style.marginBottom = '4px';\n    speakerLabel.style.padding = '0 8px';\n\n    // ÂØπËØùÊ∞îÊ≥°\n    const bubble = document.createElement('div');\n    bubble.classList.add('bubble', bubbleSide);\n    bubble.textContent = content;\n\n    // ÁªÑÂêà\n    bubbleWrapper.appendChild(speakerLabel);\n    bubbleWrapper.appendChild(bubble);\n    container.appendChild(bubbleWrapper);\n  });\n\n  theaterRendered.value = true;\n}\n\n// Âä†ËΩΩÁä∂ÊÄÅÊï∞ÊçÆ\nasync function loadStatusData() {\n  if (isLoading.value) return;\n  isLoading.value = true;\n\n  try {\n    // ÈáçÁΩÆÁä∂ÊÄÅ\n    statusValues.value = {};\n    theaterRendered.value = false;\n\n    // ‰ºòÂÖà‰ªéMVUËé∑Âèñ\n    const mvuLoaded = await loadStatusFromMvu();\n\n    // ÊèêÂèñÊï∞ÂÄºÂ±ûÊÄßÔºàÂ§çÁî®Â∑≤Ëé∑ÂèñÁöÑMVUÊï∞ÊçÆÔºâ\n    await extractStatusValues();\n\n    // Â¶ÇÊûúMVUÊ≤°ÊúâÊï∞ÊçÆÔºåÂàô‰ªéStatusBlockËß£Êûê\n    if (!mvuLoaded) {\n      loadStatusFromBlock();\n    }\n  } finally {\n    isLoading.value = false;\n  }\n}\n\n// ÁõëÂê¨propsÂèòÂåñ\nwatch(\n  () => [props.show, props.messageId, props.statusBlock],\n  () => {\n    if (props.show) {\n      loadStatusData();\n    }\n  },\n  { immediate: true },\n);\n\nonMounted(() => {\n  if (props.show) {\n    loadStatusData();\n  }\n});\n</script>\n\n<style scoped>\n/* ÁßªÈô§ÊóßÁöÑÊ†∑ÂºèÔºå‰ΩøÁî®Tailwind CSSÁ±ª */\n\n.status-info-bar {\n  display: flex;\n  justify-content: space-between;\n  background: rgba(224, 242, 233, 0.8);\n  padding: 10px 15px;\n  border-radius: 10px;\n  color: #5a6e65;\n}\n\n.info-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.status-values-grid {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 12px;\n}\n\n.value-card {\n  background: rgba(255, 255, 255, 0.85);\n  padding: 12px;\n  border-radius: 8px;\n  border: 1px solid #d1e5d9;\n  text-align: center;\n}\n\n.value-name {\n  font-weight: 600;\n  color: #5a6e65;\n}\n\n.value-number {\n  font-size: 1.5em;\n  color: #a8d8c3;\n  font-weight: bold;\n}\n\n.status-text-card {\n  background: rgba(255, 255, 255, 0.85);\n  padding: 15px;\n  border-radius: 10px;\n  border: 1px solid #d1e5d9;\n}\n\n.text-card-row {\n  margin-bottom: 8px;\n}\n\n.text-card-row:last-child {\n  margin-bottom: 0;\n}\n\n.text-card-label {\n  font-weight: 600;\n  color: #5a6e65;\n  margin-right: 8px;\n  display: inline-block;\n  background-color: rgba(224, 242, 233, 0.9);\n  padding: 2px 8px;\n  border-radius: 12px;\n}\n\n.text-card-content {\n  color: #788a82;\n  white-space: pre-wrap;\n}\n\n.theater-title {\n  text-align: center;\n  font-weight: 600;\n  color: #5a6e65;\n  padding-bottom: 10px;\n  border-bottom: 1px dashed #d1e5d9;\n  margin-bottom: 15px;\n  cursor: pointer;\n  transition: color 0.2s;\n}\n\n.theater-title:hover {\n  color: #a8d8c3;\n}\n\n.theater-bubbles-container {\n  display: flex;\n  flex-direction: column;\n  gap: 0;\n  padding: 0 5px;\n  overflow-y: auto;\n  /* ÈöêËóèÊªöÂä®Êù°‰ΩÜ‰øùÊåÅÊªöÂä®ÂäüËÉΩ */\n  scrollbar-width: none; /* Firefox */\n  -ms-overflow-style: none; /* IE and Edge */\n}\n\n.theater-bubbles-container::-webkit-scrollbar {\n  display: none; /* Chrome, Safari, Opera */\n}\n\n.bubble {\n  max-width: 80%;\n  padding: 10px 15px;\n  border-radius: 18px;\n  position: relative;\n  line-height: 1.5;\n  white-space: pre-wrap;\n}\n\n.bubble::before {\n  content: '';\n  position: absolute;\n  bottom: 0;\n  width: 0;\n  height: 0;\n  border: 10px solid transparent;\n}\n\n.bubble.left {\n  background-color: rgba(224, 242, 233, 0.9);\n  color: #5a6e65;\n  border-bottom-left-radius: 4px;\n  align-self: flex-start;\n}\n\n.bubble.left::before {\n  left: -10px;\n  border-right-color: rgba(224, 242, 233, 0.9);\n  border-left: 0;\n}\n\n.bubble.right {\n  background-color: rgba(255, 255, 255, 0.85);\n  color: #788a82;\n  border: 1px solid #d1e5d9;\n  border-bottom-right-radius: 4px;\n  align-self: flex-end;\n}\n\n.bubble.right::before {\n  right: -10px;\n  border-left-color: #d1e5d9;\n  border-right: 0;\n}\n\n.bubble.right::after {\n  content: '';\n  position: absolute;\n  bottom: 0;\n  right: -8px;\n  width: 0;\n  height: 0;\n  border: 10px solid transparent;\n  border-left-color: rgba(255, 255, 255, 0.85);\n  border-right: 0;\n}\n\n@media (max-width: 600px) {\n  .status-info-bar {\n    flex-direction: column;\n    gap: 8px;\n    align-items: flex-start;\n  }\n\n  .bubble {\n    max-width: 90%;\n  }\n}\n</style>\n","<template>\n  <div class=\"absolute bottom-0 left-0 right-0 z-20 px-4 md:px-8 pb-4 md:pb-6\">\n    <div class=\"flex items-center gap-2 md:gap-4 max-w-4xl mx-auto\">\n      <!-- Â§ñÁΩÆÂ∑¶ÁÆ≠Â§¥ -->\n      <button\n        v-if=\"!isInnerArrow\"\n        :disabled=\"isFirstDialogue\"\n        :class=\"[\n          'flex flex-shrink-0 items-center justify-center transition-all duration-200',\n          isFirstDialogue ? 'cursor-not-allowed opacity-40' : 'hover:scale-105',\n        ]\"\n        :style=\"outerArrowStyle\"\n        aria-label=\"‰∏ä‰∏ÄÊù°ÂØπËØù\"\n        @click.stop=\"handlePrev\"\n      >\n        <svg class=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 19l-7-7 7-7\" />\n        </svg>\n      </button>\n\n      <!-- ÂØπËØùÊ°Ü‰∏ª‰Ωì -->\n      <div class=\"flex-1 relative p-4 md:p-5 min-h-[120px]\" :style=\"boxStyle\">\n        <!-- ÂÜÖÁΩÆÂ∑¶ÁÆ≠Â§¥ -->\n        <div v-if=\"isInnerArrow\" class=\"absolute left-2 top-1/2 -translate-y-1/2 z-10\">\n          <button\n            :disabled=\"isFirstDialogue\"\n            :class=\"[\n              'flex items-center justify-center transition-all duration-200',\n              isFirstDialogue ? 'cursor-not-allowed opacity-40' : 'hover:bg-opacity-100',\n            ]\"\n            :style=\"innerLeftArrowStyle\"\n            aria-label=\"‰∏ä‰∏ÄÊù°ÂØπËØù\"\n            @click.stop=\"handlePrev\"\n          >\n            <svg class=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 19l-7-7 7-7\" />\n            </svg>\n          </button>\n        </div>\n\n        <!-- ËßíËâ≤ÂêçÂå∫Âüü -->\n        <div\n          class=\"h-6 mb-2 flex items-start\"\n          :style=\"{\n            paddingLeft: isInnerArrow ? '48px' : 0,\n            paddingRight: isInnerArrow ? '48px' : 0,\n          }\"\n        >\n          <div\n            v-if=\"!isNarration\"\n            class=\"px-3 py-1 text-sm font-medium\"\n            :style=\"{\n              backgroundColor: dialogStyle.colors.nameBackground,\n              color: dialogStyle.colors.nameText,\n              borderRadius: nameShape.borderRadius,\n              borderBottom: nameShape.style === 'underline' ? `2px solid ${dialogStyle.colors.nameText}` : undefined,\n              boxShadow: nameShape.style === 'floating' ? '0 2px 8px rgba(0,0,0,0.1)' : undefined,\n            }\"\n          >\n            {{ character }}\n          </div>\n          <!-- ÁºñËæë/Âà†Èô§ÊåâÈíÆÔºà‰ªÖuserÊ∂àÊÅØÊòæÁ§∫Ôºâ -->\n          <div v-if=\"props.isEditable && props.messageId !== undefined\" class=\"ml-auto flex gap-2\">\n            <button\n              @click.stop=\"handleEdit\"\n              class=\"p-1 rounded transition-colors hover:bg-black/10\"\n              aria-label=\"ÁºñËæë\"\n              title=\"ÁºñËæëÊ∂àÊÅØ\"\n            >\n              <svg class=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                  stroke-width=\"2\"\n                  d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"\n                />\n              </svg>\n            </button>\n            <button\n              @click.stop=\"handleDelete\"\n              class=\"p-1 rounded transition-colors hover:bg-red-500/20\"\n              aria-label=\"Âà†Èô§\"\n              title=\"Âà†Èô§Ê∂àÊÅØ\"\n            >\n              <svg class=\"h-4 w-4 text-red-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                  stroke-width=\"2\"\n                  d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n                />\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        <!-- ÊñáÂ≠óÂÜÖÂÆπ -->\n        <div\n          :class=\"['leading-relaxed', isNarration ? 'italic text-center' : '']\"\n          :style=\"{\n            color: isNarration ? dialogStyle.colors.narrationText : dialogStyle.colors.dialogText,\n            fontSize: `${dialogStyle.fontSize}px`,\n            paddingLeft: isInnerArrow ? '48px' : 0,\n            paddingRight: isInnerArrow ? '48px' : 0,\n          }\"\n        >\n          <span v-html=\"formatTextWithThoughts(displayedText)\"></span>\n          <span v-if=\"isTyping\" class=\"animate-pulse ml-0.5\">|</span>\n        </div>\n\n        <!-- ÂëºÂê∏ÊåáÁ§∫Âô® -->\n        <div class=\"absolute bottom-3 right-4\">\n          <component :is=\"indicatorComponent\" />\n        </div>\n\n        <!-- ÂÜÖÁΩÆÂè≥ÁÆ≠Â§¥ -->\n        <div v-if=\"isInnerArrow\" class=\"absolute right-2 top-1/2 -translate-y-1/2 z-10\">\n          <button\n            :disabled=\"isLastDialogue\"\n            :class=\"[\n              'flex items-center justify-center transition-all duration-200',\n              isLastDialogue ? 'cursor-not-allowed opacity-40' : 'hover:bg-opacity-100',\n            ]\"\n            :style=\"innerRightArrowStyle\"\n            aria-label=\"‰∏ã‰∏ÄÊù°ÂØπËØù\"\n            @click.stop=\"handleNext\"\n          >\n            <svg class=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\" />\n            </svg>\n          </button>\n        </div>\n      </div>\n\n      <!-- Â§ñÁΩÆÂè≥ÁÆ≠Â§¥ -->\n      <button\n        v-if=\"!isInnerArrow\"\n        :disabled=\"isLastDialogue\"\n        :class=\"[\n          'flex flex-shrink-0 items-center justify-center transition-all duration-200',\n          isLastDialogue ? 'cursor-not-allowed opacity-40' : 'hover:scale-105',\n        ]\"\n        :style=\"outerArrowStyle\"\n        aria-label=\"‰∏ã‰∏ÄÊù°ÂØπËØù\"\n        @click.stop=\"handleNext\"\n      >\n        <svg class=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\" />\n        </svg>\n      </button>\n    </div>\n  </div>\n\n  <!-- ÁºñËæëÂØπËØùÊ°Ü -->\n  <div\n    v-if=\"showEditDialog\"\n    class=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\"\n    @click=\"cancelEdit\"\n  >\n    <div\n      class=\"bg-card rounded-lg p-6 shadow-xl max-w-md w-full mx-4\"\n      @click.stop\n      :style=\"{\n        backgroundColor: dialogStyle.colors.boxBackground,\n        borderColor: dialogStyle.colors.boxBorder,\n        borderWidth: '1px',\n        borderStyle: 'solid',\n      }\"\n    >\n      <h3 class=\"text-lg font-semibold mb-4\" :style=\"{ color: dialogStyle.colors.dialogText }\">ÁºñËæëÊ∂àÊÅØ</h3>\n      <textarea\n        v-model=\"editText\"\n        class=\"w-full p-3 rounded border resize-none focus:outline-none focus:ring-2\"\n        :style=\"{\n          backgroundColor: dialogStyle.colors.boxBackground,\n          borderColor: dialogStyle.colors.boxBorder,\n          color: dialogStyle.colors.dialogText,\n        }\"\n        rows=\"4\"\n        placeholder=\"ËæìÂÖ•Ê∂àÊÅØÂÜÖÂÆπ...\"\n      ></textarea>\n      <div class=\"flex gap-3 mt-4 justify-end\">\n        <button\n          @click=\"cancelEdit\"\n          class=\"px-4 py-2 rounded transition-colors\"\n          :style=\"{\n            backgroundColor: dialogStyle.colors.boxBorder + '40',\n            color: dialogStyle.colors.dialogText,\n          }\"\n        >\n          ÂèñÊ∂à\n        </button>\n        <button\n          @click=\"confirmEdit\"\n          class=\"px-4 py-2 rounded transition-colors\"\n          :style=\"{\n            backgroundColor: dialogStyle.colors.nameBackground,\n            color: dialogStyle.colors.nameText,\n          }\"\n        >\n          Á°ÆËÆ§\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, h, onMounted, onUnmounted, ref, VNode, watch } from 'vue';\nimport {\n  type DialogBoxStyle,\n  arrowShapePresets,\n  backgroundPatternPresets,\n  borderWidthPresets,\n  boxShapePresets,\n  defaultDialogStyle,\n  indicatorShapePresets,\n  nameShapePresets,\n} from '../types/galgame';\n\ninterface Props {\n  character: string;\n  text: string;\n  isLastDialogue: boolean;\n  isFirstDialogue: boolean;\n  onPrev: () => void;\n  onNext: () => void;\n  dialogKey: number;\n  customStyle?: DialogBoxStyle;\n  isLoading?: boolean;\n  streamingText?: string;\n  isThrough?: boolean;\n  isEditable?: boolean;\n  messageId?: number;\n  onEdit?: (messageId: number, newText: string) => void;\n  onDelete?: (messageId: number) => void;\n}\n\nconst props = defineProps<Props>();\n\nconst displayedText = ref('');\nconst isTyping = ref(true);\nlet typingTimer: ReturnType<typeof setInterval> | null = null;\n\nconst TYPING_SPEED = 50;\n\nconst dialogStyle = computed(() => props.customStyle || defaultDialogStyle);\nconst boxShape = computed(() => boxShapePresets.find(p => p.id === dialogStyle.value.boxShape) || boxShapePresets[0]);\nconst nameShape = computed(\n  () => nameShapePresets.find(p => p.id === dialogStyle.value.nameShape) || nameShapePresets[0],\n);\nconst arrowShape = computed(\n  () => arrowShapePresets.find(p => p.id === dialogStyle.value.arrowShape) || arrowShapePresets[0],\n);\nconst indicatorShape = computed(\n  () => indicatorShapePresets.find(p => p.id === dialogStyle.value.indicatorShape) || indicatorShapePresets[0],\n);\nconst borderWidth = computed(\n  () => borderWidthPresets.find(p => p.id === dialogStyle.value.borderWidth) || borderWidthPresets[1],\n);\nconst bgPattern = computed(() => backgroundPatternPresets.find(p => p.id === dialogStyle.value.backgroundPattern));\n\nconst isNarration = computed(() => !props.character || props.character.trim() === '');\nconst isInnerArrow = computed(() => arrowShape.value.isInner);\nconst isMinimalArrow = computed(() => arrowShape.value.type === 'minimal');\nconst isPillShape = computed(() => dialogStyle.value.boxShape === 'pill');\n\n// ËÉåÊôØÂõæÊ°àÊ†∑Âºè\nconst getPatternStyle = computed((): Record<string, string> => {\n  if (!bgPattern.value?.pattern) return {};\n\n  const borderColorForPattern = dialogStyle.value.colors.boxBorder.replace(/[\\d.]+\\)$/, '0.08)');\n  const patternWithColor = bgPattern.value.pattern.replace(/VAR_BORDER_COLOR/g, borderColorForPattern);\n\n  let backgroundSize = '20px 20px';\n  if (bgPattern.value.id === 'dots') backgroundSize = '16px 16px';\n  if (bgPattern.value.id === 'diamonds') backgroundSize = '16px 16px';\n  if (bgPattern.value.id === 'stripes') backgroundSize = '28px 28px';\n\n  return {\n    backgroundImage: patternWithColor,\n    backgroundSize,\n  };\n});\n\nconst boxStyle = computed((): Record<string, string> => {\n  const style: Record<string, string> = {\n    backgroundColor: isPillShape.value ? 'rgba(255, 255, 255, 0.7)' : dialogStyle.value.colors.boxBackground,\n    borderRadius: boxShape.value.borderRadius,\n    borderTopWidth: borderWidth.value.width,\n    borderLeftWidth: borderWidth.value.width,\n    borderRightWidth: borderWidth.value.width,\n    borderBottomWidth: borderWidth.value.width,\n    borderStyle: 'solid',\n    borderColor: dialogStyle.value.colors.boxBorder,\n    boxShadow: boxShape.value.shadow,\n    ...(isPillShape.value ? { backdropFilter: 'blur(12px)', WebkitBackdropFilter: 'blur(12px)' } : {}),\n    ...getPatternStyle.value,\n  };\n  return style;\n});\n\nconst outerArrowStyle = computed(() => {\n  const isDisabled = props.isFirstDialogue || props.isLastDialogue;\n  const iconColor = isDisabled ? `${dialogStyle.value.colors.arrowIcon}66` : dialogStyle.value.colors.arrowIcon;\n\n  if (isMinimalArrow.value) {\n    return {\n      color: iconColor,\n    };\n  }\n\n  const bgColor = dialogStyle.value.colors.arrowBackground;\n  let borderRadius = '9999px';\n  if (arrowShape.value.type === 'square' || arrowShape.value.type === 'inner-square') borderRadius = '6px';\n  if (arrowShape.value.type === 'pill') borderRadius = '16px';\n\n  return {\n    backgroundColor: bgColor,\n    borderRadius,\n    color: iconColor,\n  };\n});\n\nconst innerLeftArrowStyle = computed(() => {\n  const isDisabled = props.isFirstDialogue;\n  const iconColor = isDisabled ? `${dialogStyle.value.colors.arrowIcon}66` : dialogStyle.value.colors.arrowIcon;\n  const isRound = arrowShape.value.type === 'inner-round';\n  return {\n    background: isRound ? dialogStyle.value.colors.arrowBackground : 'transparent',\n    color: iconColor,\n  };\n});\n\nconst innerRightArrowStyle = computed(() => {\n  const isDisabled = props.isLastDialogue;\n  const iconColor = isDisabled ? `${dialogStyle.value.colors.arrowIcon}66` : dialogStyle.value.colors.arrowIcon;\n  const isRound = arrowShape.value.type === 'inner-round';\n  return {\n    background: isRound ? dialogStyle.value.colors.arrowBackground : 'transparent',\n    color: iconColor,\n  };\n});\n\n// ÊåáÁ§∫Âô®ÁªÑ‰ª∂\nconst indicatorComponent = computed((): VNode | null => {\n  const { type } = indicatorShape.value;\n  const { indicatorColor } = dialogStyle.value.colors;\n\n  if (type === 'none') return null;\n\n  // Âè™Âú®ÊµÅÂºèÂä†ËΩΩÊó∂ÊòæÁ§∫Âä®Áîª\n  const isStreaming = props.isLoading || false;\n\n  if (type === 'dots') {\n    return h(\n      'div',\n      { class: 'flex gap-1 items-center' },\n      [0, 1, 2].map(i =>\n        h('span', {\n          key: i,\n          class: 'w-1.5 h-1.5 rounded-full transition-opacity duration-500',\n          style: {\n            backgroundColor: indicatorColor,\n            opacity: isStreaming ? (i === 2 ? 1 : 0.4) : 0.6,\n            animation: isStreaming && i === 2 ? 'pulse 1s ease-in-out infinite' : undefined,\n          },\n        }),\n      ),\n    );\n  }\n\n  if (type === 'diamonds') {\n    return h(\n      'div',\n      { class: 'flex gap-1 items-center' },\n      [0, 1, 2].map(i =>\n        h('span', {\n          key: i,\n          class: 'transition-all duration-300',\n          style: {\n            width: '8px',\n            height: '8px',\n            backgroundColor: indicatorColor,\n            opacity: isStreaming ? (i === 2 ? 1 : 0.3 + i * 0.15) : 0.5,\n            transform: `rotate(45deg) scale(${isStreaming && i === 2 ? 1.1 : 0.9})`,\n            animation: isStreaming && i === 2 ? 'diamondPulse 1.2s ease-in-out infinite' : undefined,\n            display: 'inline-block',\n          },\n        }),\n      ),\n    );\n  }\n\n  if (type === 'pulse') {\n    return h('div', { class: 'relative w-3 h-3' }, [\n      h('span', {\n        class: 'absolute inset-0 rounded-full',\n        style: {\n          backgroundColor: indicatorColor,\n          opacity: 0.4,\n          animation: isStreaming ? 'ping 1.5s cubic-bezier(0, 0, 0.2, 1) infinite' : undefined,\n        },\n      }),\n      h('span', {\n        class: 'absolute inset-0 rounded-full',\n        style: {\n          backgroundColor: indicatorColor,\n          animation: isStreaming ? 'pulse 2s ease-in-out infinite' : undefined,\n        },\n      }),\n    ]);\n  }\n\n  if (type === 'arrow') {\n    return h(\n      'svg',\n      {\n        class: 'w-4 h-4 transition-transform duration-300',\n        style: {\n          color: indicatorColor,\n          animation: isStreaming ? 'arrowBounce 0.8s ease-in-out infinite' : undefined,\n        },\n        fill: 'none',\n        stroke: 'currentColor',\n        viewBox: '0 0 24 24',\n      },\n      [\n        h('path', {\n          'stroke-linecap': 'round',\n          'stroke-linejoin': 'round',\n          'stroke-width': '2',\n          d: 'M9 5l7 7-7 7',\n        }),\n      ],\n    );\n  }\n\n  return null;\n});\n\nfunction handlePrev() {\n  if (!props.isFirstDialogue) {\n    props.onPrev();\n  }\n}\n\nfunction handleNext() {\n  if (!props.isLastDialogue) {\n    props.onNext();\n  }\n}\n\n// Ê†ºÂºèÂåñÊñáÊú¨ÔºåÂ§ÑÁêÜ *ÊòüÂè∑ÂåÖË£π* ÁöÑÂÜÖÂøÉÊÉ≥Ê≥ï\nfunction formatTextWithThoughts(text: string): string {\n  if (!text) return '';\n\n  // Â∞Ü *ÊòüÂè∑ÂåÖË£π* ÁöÑÂÜÖÂÆπËΩ¨Êç¢‰∏∫Êñú‰ΩìÁÅ∞Ëâ≤ÔºàÂÜÖÂøÉÊÉ≥Ê≥ïÔºâÔºåÂ∑¶Âè≥Á®çÂæÆÁ©∫Âá∫Êù•‰∏ÄÁÇπ\n  // ÂåπÈÖç *ÂÜÖÂÆπ* Ê†ºÂºèÔºàÊéíÈô§ *through* Ê†áËÆ∞Ôºâ\n  return text.replace(/\\*([^*]+)\\*/g, (match, content) => {\n    // Â¶ÇÊûúÊòØ *through* Ê†áËÆ∞ÔºåË∑≥Ëøá\n    if (content.trim() === 'through') return match;\n    // ËΩ¨Êç¢‰∏∫ÂÜÖÂøÉÊÉ≥Ê≥ïÊ†ºÂºèÔºàÊñú‰ΩìÁÅ∞Ëâ≤ÔºåÂ∑¶Âè≥ÁïôÁ©∫Ôºâ\n    return ` <span style=\"color: #9ca3af; font-style: italic;\">${content}</span> `;\n  });\n}\n\nfunction clearTypingTimer() {\n  if (typingTimer) {\n    clearInterval(typingTimer);\n    typingTimer = null;\n  }\n}\n\nfunction startTyping() {\n  clearTypingTimer();\n\n  if (props.isLoading) {\n    displayedText.value = props.text;\n    isTyping.value = true;\n    return;\n  }\n\n  if (!props.text) {\n    displayedText.value = '';\n    isTyping.value = false;\n    return;\n  }\n\n  displayedText.value = '';\n  isTyping.value = true;\n\n  let index = 0;\n  typingTimer = setInterval(() => {\n    if (index < props.text.length) {\n      displayedText.value = props.text.slice(0, index + 1);\n      index++;\n    } else {\n      isTyping.value = false;\n      clearTypingTimer();\n    }\n  }, TYPING_SPEED);\n}\n\nwatch(\n  () => [props.text, props.dialogKey, props.isLoading],\n  () => {\n    startTyping();\n  },\n  { immediate: true },\n);\n\nonMounted(() => {\n  startTyping();\n});\n\nonUnmounted(() => {\n  clearTypingTimer();\n});\n\n// ÁºñËæë/Âà†Èô§ÂäüËÉΩ\nconst showEditDialog = ref(false);\nconst editText = ref('');\n\nfunction handleEdit() {\n  if (props.messageId === undefined) return;\n  editText.value = props.text;\n  showEditDialog.value = true;\n}\n\nfunction handleDelete() {\n  if (props.messageId === undefined || !props.onDelete) return;\n  if (confirm('Á°ÆÂÆöË¶ÅÂà†Èô§ËøôÊù°Ê∂àÊÅØÂêóÔºü')) {\n    props.onDelete(props.messageId);\n  }\n}\n\nfunction confirmEdit() {\n  if (props.messageId === undefined || !props.onEdit) return;\n  if (editText.value.trim()) {\n    props.onEdit(props.messageId, editText.value.trim());\n    showEditDialog.value = false;\n  }\n}\n\nfunction cancelEdit() {\n  showEditDialog.value = false;\n  editText.value = '';\n}\n</script>\n\n<style scoped>\n@keyframes pulse {\n  0%,\n  100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.5;\n  }\n}\n\n@keyframes diamondPulse {\n  0%,\n  100% {\n    opacity: 1;\n    transform: rotate(45deg) scale(1);\n  }\n  50% {\n    opacity: 0.6;\n    transform: rotate(45deg) scale(0.8);\n  }\n}\n\n@keyframes ping {\n  75%,\n  100% {\n    transform: scale(2);\n    opacity: 0;\n  }\n}\n\n@keyframes arrowBounce {\n  0%,\n  100% {\n    transform: translateX(0);\n  }\n  50% {\n    transform: translateX(3px);\n  }\n}\n</style>\n","<template>\n  <div class=\"space-y-1.5\">\n    <div class=\"flex items-center justify-between\">\n      <label class=\"text-muted-foreground text-xs\">{{ label }}</label>\n      <div class=\"flex items-center gap-2\">\n        <input\n          v-model=\"hexInput\"\n          type=\"text\"\n          class=\"bg-background text-foreground w-20 rounded border px-2 py-0.5 font-mono text-xs\"\n          placeholder=\"#000000\"\n          @input=\"handleHexInput\"\n          @blur=\"handleHexBlur\"\n        />\n        <div class=\"border-border h-6 w-6 rounded border shadow-sm\" :style=\"{ backgroundColor: value }\" />\n      </div>\n    </div>\n\n    <div v-for=\"slider in sliders\" :key=\"slider.key\" class=\"flex items-center gap-2\">\n      <span class=\"text-muted-foreground w-5 text-[10px]\">{{ slider.label }}</span>\n      <div\n        :ref=\"el => (trackRefs[slider.key] = el as HTMLDivElement | null)\"\n        class=\"relative flex h-6 flex-1 cursor-pointer touch-none items-center\"\n        @pointerdown=\"e => handlePointerDown(e, slider)\"\n        @pointermove=\"e => handlePointerMove(e, slider)\"\n        @pointerup=\"e => handlePointerUp(e, slider)\"\n      >\n        <div class=\"absolute inset-y-2 right-0 left-0 rounded-full\" :style=\"{ background: slider.gradient }\" />\n        <div\n          class=\"pointer-events-none absolute top-1/2 h-4 w-4 -translate-y-1/2 rounded-full border-2 border-white shadow-md\"\n          :style=\"{\n            left: `calc(${((slider.currentValue - slider.min) / (slider.max - slider.min)) * 100}% - 8px)`,\n            background: slider.thumbColor,\n          }\"\n        />\n      </div>\n      <span class=\"text-muted-foreground w-9 text-right text-[10px]\">{{ slider.displayValue }}</span>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref, watch } from 'vue';\n\ninterface Props {\n  label: string;\n  value: string;\n  showAlpha?: boolean;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  showAlpha: true,\n});\n\nconst emit = defineEmits<{\n  'update:value': [value: string];\n}>();\n\n// HSL ËΩ¨Êç¢ÂáΩÊï∞\nfunction hexToHsl(hex: string): { h: number; s: number; l: number; a: number } {\n  let r = 0,\n    g = 0,\n    b = 0,\n    a = 1;\n\n  if (hex.startsWith('rgba')) {\n    const match = hex.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*([\\d.]+))?\\)/);\n    if (match) {\n      r = Number.parseInt(match[1]) / 255;\n      g = Number.parseInt(match[2]) / 255;\n      b = Number.parseInt(match[3]) / 255;\n      a = match[4] ? Number.parseFloat(match[4]) : 1;\n    }\n  } else if (hex.startsWith('rgb')) {\n    const match = hex.match(/rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/);\n    if (match) {\n      r = Number.parseInt(match[1]) / 255;\n      g = Number.parseInt(match[2]) / 255;\n      b = Number.parseInt(match[3]) / 255;\n    }\n  } else if (hex.startsWith('#')) {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})?$/i.exec(hex);\n    if (result) {\n      r = Number.parseInt(result[1], 16) / 255;\n      g = Number.parseInt(result[2], 16) / 255;\n      b = Number.parseInt(result[3], 16) / 255;\n      a = result[4] ? Number.parseInt(result[4], 16) / 255 : 1;\n    }\n  }\n\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  let h = 0;\n  let s = 0;\n  const l = (max + min) / 2;\n\n  if (max !== min) {\n    const d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    switch (max) {\n      case r:\n        h = ((g - b) / d + (g < b ? 6 : 0)) / 6;\n        break;\n      case g:\n        h = ((b - r) / d + 2) / 6;\n        break;\n      case b:\n        h = ((r - g) / d + 4) / 6;\n        break;\n    }\n  }\n\n  return { h: Math.round(h * 360), s: Math.round(s * 100), l: Math.round(l * 100), a };\n}\n\nfunction hslToRgba(h: number, s: number, l: number, a: number): string {\n  s /= 100;\n  l /= 100;\n  const k = (n: number) => (n + h / 30) % 12;\n  const f = (n: number) => l - s * Math.min(l, 1 - l) * Math.max(-1, Math.min(k(n) - 3, Math.min(9 - k(n), 1)));\n  const r = Math.round(255 * f(0));\n  const g = Math.round(255 * f(8));\n  const b = Math.round(255 * f(4));\n  return a < 1\n    ? `rgba(${r}, ${g}, ${b}, ${a.toFixed(2)})`\n    : `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\n}\n\nfunction rgbaToHex(rgba: string): string {\n  if (rgba.startsWith('#')) return rgba.slice(0, 7).toUpperCase();\n  const match = rgba.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)/);\n  if (match) {\n    const r = Number.parseInt(match[1]).toString(16).padStart(2, '0');\n    const g = Number.parseInt(match[2]).toString(16).padStart(2, '0');\n    const b = Number.parseInt(match[3]).toString(16).padStart(2, '0');\n    return `#${r}${g}${b}`.toUpperCase();\n  }\n  return '#000000';\n}\n\nconst hsl = computed(() => hexToHsl(props.value));\nconst hexDisplay = computed(() => rgbaToHex(props.value));\nconst hexInput = ref(hexDisplay.value);\nconst localHsl = ref(hsl.value);\nconst isDraggingRef = ref(false);\nconst trackRefs: Record<string, HTMLDivElement | null> = {};\nconst draggingSlider = ref<string | null>(null);\nconst globalMoveHandler = ref<((e: PointerEvent) => void) | null>(null);\nconst globalUpHandler = ref<(() => void) | null>(null);\n\n// ÂΩìÂ§ñÈÉ®ÂÄºÂèòÂåñ‰∏î‰∏çÂú®ÊãñÂä®Êó∂ÔºåËá™Âä®ÂêåÊ≠•ÊªëÂùó‰ΩçÁΩÆ\nwatch(\n  () => props.value,\n  () => {\n    if (!isDraggingRef.value) {\n      const newHsl = hexToHsl(props.value);\n      localHsl.value = newHsl;\n      hexInput.value = hexDisplay.value;\n    }\n  },\n);\n\nconst sliders = computed(() => {\n  const result = [\n    {\n      key: 'h',\n      label: 'H',\n      min: 0,\n      max: 360,\n      currentValue: localHsl.value.h,\n      gradient: 'linear-gradient(to right, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000)',\n      step: 1,\n      thumbColor: `hsl(${localHsl.value.h}, 100%, 50%)`,\n      displayValue: `${Math.round(localHsl.value.h)}¬∞`,\n    },\n    {\n      key: 's',\n      label: 'S',\n      min: 0,\n      max: 100,\n      currentValue: localHsl.value.s,\n      gradient: `linear-gradient(to right, hsl(${localHsl.value.h}, 0%, ${localHsl.value.l}%), hsl(${localHsl.value.h}, 100%, ${localHsl.value.l}%))`,\n      step: 1,\n      thumbColor: hslToRgba(localHsl.value.h, localHsl.value.s, localHsl.value.l, 1),\n      displayValue: `${Math.round(localHsl.value.s)}%`,\n    },\n    {\n      key: 'l',\n      label: 'L',\n      min: 0,\n      max: 100,\n      currentValue: localHsl.value.l,\n      gradient: `linear-gradient(to right, #000, hsl(${localHsl.value.h}, ${localHsl.value.s}%, 50%), #fff)`,\n      step: 1,\n      thumbColor: hslToRgba(localHsl.value.h, localHsl.value.s, localHsl.value.l, 1),\n      displayValue: `${Math.round(localHsl.value.l)}%`,\n    },\n  ];\n\n  if (props.showAlpha) {\n    result.push({\n      key: 'a',\n      label: 'A',\n      min: 0,\n      max: 1,\n      currentValue: localHsl.value.a,\n      gradient: `linear-gradient(to right, transparent, ${hslToRgba(localHsl.value.h, localHsl.value.s, localHsl.value.l, 1)})`,\n      step: 0.01,\n      thumbColor: hslToRgba(localHsl.value.h, localHsl.value.s, localHsl.value.l, localHsl.value.a),\n      displayValue: `${Math.round(localHsl.value.a * 100)}%`,\n    });\n  }\n\n  return result;\n});\n\n// Êõ¥Êñ∞Êú¨Âú∞HSLÂÄºÔºàÊãñÂä®Êó∂ÂÆûÊó∂Êõ¥Êñ∞È¢ÑËßàÔºå‰ΩÜ‰∏çÊèê‰∫§ÊúÄÁªàÂÄºÔºâ\nfunction updateLocalValue(e: PointerEvent, slider: (typeof sliders.value)[0]) {\n  const track = trackRefs[slider.key];\n  if (!track) return;\n  const rect = track.getBoundingClientRect();\n  const x = Math.max(0, Math.min(e.clientX - rect.left, rect.width));\n  const ratio = x / rect.width;\n  const val = slider.min + ratio * (slider.max - slider.min);\n  const finalVal = slider.step < 1 ? Math.round(val * 100) / 100 : Math.round(val);\n\n  // Êõ¥Êñ∞Êú¨Âú∞Áä∂ÊÄÅÔºàÂÆûÊó∂Êõ¥Êñ∞ÊªëÂùó‰ΩçÁΩÆÔºâ\n  localHsl.value = { ...localHsl.value, [slider.key]: finalVal };\n\n  // ÂÆûÊó∂Ëß¶ÂèëÈ¢ÑËßàÊõ¥Êñ∞ÔºàÊãñÂä®Êó∂ÂÆûÊó∂Êõ¥Êñ∞È¢ÑËßàÔºå‰ΩÜ‰∏çÊèê‰∫§ÊúÄÁªàÂÄºÔºâ\n  const newValue = hslToRgba(localHsl.value.h, localHsl.value.s, localHsl.value.l, localHsl.value.a);\n  emit('update:value', newValue);\n}\n\n// ÊúÄÁªàÊèê‰∫§ÂÄºÔºàÊãñÂä®ÁªìÊùüÊó∂Ôºâ\nfunction commitChange() {\n  if (isDraggingRef.value) {\n    // ÊúÄÁªàÊèê‰∫§ÂΩìÂâçÂÄºÔºàÁ°Æ‰øùÂÄºÂ∑≤ÂêåÊ≠•Ôºâ\n    const finalValue = hslToRgba(localHsl.value.h, localHsl.value.s, localHsl.value.l, localHsl.value.a);\n    emit('update:value', finalValue);\n    isDraggingRef.value = false;\n  }\n}\n\nfunction handlePointerDown(e: PointerEvent, slider: (typeof sliders.value)[0]) {\n  isDraggingRef.value = true;\n  draggingSlider.value = slider.key;\n\n  // ‰ΩøÁî® setPointerCapture Á°Æ‰øùÊãñÂä®Êó∂‰∏ç‰ºö‰∏¢Â§±ÁÑ¶ÁÇπ\n  (e.currentTarget as HTMLElement).setPointerCapture(e.pointerId);\n\n  // ÂàùÂßãÂåñÊõ¥Êñ∞\n  updateLocalValue(e, slider);\n\n  // Ê∑ªÂä†ÂÖ®Â±Ä‰∫ã‰ª∂ÁõëÂê¨‰ª•Á°Æ‰øùÊãñÂä®Êó∂ËÉΩÁªßÁª≠ÂìçÂ∫î\n  const handleGlobalMove = (ev: PointerEvent) => {\n    if (draggingSlider.value === slider.key && isDraggingRef.value) {\n      updateLocalValue(ev, slider);\n    }\n  };\n\n  const handleGlobalUp = () => {\n    if (draggingSlider.value === slider.key) {\n      commitChange();\n      draggingSlider.value = null;\n\n      // Ê∏ÖÁêÜ‰∫ã‰ª∂ÁõëÂê¨\n      if (globalMoveHandler.value) {\n        document.removeEventListener('pointermove', globalMoveHandler.value);\n      }\n      if (globalUpHandler.value) {\n        document.removeEventListener('pointerup', globalUpHandler.value);\n      }\n\n      // ÈáäÊîæÊåáÈíàÊçïËé∑\n      if (e.currentTarget instanceof HTMLElement) {\n        e.currentTarget.releasePointerCapture(e.pointerId);\n      }\n    }\n  };\n\n  globalMoveHandler.value = handleGlobalMove;\n  globalUpHandler.value = handleGlobalUp;\n\n  document.addEventListener('pointermove', handleGlobalMove);\n  document.addEventListener('pointerup', handleGlobalUp);\n}\n\nfunction handlePointerMove(e: PointerEvent, slider: (typeof sliders.value)[0]) {\n  if (draggingSlider.value === slider.key && isDraggingRef.value) {\n    updateLocalValue(e, slider);\n  }\n}\n\nfunction handlePointerUp(e: PointerEvent, slider: (typeof sliders.value)[0]) {\n  if (draggingSlider.value === slider.key) {\n    commitChange();\n    draggingSlider.value = null;\n\n    // ÈáäÊîæÊåáÈíàÊçïËé∑\n    if (e.currentTarget instanceof HTMLElement) {\n      e.currentTarget.releasePointerCapture(e.pointerId);\n    }\n  }\n}\n\nfunction handleHexInput(e: Event) {\n  const input = (e.target as HTMLInputElement).value.toUpperCase();\n  hexInput.value = input;\n  if (/^#[0-9A-F]{6}$/.test(input)) {\n    const newHsl = hexToHsl(input);\n    newHsl.a = localHsl.value.a;\n    localHsl.value = newHsl;\n    emit('update:value', hslToRgba(newHsl.h, newHsl.s, newHsl.l, newHsl.a));\n  }\n}\n\nfunction handleHexBlur() {\n  hexInput.value = rgbaToHex(props.value);\n}\n</script>\n\n<style scoped>\ninput[type='text'] {\n  font-family: monospace;\n}\n</style>\n","<template>\n  <div\n    class=\"absolute inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm animate-in fade-in duration-200\"\n  >\n    <div class=\"relative w-[90%] max-w-lg max-h-[85vh] bg-card rounded-xl shadow-2xl overflow-hidden\">\n      <!-- Â§¥ÈÉ® -->\n      <div class=\"flex items-center justify-between p-4 border-b border-border\">\n        <h2 class=\"text-lg font-semibold text-foreground\">ËÆæÁΩÆ</h2>\n        <button @click=\"onClose\" class=\"p-1 rounded-full hover:bg-muted transition-colors\" aria-label=\"ÂÖ≥Èó≠ËÆæÁΩÆ\">\n          <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n          </svg>\n        </button>\n      </div>\n\n      <!-- ÂÜÖÂÆπ -->\n      <div class=\"p-4 overflow-y-auto max-h-[calc(85vh-120px)]\">\n        <div class=\"space-y-6\">\n          <!-- Á´ãÁªòËÆæÁΩÆ -->\n          <div class=\"space-y-4\">\n            <h3 class=\"text-sm font-medium text-foreground\">Á´ãÁªòËÆæÁΩÆ</h3>\n            <div class=\"space-y-3\">\n              <div class=\"space-y-2\">\n                <label class=\"text-xs text-muted-foreground\"\n                  >Â§ßÂ∞è ({{ Math.round(spriteSettings.scale * 100) }}%)</label\n                >\n                <input\n                  type=\"range\"\n                  :value=\"spriteSettings.scale\"\n                  @input=\"\n                    e =>\n                      updateSpriteSettings({\n                        ...spriteSettings,\n                        scale: parseFloat((e.target as HTMLInputElement).value),\n                      })\n                  \"\n                  min=\"0.5\"\n                  max=\"1.5\"\n                  step=\"0.05\"\n                  class=\"w-full\"\n                />\n              </div>\n              <div class=\"space-y-2\">\n                <label class=\"text-xs text-muted-foreground\">Ê∞¥Âπ≥‰ΩçÁΩÆ ({{ spriteSettings.positionX }}%)</label>\n                <input\n                  type=\"range\"\n                  :value=\"spriteSettings.positionX\"\n                  @input=\"\n                    e =>\n                      updateSpriteSettings({\n                        ...spriteSettings,\n                        positionX: parseInt((e.target as HTMLInputElement).value),\n                      })\n                  \"\n                  min=\"0\"\n                  max=\"100\"\n                  step=\"1\"\n                  class=\"w-full\"\n                />\n              </div>\n              <div class=\"space-y-2\">\n                <label class=\"text-xs text-muted-foreground\">ÂûÇÁõ¥‰ΩçÁΩÆ ({{ spriteSettings.positionY }}%)</label>\n                <input\n                  type=\"range\"\n                  :value=\"spriteSettings.positionY\"\n                  @input=\"\n                    e =>\n                      updateSpriteSettings({\n                        ...spriteSettings,\n                        positionY: parseInt((e.target as HTMLInputElement).value),\n                      })\n                  \"\n                  min=\"0\"\n                  max=\"100\"\n                  step=\"1\"\n                  class=\"w-full\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <!-- Êí≠ÊîæËÆæÁΩÆ -->\n          <div class=\"space-y-4\">\n            <h3 class=\"text-sm font-medium text-foreground\">Êí≠ÊîæËÆæÁΩÆ</h3>\n            <div class=\"flex items-center justify-between\">\n              <label class=\"text-xs text-muted-foreground\">Ëá™Âä®Êí≠Êîæ</label>\n              <label class=\"relative inline-flex items-center cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  :checked=\"autoPlay\"\n                  @change=\"e => onAutoPlayChange((e.target as HTMLInputElement).checked)\"\n                  class=\"sr-only peer\"\n                />\n                <div\n                  class=\"w-8 h-[1.15rem] bg-input rounded-full peer peer-checked:bg-primary transition-colors relative\"\n                >\n                  <div\n                    class=\"absolute top-0 left-0 w-4 h-4 bg-background rounded-full transition-transform peer-checked:translate-x-[calc(100%-2px)]\"\n                  />\n                </div>\n              </label>\n            </div>\n            <div v-if=\"autoPlay\" class=\"space-y-2 animate-in fade-in duration-200\">\n              <label class=\"text-xs text-muted-foreground\">Êí≠ÊîæÈÄüÂ∫¶ ({{ autoPlaySpeed / 1000 }}Áßí)</label>\n              <input\n                type=\"range\"\n                :value=\"autoPlaySpeed\"\n                @input=\"e => onAutoPlaySpeedChange(parseInt((e.target as HTMLInputElement).value))\"\n                min=\"1000\"\n                max=\"8000\"\n                step=\"500\"\n                class=\"w-full\"\n              />\n            </div>\n          </div>\n\n          <!-- Ëá™ÂÆö‰πâÂØπËØùÊ°Ü -->\n          <div class=\"space-y-4\">\n            <div class=\"flex items-center justify-between\">\n              <h3 class=\"text-sm font-medium text-foreground\">Ëá™ÂÆö‰πâÂØπËØùÊ°Ü</h3>\n              <label class=\"relative inline-flex items-center cursor-pointer\">\n                <input\n                  type=\"checkbox\"\n                  :checked=\"customModeEnabled\"\n                  @change=\"e => handleEnableCustomMode((e.target as HTMLInputElement).checked)\"\n                  class=\"sr-only peer\"\n                />\n                <div\n                  class=\"w-8 h-[1.15rem] bg-input rounded-full peer peer-checked:bg-primary transition-colors relative\"\n                >\n                  <div\n                    class=\"absolute top-0 left-0 w-4 h-4 bg-background rounded-full transition-transform peer-checked:translate-x-[calc(100%-2px)]\"\n                  />\n                </div>\n              </label>\n            </div>\n\n            <div v-if=\"customModeEnabled\" class=\"space-y-4 animate-in fade-in duration-200\">\n              <!-- ÂÆûÊó∂È¢ÑËßà‰∏é‰øùÂ≠òÊåâÈíÆ -->\n              <div class=\"p-3 bg-muted/30 rounded-lg\">\n                <div class=\"flex items-center justify-between mb-2\">\n                  <span class=\"text-xs text-muted-foreground\">ÂÆûÊó∂È¢ÑËßà</span>\n                  <button\n                    :disabled=\"!hasChanges\"\n                    :class=\"[\n                      'h-7 px-3 text-xs rounded-md border transition-colors gap-1 flex items-center',\n                      hasChanges\n                        ? 'bg-primary text-primary-foreground border-primary hover:bg-primary/90'\n                        : 'bg-background border-gray-200 opacity-50 cursor-not-allowed',\n                    ]\"\n                    @click=\"onSaveStyle\"\n                  >\n                    <svg v-if=\"hasChanges\" class=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path\n                        stroke-linecap=\"round\"\n                        stroke-linejoin=\"round\"\n                        stroke-width=\"2\"\n                        d=\"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12\"\n                      />\n                    </svg>\n                    <svg v-else class=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\" />\n                    </svg>\n                    {{ hasChanges ? '‰øùÂ≠òÂ∫îÁî®' : 'Â∑≤‰øùÂ≠ò' }}\n                  </button>\n                </div>\n                <div class=\"px-6\">\n                  <DialogPreview :style=\"dialogStyle\" />\n                </div>\n              </div>\n\n              <!-- Ê†áÁ≠æÈ°µ -->\n              <div class=\"space-y-4\">\n                <div\n                  class=\"bg-muted text-muted-foreground inline-flex h-9 w-full items-center justify-center rounded-lg p-[3px]\"\n                >\n                  <button\n                    @click=\"activeTab = 'shapes'\"\n                    :class=\"[\n                      'inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-all',\n                      activeTab === 'shapes'\n                        ? 'bg-background text-foreground shadow-sm border-input'\n                        : 'text-muted-foreground hover:text-foreground',\n                    ]\"\n                  >\n                    ÂΩ¢Áä∂È¢ÑËÆæ\n                  </button>\n                  <button\n                    @click=\"activeTab = 'colors'\"\n                    :class=\"[\n                      'inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-all',\n                      activeTab === 'colors'\n                        ? 'bg-background text-foreground shadow-sm border-input'\n                        : 'text-muted-foreground hover:text-foreground',\n                    ]\"\n                  >\n                    È¢úËâ≤Ë∞ÉÊï¥\n                  </button>\n                </div>\n\n                <!-- ÂΩ¢Áä∂È¢ÑËÆæÊ†áÁ≠æÈ°µ -->\n                <div v-if=\"activeTab === 'shapes'\" class=\"space-y-4\">\n                  <!-- ÊñáÊú¨Ê°ÜÂΩ¢Áä∂ -->\n                  <div class=\"space-y-2\">\n                    <label class=\"text-xs text-muted-foreground\">ÊñáÊú¨Ê°ÜÂΩ¢Áä∂</label>\n                    <div class=\"grid grid-cols-5 gap-2\">\n                      <button\n                        v-for=\"preset in boxShapePresets\"\n                        :key=\"preset.id\"\n                        @click=\"updateShape('boxShape', preset.id)\"\n                        :class=\"[\n                          'p-2 text-[10px] rounded-lg border transition-all',\n                          dialogStyle.boxShape === preset.id\n                            ? 'border-primary bg-primary/10 text-primary'\n                            : 'border-border hover:border-primary/50',\n                        ]\"\n                      >\n                        {{ preset.name }}\n                      </button>\n                    </div>\n                  </div>\n\n                  <!-- ËÉåÊôØÂõæÊ°à -->\n                  <div class=\"space-y-2\">\n                    <label class=\"text-xs text-muted-foreground\">ËÉåÊôØÂõæÊ°à</label>\n                    <div class=\"grid grid-cols-6 gap-2\">\n                      <button\n                        v-for=\"preset in backgroundPatternPresets\"\n                        :key=\"preset.id\"\n                        @click=\"updateShape('backgroundPattern', preset.id)\"\n                        :class=\"[\n                          'p-2 text-[10px] rounded-lg border transition-all',\n                          dialogStyle.backgroundPattern === preset.id\n                            ? 'border-primary bg-primary/10 text-primary'\n                            : 'border-border hover:border-primary/50',\n                        ]\"\n                      >\n                        {{ preset.name }}\n                      </button>\n                    </div>\n                  </div>\n\n                  <!-- ËæπÊ°ÜÁ≤óÁªÜ -->\n                  <div class=\"space-y-2\">\n                    <label class=\"text-xs text-muted-foreground\">ËæπÊ°ÜÁ≤óÁªÜ</label>\n                    <div class=\"grid grid-cols-5 gap-2\">\n                      <button\n                        v-for=\"preset in borderWidthPresets\"\n                        :key=\"preset.id\"\n                        @click=\"updateShape('borderWidth', preset.id)\"\n                        :class=\"[\n                          'p-2 text-[10px] rounded-lg border transition-all',\n                          dialogStyle.borderWidth === preset.id\n                            ? 'border-primary bg-primary/10 text-primary'\n                            : 'border-border hover:border-primary/50',\n                        ]\"\n                      >\n                        {{ preset.name }}\n                      </button>\n                    </div>\n                  </div>\n\n                  <!-- ËßíËâ≤ÂêçÂΩ¢Áä∂ -->\n                  <div class=\"space-y-2\">\n                    <label class=\"text-xs text-muted-foreground\">ËßíËâ≤ÂêçÂΩ¢Áä∂</label>\n                    <div class=\"grid grid-cols-5 gap-2\">\n                      <button\n                        v-for=\"preset in nameShapePresets\"\n                        :key=\"preset.id\"\n                        @click=\"updateShape('nameShape', preset.id)\"\n                        :class=\"[\n                          'p-2 text-[10px] rounded-lg border transition-all',\n                          dialogStyle.nameShape === preset.id\n                            ? 'border-primary bg-primary/10 text-primary'\n                            : 'border-border hover:border-primary/50',\n                        ]\"\n                      >\n                        {{ preset.name }}\n                      </button>\n                    </div>\n                  </div>\n\n                  <!-- ÁÆ≠Â§¥ÊåâÈíÆÂΩ¢Áä∂ -->\n                  <div class=\"space-y-2\">\n                    <label class=\"text-xs text-muted-foreground\">ÁÆ≠Â§¥ÊåâÈíÆÂΩ¢Áä∂</label>\n                    <div class=\"grid grid-cols-6 gap-2\">\n                      <button\n                        v-for=\"preset in arrowShapePresets\"\n                        :key=\"preset.id\"\n                        @click=\"updateShape('arrowShape', preset.id)\"\n                        :class=\"[\n                          'p-2 text-[10px] rounded-lg border transition-all',\n                          dialogStyle.arrowShape === preset.id\n                            ? 'border-primary bg-primary/10 text-primary'\n                            : 'border-border hover:border-primary/50',\n                        ]\"\n                      >\n                        {{ preset.name }}\n                      </button>\n                    </div>\n                  </div>\n\n                  <!-- ÂëºÂê∏ÊåáÁ§∫Âô®ÂΩ¢Áä∂ -->\n                  <div class=\"space-y-2\">\n                    <label class=\"text-xs text-muted-foreground\">ÂëºÂê∏ÊåáÁ§∫Âô®</label>\n                    <div class=\"grid grid-cols-5 gap-2\">\n                      <button\n                        v-for=\"preset in indicatorShapePresets\"\n                        :key=\"preset.id\"\n                        @click=\"updateShape('indicatorShape', preset.id)\"\n                        :class=\"[\n                          'p-2 text-[10px] rounded-lg border transition-all',\n                          dialogStyle.indicatorShape === preset.id\n                            ? 'border-primary bg-primary/10 text-primary'\n                            : 'border-border hover:border-primary/50',\n                        ]\"\n                      >\n                        {{ preset.name }}\n                      </button>\n                    </div>\n                  </div>\n\n                  <!-- Â≠ó‰ΩìÂ§ßÂ∞è -->\n                  <div class=\"space-y-2\">\n                    <label class=\"text-xs text-muted-foreground\">Â≠ó‰ΩìÂ§ßÂ∞è ({{ dialogStyle.fontSize }}px)</label>\n                    <input\n                      type=\"range\"\n                      :value=\"dialogStyle.fontSize\"\n                      @input=\"\n                        e =>\n                          onDialogStyleChange({\n                            ...dialogStyle,\n                            fontSize: parseInt((e.target as HTMLInputElement).value),\n                          })\n                      \"\n                      min=\"12\"\n                      max=\"24\"\n                      step=\"1\"\n                      class=\"w-full\"\n                    />\n                  </div>\n                </div>\n\n                <!-- È¢úËâ≤Ë∞ÉÊï¥Ê†áÁ≠æÈ°µ -->\n                <div v-if=\"activeTab === 'colors'\" class=\"space-y-4\">\n                  <ColorSlider\n                    label=\"ÊñáÊú¨Ê°ÜËÉåÊôØ\"\n                    :value=\"dialogStyle.colors.boxBackground\"\n                    @update:value=\"v => updateColor('boxBackground', v)\"\n                  />\n                  <ColorSlider\n                    label=\"ÊñáÊú¨Ê°ÜËæπÊ°Ü\"\n                    :value=\"dialogStyle.colors.boxBorder\"\n                    @update:value=\"v => updateColor('boxBorder', v)\"\n                  />\n                  <ColorSlider\n                    label=\"ËßíËâ≤ÂêçËÉåÊôØ\"\n                    :value=\"dialogStyle.colors.nameBackground\"\n                    @update:value=\"v => updateColor('nameBackground', v)\"\n                  />\n                  <ColorSlider\n                    label=\"ËßíËâ≤ÂêçÊñáÂ≠ó\"\n                    :value=\"dialogStyle.colors.nameText\"\n                    :show-alpha=\"false\"\n                    @update:value=\"v => updateColor('nameText', v)\"\n                  />\n                  <ColorSlider\n                    label=\"ÂØπËØùÊñáÂ≠ó\"\n                    :value=\"dialogStyle.colors.dialogText\"\n                    :show-alpha=\"false\"\n                    @update:value=\"v => updateColor('dialogText', v)\"\n                  />\n                  <ColorSlider\n                    label=\"ÊóÅÁôΩÊñáÂ≠ó\"\n                    :value=\"dialogStyle.colors.narrationText\"\n                    :show-alpha=\"false\"\n                    @update:value=\"v => updateColor('narrationText', v)\"\n                  />\n                  <ColorSlider\n                    label=\"ÁÆ≠Â§¥ËÉåÊôØ\"\n                    :value=\"dialogStyle.colors.arrowBackground\"\n                    @update:value=\"v => updateColor('arrowBackground', v)\"\n                  />\n                  <ColorSlider\n                    label=\"ÁÆ≠Â§¥ÂõæÊ†á\"\n                    :value=\"dialogStyle.colors.arrowIcon\"\n                    :show-alpha=\"false\"\n                    @update:value=\"v => updateColor('arrowIcon', v)\"\n                  />\n                  <ColorSlider\n                    label=\"ÊåáÁ§∫Âô®È¢úËâ≤\"\n                    :value=\"dialogStyle.colors.indicatorColor\"\n                    @update:value=\"v => updateColor('indicatorColor', v)\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref } from 'vue';\nimport type { DialogBoxStyle } from '../types/galgame';\nimport {\n  arrowShapePresets,\n  backgroundPatternPresets,\n  borderWidthPresets,\n  boxShapePresets,\n  indicatorShapePresets,\n  nameShapePresets,\n} from '../types/galgame';\nimport ColorSlider from './ColorSlider.vue';\nimport DialogPreview from './DialogPreview.vue';\n\ninterface Props {\n  onClose: () => void;\n  spriteSettings: {\n    scale: number;\n    positionX: number;\n    positionY: number;\n  };\n  onSpriteSettingsChange: (settings: { scale: number; positionX: number; positionY: number }) => void;\n  autoPlay: boolean;\n  onAutoPlayChange: (autoPlay: boolean) => void;\n  autoPlaySpeed: number;\n  onAutoPlaySpeedChange: (speed: number) => void;\n  dialogStyle: DialogBoxStyle;\n  onDialogStyleChange: (style: DialogBoxStyle) => void;\n  onSaveStyle: () => void;\n  currentAppliedStyle: DialogBoxStyle;\n  customModeEnabled: boolean;\n  onCustomModeChange: (enabled: boolean) => void;\n}\n\nconst props = defineProps<Props>();\n\nconst activeTab = ref<'shapes' | 'colors'>('shapes');\n\nconst hasChanges = computed(() => {\n  return JSON.stringify(props.dialogStyle) !== JSON.stringify(props.currentAppliedStyle);\n});\n\nfunction updateSpriteSettings(settings: { scale: number; positionX: number; positionY: number }) {\n  props.onSpriteSettingsChange(settings);\n}\n\nfunction updateShape(key: keyof DialogBoxStyle, value: string) {\n  props.onDialogStyleChange({ ...props.dialogStyle, [key]: value });\n}\n\nfunction updateColor(key: keyof DialogBoxStyle['colors'], value: string) {\n  props.onDialogStyleChange({\n    ...props.dialogStyle,\n    colors: { ...props.dialogStyle.colors, [key]: value },\n  });\n}\n\nfunction handleEnableCustomMode(enabled: boolean) {\n  props.onCustomModeChange(enabled);\n  if (enabled) {\n    // ÂêåÊ≠•ÂΩìÂâçÊ≠£ÊñáÊ†∑ÂºèÂà∞È¢ÑËßà\n    props.onDialogStyleChange(props.currentAppliedStyle);\n  }\n}\n</script>\n\n<style scoped>\ninput[type='range'] {\n  -webkit-appearance: none;\n  appearance: none;\n  height: 6px;\n  background: var(--muted);\n  border-radius: 9999px;\n  outline: none;\n}\n\ninput[type='range']::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 16px;\n  height: 16px;\n  background: var(--primary);\n  border-radius: 9999px;\n  cursor: pointer;\n}\n\ninput[type='range']::-moz-range-thumb {\n  width: 16px;\n  height: 16px;\n  background: var(--primary);\n  border-radius: 9999px;\n  cursor: pointer;\n  border: none;\n}\n</style>\n","<template>\n  <div\n    ref=\"containerRef\"\n    class=\"relative w-full overflow-hidden select-none\"\n    :style=\"containerStyle\"\n    style=\"background: transparent\"\n  >\n    <!-- ËÉåÊôØ -->\n    <div\n      class=\"absolute inset-0 bg-center bg-no-repeat\"\n      :style=\"{\n        backgroundImage: backgroundImage ? `url('${backgroundImage}')` : undefined,\n        backgroundColor: 'transparent',\n        backgroundSize: backgroundImage ? 'cover' : undefined,\n        backgroundPosition: 'center',\n        backgroundRepeat: 'no-repeat',\n        objectFit: 'cover',\n      }\"\n    />\n\n    <!-- ÁªøËâ≤Ê∏ÖÊñ∞Êª§ÈïúÂè†Âä† -->\n    <div class=\"bg-primary/5 absolute inset-0\" />\n\n    <!-- ËßíËâ≤Á´ãÁªò -->\n    <CharacterSprite\n      :scale=\"spriteSettings.scale\"\n      :position-x=\"spriteSettings.positionX\"\n      :position-y=\"spriteSettings.positionY\"\n      :sprite-type=\"currentSpriteType\"\n      :image-url=\"currentImageUrl\"\n      :live2d-model-id=\"currentLive2dModelId\"\n      :live2d-models=\"live2dModels\"\n    />\n\n    <!-- CGÂõæÁâáÔºàCGÊ®°ÂºèÔºâ -->\n    <div\n      v-if=\"currentDialogue?.isCG && currentDialogue.cgImageUrl\"\n      class=\"absolute inset-0 z-5 bg-cover bg-center\"\n      :style=\"{\n        backgroundImage: `url('${currentDialogue.cgImageUrl}')`,\n      }\"\n    />\n\n    <!-- Â∑¶‰∏äËßíËßíËâ≤ÊåâÈíÆ -->\n    <div class=\"absolute top-4 left-4 z-50 flex flex-col items-start gap-2\">\n      <!-- ËßíËâ≤ÊåâÈíÆ -->\n      <button\n        :class=\"[\n          'bg-card/80 text-foreground flex items-center gap-2 rounded-full p-2 shadow-lg backdrop-blur-sm transition-all hover:bg-card',\n          characterMenuExpanded ? 'pr-4' : '',\n        ]\"\n        aria-label=\"ËßíËâ≤\"\n        @click.stop=\"handleCharacterClick\"\n      >\n        <!-- Â∞è‰∫∫ÂõæÊ†á SVG -->\n        <svg class=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n            stroke-width=\"2\"\n            d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\n          />\n        </svg>\n        <span v-if=\"characterMenuExpanded\" class=\"animate-in fade-in slide-in-from-left-2 text-sm duration-200\"\n          >ËßíËâ≤</span\n        >\n      </button>\n\n      <!-- Â±ïÂºÄÁöÑËæìÂÖ•ÊåâÈíÆ -->\n      <button\n        v-if=\"characterMenuExpanded\"\n        class=\"bg-card/80 text-foreground animate-in fade-in slide-in-from-top-2 flex items-center gap-2 rounded-full p-2 pr-4 shadow-lg backdrop-blur-sm transition-colors duration-200 hover:bg-card\"\n        style=\"animation-delay: 50ms\"\n        aria-label=\"ËæìÂÖ•\"\n        @click.stop=\"handleInputClick\"\n      >\n        <svg class=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n            stroke-width=\"2\"\n            d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\"\n          />\n        </svg>\n        <span class=\"text-sm\">ËæìÂÖ•</span>\n      </button>\n    </div>\n\n    <!-- Âè≥‰∏äËßíËèúÂçïÊåâÈíÆ -->\n    <div class=\"absolute top-4 right-4 z-50 flex flex-col items-end gap-2\">\n      <!-- ÈΩøËΩÆÊåâÈíÆ -->\n      <button\n        :class=\"[\n          'bg-card/80 text-foreground flex items-center gap-2 rounded-full p-2 shadow-lg backdrop-blur-sm transition-all hover:bg-card',\n          menuExpanded ? 'pr-4' : '',\n        ]\"\n        aria-label=\"ËÆæÁΩÆ\"\n        @click=\"handleSettingsClick\"\n      >\n        <svg class=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n            stroke-width=\"2\"\n            d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\"\n          />\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n        </svg>\n        <span v-if=\"menuExpanded\" class=\"animate-in fade-in slide-in-from-left-2 text-sm duration-200\">ËÆæÁΩÆ</span>\n      </button>\n\n      <!-- Â±ïÂºÄÁöÑÂÖ®Â±èÊåâÈíÆ -->\n      <button\n        v-if=\"menuExpanded\"\n        class=\"bg-card/80 text-foreground animate-in fade-in slide-in-from-top-2 flex items-center gap-2 rounded-full p-2 pr-4 shadow-lg backdrop-blur-sm transition-colors duration-200 hover:bg-card\"\n        :aria-label=\"isFullscreen ? 'ÈÄÄÂá∫ÂÖ®Â±è' : 'ÂÖ®Â±è'\"\n        @click=\"toggleFullscreen\"\n      >\n        <svg v-if=\"isFullscreen\" class=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n            stroke-width=\"2\"\n            d=\"M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25\"\n          />\n        </svg>\n        <svg v-else class=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n            stroke-width=\"2\"\n            d=\"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4\"\n          />\n        </svg>\n        <span class=\"text-sm\">{{ isFullscreen ? 'ÈÄÄÂá∫ÂÖ®Â±è' : 'ÂÖ®Â±è' }}</span>\n      </button>\n\n      <!-- ÂéÜÂè≤ÊåâÈíÆ -->\n      <button\n        v-if=\"menuExpanded\"\n        class=\"bg-card/80 text-foreground animate-in fade-in slide-in-from-top-2 flex items-center gap-2 rounded-full p-2 pr-4 shadow-lg backdrop-blur-sm transition-colors duration-200 hover:bg-card\"\n        style=\"animation-delay: 50ms\"\n        aria-label=\"ÂéÜÂè≤\"\n        @click=\"handleHistory\"\n      >\n        <svg class=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n            stroke-width=\"2\"\n            d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"\n          />\n        </svg>\n        <span class=\"text-sm\">ÂéÜÂè≤</span>\n      </button>\n    </div>\n\n    <!-- ÁÇπÂáªÂå∫Âüü -->\n    <div class=\"absolute inset-0 z-10 cursor-pointer\" @click=\"handleClick\" />\n\n    <!-- ÁÇπÂáªÂÖ∂‰ªñÂå∫ÂüüÊî∂Ëµ∑ËèúÂçï -->\n    <div\n      v-if=\"menuExpanded || characterMenuExpanded\"\n      class=\"absolute inset-0 z-40\"\n      @click=\"\n        menuExpanded = false;\n        characterMenuExpanded = false;\n      \"\n    />\n\n    <!-- ÈªëÂ±èËΩ¨Âú∫ -->\n    <div\n      :class=\"[\n        'absolute inset-0 z-30 flex items-center justify-center bg-black transition-opacity duration-1000',\n        blackScreen ? 'opacity-100' : 'pointer-events-none opacity-0',\n      ]\"\n      @click=\"handleBlackScreenClick\"\n    >\n      <p class=\"animate-in fade-in px-8 text-center text-xl leading-relaxed text-white duration-1000 md:text-2xl\">\n        {{ blackScreenText }}\n      </p>\n      <!-- Â∑¶Âè≥ÁÆ≠Â§¥ÊåáÁ§∫Âå∫Âüü -->\n      <template v-if=\"blackScreen\">\n        <div class=\"absolute top-1/2 left-6 -translate-y-1/2 text-white/40 transition-colors hover:text-white/60\">\n          <svg class=\"h-8 w-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 19l-7-7 7-7\" />\n          </svg>\n        </div>\n        <div class=\"absolute top-1/2 right-6 -translate-y-1/2 text-white/40 transition-colors hover:text-white/60\">\n          <svg class=\"h-8 w-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 5l7 7-7 7\" />\n          </svg>\n        </div>\n      </template>\n    </div>\n\n    <!-- ÈÄâÈ°πÊ°Ü -->\n    <ChoiceBox\n      v-if=\"showChoices && currentDialogue?.options\"\n      :options=\"currentDialogue.options\"\n      :custom-style=\"dialogStyle\"\n      :on-select=\"handleChoiceSelect\"\n      :on-prev=\"prevDialogue\"\n      :on-next=\"() => nextDialogue()\"\n      :on-save=\"handleSaveToStory\"\n    />\n\n    <!-- ÂØπËØùÊ°Ü -->\n    <DialogBox\n      v-if=\"\n        !blackScreen &&\n        !showChoices &&\n        currentDialogue &&\n        currentDialogue.type !== 'blackscreen' &&\n        currentDialogue.type !== 'choice' &&\n        getDisplayText()\n      \"\n      :character=\"currentDialogue.character || ''\"\n      :text=\"getDisplayText()\"\n      :is-last-dialogue=\"currentDialogIndex >= dialogues.length - 1\"\n      :is-first-dialogue=\"currentDialogIndex === 0\"\n      :on-prev=\"prevDialogue\"\n      :on-next=\"nextDialogue\"\n      :dialog-key=\"currentDialogIndex\"\n      :custom-style=\"dialogStyle\"\n      :is-loading=\"isStreaming && streamingMessageId === currentDialogue.message_id\"\n      :streaming-text=\"isStreaming && streamingMessageId === currentDialogue.message_id ? streamingText : undefined\"\n      :is-through=\"currentDialogue.isThrough\"\n      :is-editable=\"currentDialogue.isEditable\"\n      :message-id=\"currentDialogue.message_id\"\n      :on-edit=\"handleEditUserMessage\"\n      :on-delete=\"handleDeleteUserMessage\"\n    />\n\n    <!-- ËÆæÁΩÆÈù¢Êùø -->\n    <SettingsPanel\n      v-if=\"showSettings\"\n      :on-close=\"() => (showSettings = false)\"\n      :sprite-settings=\"spriteSettings\"\n      :on-sprite-settings-change=\"s => (spriteSettings = s)\"\n      :auto-play=\"autoPlay\"\n      :on-auto-play-change=\"v => (autoPlay = v)\"\n      :auto-play-speed=\"autoPlaySpeed\"\n      :on-auto-play-speed-change=\"v => (autoPlaySpeed = v)\"\n      :dialog-style=\"previewStyle\"\n      :on-dialog-style-change=\"s => (previewStyle = s)\"\n      :on-save-style=\"handleSaveStyle\"\n      :current-applied-style=\"dialogStyle\"\n      :custom-mode-enabled=\"customModeEnabled\"\n      :on-custom-mode-change=\"v => (customModeEnabled = v)\"\n    />\n\n    <!-- ËßíËâ≤Áä∂ÊÄÅÊ†è -->\n    <CharacterStatusPanel\n      :show=\"showCharacterPanel\"\n      :message-id=\"currentDialogue?.message_id\"\n      :status-block=\"currentDialogue?.statusBlock\"\n      :on-close=\"() => (showCharacterPanel = false)\"\n    />\n\n    <!-- ÂéÜÂè≤ÂØπËØùÊ°Ü -->\n    <div\n      v-if=\"showHistoryDialog\"\n      class=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\"\n      @click.self=\"showHistoryDialog = false\"\n    >\n      <div\n        class=\"bg-card/95 text-foreground relative max-h-[85vh] w-[90%] max-w-3xl rounded-lg shadow-2xl backdrop-blur-md\"\n      >\n        <!-- Ê†áÈ¢òÊ†è -->\n        <div class=\"border-border/30 flex items-center justify-between border-b px-6 py-3\">\n          <h2 class=\"text-lg font-medium\">ÂØπËØùÂéÜÂè≤</h2>\n          <button\n            class=\"hover:bg-muted rounded-full p-1 transition-colors\"\n            aria-label=\"ÂÖ≥Èó≠\"\n            @click=\"showHistoryDialog = false\"\n          >\n            <svg class=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n\n        <!-- ÂéÜÂè≤Ê∂àÊÅØÂàóË°® -->\n        <div class=\"history-scroll-container max-h-[calc(85vh-100px)] overflow-y-auto px-6 py-2\">\n          <div v-if=\"historyMessages.length === 0\" class=\"text-muted-foreground py-12 text-center text-sm\">\n            ÊöÇÊó†ÂéÜÂè≤Ê∂àÊÅØ\n          </div>\n          <template v-for=\"(msg, msgIndex) in historyMessages\" :key=\"msg.id\">\n            <template v-for=\"(item, itemIndex) in msg.items\" :key=\"`${msg.id}-${itemIndex}`\">\n              <div\n                class=\"history-message-item group relative cursor-pointer rounded px-3 py-2 transition-all\"\n                @click=\"jumpToHistoryMessage(msg.id)\"\n              >\n                <!-- ËßíËâ≤ÂØπËØù -->\n                <div\n                  v-if=\"item.type === 'character' || item.type === 'user'\"\n                  class=\"leading-relaxed\"\n                  :style=\"{\n                    color: dialogStyle.colors.dialogText,\n                    fontSize: `${dialogStyle.fontSize}px`,\n                  }\"\n                >\n                  <span class=\"font-medium\">{{ item.character }}Ôºö</span>\n                  <span v-html=\"formatUserText(item.text)\"></span>\n                </div>\n                <!-- ÊóÅÁôΩ -->\n                <div\n                  v-else-if=\"item.type === 'narration'\"\n                  class=\"ml-6 leading-relaxed italic\"\n                  :style=\"{\n                    color: dialogStyle.colors.narrationText,\n                    fontSize: `${dialogStyle.fontSize}px`,\n                  }\"\n                >\n                  {{ item.text }}\n                </div>\n                <!-- ÈªëÂ±èÊñáÂ≠ó -->\n                <div\n                  v-else-if=\"item.type === 'blacktext'\"\n                  class=\"ml-6 leading-relaxed italic opacity-70\"\n                  :style=\"{\n                    color: dialogStyle.colors.narrationText,\n                    fontSize: `${dialogStyle.fontSize}px`,\n                  }\"\n                >\n                  {{ item.text }}\n                </div>\n                <!-- ÈÄâÈ°πÔºà‰ª•Áî®Êà∑ÂèëË®ÄÊ†ºÂºèÊòæÁ§∫Ôºâ -->\n                <div\n                  v-else-if=\"item.type === 'choice'\"\n                  class=\"leading-relaxed\"\n                  :style=\"{\n                    color: dialogStyle.colors.dialogText,\n                    fontSize: `${dialogStyle.fontSize}px`,\n                  }\"\n                >\n                  <span class=\"font-medium\">‰Ω†Ôºö</span>\n                  <span>{{ item.text }}</span>\n                </div>\n                <!-- ÂàÜÈöîÁ∫øÔºàÂè™Âú®hoverÊó∂ÊòæÁ§∫Ôºâ -->\n                <div\n                  v-if=\"itemIndex < msg.items.length - 1 || msgIndex < historyMessages.length - 1\"\n                  class=\"bg-border/30 absolute right-3 bottom-0 left-3 h-px opacity-0 transition-opacity group-hover:opacity-100\"\n                ></div>\n              </div>\n            </template>\n          </template>\n        </div>\n      </div>\n    </div>\n\n    <!-- ËæìÂÖ•Ê°ÜÔºàÂ±èÂπï‰∏≠Â§ÆÔºâ -->\n    <div\n      v-if=\"showInputBox\"\n      class=\"absolute inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm\"\n      @click=\"() => (showInputBox = false)\"\n    >\n      <div\n        class=\"relative mx-4 w-full max-w-lg p-4\"\n        :style=\"{\n          backgroundColor:\n            dialogStyle.boxShape === 'pill' ? 'rgba(255, 255, 255, 0.85)' : dialogStyle.colors.boxBackground,\n          borderRadius: '16px',\n          borderWidth: '1px',\n          borderStyle: 'solid',\n          borderColor: dialogStyle.colors.boxBorder,\n          boxShadow: '0 8px 32px rgba(0,0,0,0.15)',\n          backdropFilter: dialogStyle.boxShape === 'pill' ? 'blur(12px)' : undefined,\n        }\"\n        @click.stop\n      >\n        <!-- ÂÖ≥Èó≠ÊåâÈíÆ -->\n        <button\n          class=\"absolute top-2 right-2 rounded-full p-1 transition-colors hover:bg-black/5\"\n          @click=\"() => (showInputBox = false)\"\n        >\n          <svg class=\"text-muted-foreground h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n          </svg>\n        </button>\n\n        <!-- ËßíËâ≤ÂêçÊ†áÁ≠æ -->\n        <div\n          class=\"mb-3 inline-block px-3 py-1 text-sm font-medium\"\n          :style=\"{\n            backgroundColor: dialogStyle.colors.nameBackground,\n            color: dialogStyle.colors.nameText,\n            borderRadius: '6px',\n          }\"\n        >\n          ‰Ω†\n        </div>\n\n        <!-- ËæìÂÖ•Âå∫Âüü -->\n        <div class=\"flex items-center gap-3\">\n          <input\n            ref=\"inputRef\"\n            v-model=\"inputText\"\n            type=\"text\"\n            placeholder=\"ËæìÂÖ•‰Ω†ÊÉ≥ËØ¥ÁöÑËØù...\"\n            class=\"flex-1 bg-transparent text-base outline-none\"\n            :style=\"{ color: dialogStyle.colors.dialogText }\"\n            @keydown.enter=\"handleSendInput\"\n            @keydown.escape=\"() => (showInputBox = false)\"\n          />\n          <!-- ‰øùÂ≠òÊåâÈíÆ -->\n          <button\n            v-if=\"inputText.trim()\"\n            class=\"p-1 transition-colors hover:opacity-80\"\n            :style=\"{ color: dialogStyle.colors.nameText }\"\n            aria-label=\"‰øùÂ≠òÂà∞Ê≠£Êñá\"\n            title=\"‰øùÂ≠òÂà∞Ê≠£ÊñáÔºà‰∏çÂèëÈÄÅÔºâ\"\n            @click.stop=\"handleSaveInput\"\n          >\n            <svg class=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                stroke-width=\"2\"\n                d=\"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12\"\n              />\n            </svg>\n          </button>\n          <!-- ÂèëÈÄÅÊåâÈíÆ -->\n          <button\n            v-if=\"inputText.trim()\"\n            class=\"p-1 transition-colors hover:opacity-80\"\n            :style=\"{ color: dialogStyle.colors.nameText }\"\n            aria-label=\"ÂèëÈÄÅ\"\n            @click.stop=\"handleSendInput\"\n          >\n            <svg class=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 12h14M12 5l7 7-7 7\" />\n            </svg>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, nextTick, onMounted, onUnmounted, ref, shallowRef, watch } from 'vue';\nimport {\n  hasMotionAndExpression,\n  loadWorldbookResources,\n  parseMessageBlocks,\n  parseStatusBlock,\n} from '../lib/messageParser';\nimport type { ChoiceOption, DialogBoxStyle, DialogueItem } from '../types/galgame';\nimport { defaultDialogStyle } from '../types/galgame';\nimport CharacterSprite from './CharacterSprite.vue';\nimport CharacterStatusPanel from './CharacterStatusPanel.vue';\nimport ChoiceBox from './ChoiceBox.vue';\nimport DialogBox from './DialogBox.vue';\nimport SettingsPanel from './SettingsPanel.vue';\n\n// Â∏∏ÈáèÔºölocalStorage ÈîÆÂêç\nconst STORAGE_KEYS = {\n  DIALOG_STYLE: 'galgame_dialog_style',\n  SPRITE_SETTINGS: 'galgame_sprite_settings',\n} as const;\n\nconst containerRef = ref<HTMLDivElement | null>(null);\nconst autoPlayTimerRef = ref<ReturnType<typeof setTimeout> | null>(null);\n\n// ÂØπËØùÊï∞ÊçÆ - ‰ΩøÁî® shallowRef ‰ºòÂåñÊÄßËÉΩÔºàÊï∞ÁªÑÂÖÉÁ¥†ÂèòÂåñÊó∂ÈúÄË¶ÅÊï¥‰ΩìÊõøÊç¢Ôºâ\nconst dialogues = shallowRef<DialogueItem[]>([]);\nconst currentDialogIndex = ref(0);\nconst currentDialogue = computed(() => dialogues.value[currentDialogIndex.value] || null);\n\n// UI Áä∂ÊÄÅ\nconst showSettings = ref(false);\nconst isFullscreen = ref(false);\nconst autoPlay = ref(false);\nconst autoPlaySpeed = ref(3000);\nconst menuExpanded = ref(false);\nconst characterMenuExpanded = ref(false);\nconst showCharacterPanel = ref(false);\nconst blackScreen = ref(false);\nconst blackScreenText = ref('');\nconst showChoices = ref(false);\nconst customModeEnabled = ref(false);\nconst showInputBox = ref(false);\nconst inputText = ref('');\nconst inputRef = ref<HTMLInputElement | null>(null);\n\n// ÊµÅÂºèÁïåÈù¢Áä∂ÊÄÅ\nconst isStreaming = ref(false);\nconst streamingText = ref('');\nconst streamingMessageId = ref<number | null>(null);\n\n// Ê†∑ÂºèËÆæÁΩÆ - ‰ªé localStorage Âä†ËΩΩ\nconst spriteSettings = ref(\n  loadFromStorage(STORAGE_KEYS.SPRITE_SETTINGS, {\n    scale: 1,\n    positionX: 50,\n    positionY: 50,\n  }),\n);\nconst dialogStyle = ref<DialogBoxStyle>(loadFromStorage(STORAGE_KEYS.DIALOG_STYLE, defaultDialogStyle));\nconst previewStyle = ref<DialogBoxStyle>({ ...dialogStyle.value });\n\n// Live2D Ê®°ÂûãÊï∞ÊçÆ - ‰ΩøÁî® shallowRefÔºàÊ®°ÂûãÈÖçÁΩÆ‰∏çÈúÄË¶ÅÊ∑±Â±ÇÂìçÂ∫îÂºèÔºâ\nconst live2dModels = shallowRef<any[]>([]);\n\n// Â∑•ÂÖ∑ÂáΩÊï∞Ôºö‰ªé localStorage Âä†ËΩΩÊï∞ÊçÆ\nfunction loadFromStorage<T>(key: string, defaultValue: T): T {\n  try {\n    const stored = localStorage.getItem(key);\n    if (stored) {\n      return JSON.parse(stored) as T;\n    }\n  } catch (e) {\n    console.warn(`‰ªé localStorage Âä†ËΩΩ ${key} Â§±Ë¥•:`, e);\n  }\n  return defaultValue;\n}\n\n// Â∑•ÂÖ∑ÂáΩÊï∞Ôºö‰øùÂ≠òÊï∞ÊçÆÂà∞ localStorage\nfunction saveToStorage<T>(key: string, value: T): void {\n  try {\n    localStorage.setItem(key, JSON.stringify(value));\n  } catch (e) {\n    console.warn(`‰øùÂ≠òÂà∞ localStorage ${key} Â§±Ë¥•:`, e);\n  }\n}\n\n// ÁõëÂê¨Ê†∑ÂºèÂèòÂåñÂπ∂‰øùÂ≠òÂà∞ localStorage\nwatch(\n  dialogStyle,\n  newStyle => {\n    saveToStorage(STORAGE_KEYS.DIALOG_STYLE, newStyle);\n  },\n  { deep: true },\n);\n\nwatch(\n  spriteSettings,\n  newSettings => {\n    saveToStorage(STORAGE_KEYS.SPRITE_SETTINGS, newSettings);\n  },\n  { deep: true },\n);\n\n// ÂÆπÂô®Ê†∑Âºè - Ê®™Â±èÊòæÁ§∫ÔºåÁ≠âÊØî‰æãÁº©ÊîæÔºàÈÄÇÈÖçiframeÔºâ\n// ÈÅµÂæ™ÂâçÁ´ØÁïåÈù¢ËßÑÂàôÔºö‰ΩøÁî® width Âíå aspect-ratioÔºåÁ¶ÅÊ≠¢‰ΩøÁî® vh Á≠âÂèóÂÆø‰∏ªÈ´òÂ∫¶ÂΩ±ÂìçÁöÑÂçï‰Ωç\nconst containerStyle = computed(() => {\n  const isPortrait = window.innerHeight > window.innerWidth;\n  const isFullscreen = !!document.fullscreenElement;\n  const targetAspectRatio = 16 / 9;\n\n  if (isPortrait && isFullscreen) {\n    // ÂÖ®Â±è‰∏îÁ´ñÂ±èÊó∂ÔºåÊóãËΩ¨90Â∫¶ÊòæÁ§∫Ê®™Â±è\n    // Âú®ÂÖ®Â±èÊ®°Âºè‰∏ãÔºå‰ª•Â±èÂπïÈ´òÂ∫¶‰Ωú‰∏∫ÂÆπÂô®ÂÆΩÂ∫¶Ôºå‰øùÊåÅ16:9ÊØî‰æã\n    // ‰ΩøÁî® width Âíå aspect-ratio Êù•ÂÆö‰πâÂ∞∫ÂØ∏ÔºàÁ¨¶ÂêàiframeÈÄÇÈÖçË¶ÅÊ±ÇÔºâ\n    const screenHeight = window.innerHeight; // Á´ñÂ±èÊó∂ÁöÑÈ´òÂ∫¶ÔºåÊóãËΩ¨Âêé‰Ωú‰∏∫ÂÆΩÂ∫¶\n\n    return {\n      width: `${screenHeight}px`,\n      aspectRatio: '16 / 9',\n      transform: 'rotate(90deg)',\n      transformOrigin: 'center center',\n      position: 'absolute',\n      left: '50%',\n      top: '50%',\n      marginLeft: `-${screenHeight / 2}px`,\n      marginTop: `-${screenHeight / targetAspectRatio / 2}px`,\n      background: 'transparent',\n    };\n  } else if (isPortrait) {\n    // Á´ñÂ±èÊó∂Á≠âÊØî‰æãÁº©ÊîæÔºå‰øùÊåÅÊ®™Â±èÊØî‰æã\n    // ‰ΩøÁî® width Âíå aspect-ratio Êù•ËÆ©È´òÂ∫¶Ê†πÊçÆÂÆΩÂ∫¶Âä®ÊÄÅË∞ÉÊï¥ÔºàÁ¨¶ÂêàÂâçÁ´ØÁïåÈù¢ËßÑÂàôÔºâ\n    // ËÆ°ÁÆóÁº©ÊîæÊØî‰æãÔºåÁ°Æ‰øùÊ®™Â±èÂÜÖÂÆπËÉΩÂÆåÊï¥ÊòæÁ§∫Âú®Á´ñÂ±èÂÆπÂô®‰∏≠\n    const containerWidth = containerRef.value?.parentElement?.clientWidth || window.innerWidth;\n    const containerHeight = containerRef.value?.parentElement?.clientHeight || window.innerHeight;\n\n    // ËÆ°ÁÆó16:9ÊØî‰æãÊâÄÈúÄÁöÑÈ´òÂ∫¶\n    const requiredHeight = containerWidth / targetAspectRatio;\n    // Â¶ÇÊûúÊâÄÈúÄÈ´òÂ∫¶Ë∂ÖËøáÂÆπÂô®È´òÂ∫¶ÔºåÂàôÁº©Êîæ‰ª•ÈÄÇÂ∫îÂÆπÂô®\n    const scale = containerHeight >= requiredHeight ? 1 : containerHeight / requiredHeight;\n\n    return {\n      width: '100%',\n      aspectRatio: '16 / 9',\n      transform: `scale(${scale})`,\n      transformOrigin: 'center center',\n      margin: '0 auto',\n      background: 'transparent',\n    };\n  }\n\n  // Ê®™Â±èÊó∂Ê≠£Â∏∏ÊòæÁ§∫Ôºà‰ΩøÁî® width Âíå aspect-ratioÔºâ\n  return {\n    width: '100%',\n    aspectRatio: '16 / 9',\n    margin: '0 auto',\n    background: 'transparent',\n  };\n});\n\n// ËÉåÊôØÂõæÁâá\nconst backgroundImage = computed(() => {\n  const dialogue = currentDialogue.value;\n  // ‰ºòÂÖà‰ΩøÁî®‰ªé‰∏ñÁïå‰π¶ÂåπÈÖçÂà∞ÁöÑÂú∫ÊôØÂõæÁâáURL\n  if (dialogue?.sceneImageUrl) {\n    return dialogue.sceneImageUrl;\n  }\n  // ÂÖ∂Ê¨°‰ΩøÁî®sceneÔºàÂèØËÉΩÊòØURLÊàñÊñáÊú¨ÊèèËø∞Ôºâ\n  if (dialogue?.scene) {\n    // Â¶ÇÊûúsceneÁúãËµ∑Êù•ÂÉèURLÔºåÁõ¥Êé•‰ΩøÁî®\n    if (dialogue.scene.match(/^https?:\\/\\//) || dialogue.scene.match(/^\\//)) {\n      return dialogue.scene;\n    }\n  }\n  // Âê¶Âàô‰ΩøÁî®ÈªòËÆ§ËÉåÊôØ\n  return null;\n});\n\n// ÂΩìÂâçÁ´ãÁªòÈÖçÁΩÆ\nconst currentSpriteType = computed<'live2d' | 'image' | 'none'>(() => {\n  const dialogue = currentDialogue.value;\n  if (dialogue?.sprite?.type) {\n    return dialogue.sprite.type;\n  }\n  // CGÊ®°Âºè‰∏çÊòæÁ§∫Á´ãÁªò\n  if (dialogue?.isCG || dialogue?.type === 'cg') {\n    return 'none';\n  }\n  // ÈªòËÆ§ÔºöÂ¶ÇÊûúÊúâËßíËâ≤Âêç‰∏îÂåπÈÖçÂà∞ Live2D Ê®°ÂûãÔºå‰ΩøÁî® Live2DÔºõÂê¶Âàô‰ΩøÁî®ÂõæÁâá\n  if (dialogue?.character) {\n    const hasLive2d = live2dModels.value.some(m => m.name === dialogue.character);\n    return hasLive2d ? 'live2d' : 'image';\n  }\n  return 'image';\n});\n\nconst currentImageUrl = computed(() => {\n  const dialogue = currentDialogue.value;\n  return dialogue?.sprite?.imageUrl || '/placeholder-user.jpg';\n});\n\nconst currentLive2dModelId = computed(() => {\n  const dialogue = currentDialogue.value;\n  if (dialogue?.sprite?.live2dModelId) {\n    return dialogue.sprite.live2dModelId;\n  }\n  // Ëá™Âä®ÂåπÈÖçÔºöÊ†πÊçÆËßíËâ≤ÂêçÊü•ÊâæÊ®°Âûã\n  if (dialogue?.character) {\n    const model = live2dModels.value.find(m => m.name === dialogue.character);\n    return model?.id;\n  }\n  return undefined;\n});\n\n// Áî®Êà∑Ê∂àÊÅØÁºñËæëÁä∂ÊÄÅÔºàÂÜÖÂ≠ò‰∏≠Ôºâ\nconst userMessageEdits = ref<Map<number, { text?: string; deleted?: boolean }>>(new Map());\n\n// ‰ªéÈÖíÈ¶ÜËØªÂèñÂØπËØùÊï∞ÊçÆ\nasync function loadDialoguesFromTavern() {\n  try {\n    const messages = getChatMessages('0-{{lastMessageId}}');\n    const newDialogues: DialogueItem[] = [];\n    let lastScene: string | undefined; // Áî®‰∫éÂú∫ÊôØÁªßÊâø\n\n    // Â§ÑÁêÜÊØèÊù°Ê∂àÊÅØ\n    for (const msg of messages) {\n      const messageText = msg.message || '';\n\n      // Ëß£ÊûêÊ∂àÊÅØÂùóÔºà‰º†ÂÖ•‰∏ä‰∏ÄË°åÁöÑÂú∫ÊôØÁî®‰∫éÁªßÊâøÔºâ\n      const blocks = await parseMessageBlocks(messageText, lastScene);\n\n      // Â¶ÇÊûúÊ≤°ÊúâËß£ÊûêÂà∞ÂùóÔºå‰∏çÊòæÁ§∫ËØ•Ê∂àÊÅØÔºàÂÆÉÂæàÂèØËÉΩ‰∏çÂ±û‰∫éÊàë‰ª¨ÁöÑÂâßÊÉÖÊñáÊú¨Ôºâ\n      // StatusBlock ‰Ωç‰∫é <content> ‰πãÂ§ñÔºåÂè™Áî®‰∫éÁä∂ÊÄÅÊ†èÊòæÁ§∫Ôºå‰∏çÂàõÂª∫ÂØπËØùÈ°π\n      if (blocks.length === 0) {\n        continue;\n      }\n\n      // Ëß£ÊûêStatusBlockÔºàÁî®‰∫éÁä∂ÊÄÅÊ†èÊòæÁ§∫Ôºå‰∏ç‰Ωú‰∏∫ÂØπËØùÈ°πÔºâ\n      const statusBlock = parseStatusBlock(messageText);\n\n      // Êî∂ÈõÜÊñ∞Ê†ºÂºèÁöÑÈÄâÈ°πÂùóÔºà[[choice||ÈÄâÈ°π1||ËßíËâ≤Âêç||Âè∞ËØç]]Ôºâ\n      const newFormatChoiceBlocks: Array<{\n        choiceText: string;\n        choiceCharacter: string;\n        choiceResponse: string;\n      }> = [];\n      const oldFormatChoiceBlocks: Array<{ choices: string[] }> = [];\n\n      // ÂÖàÈÅçÂéÜÊâÄÊúâÂùóÔºåÊî∂ÈõÜÈÄâÈ°πÂùó\n      for (const block of blocks) {\n        if (block.type === 'choice') {\n          if (block.choiceText && block.choiceCharacter && block.choiceResponse) {\n            // Êñ∞Ê†ºÂºè\n            newFormatChoiceBlocks.push({\n              choiceText: block.choiceText,\n              choiceCharacter: block.choiceCharacter,\n              choiceResponse: block.choiceResponse,\n            });\n          } else if (block.choices && block.choices.length > 0) {\n            // ÊóßÊ†ºÂºè\n            oldFormatChoiceBlocks.push({ choices: block.choices });\n          }\n        }\n      }\n\n      // Â§ÑÁêÜÊØè‰∏™Ëß£ÊûêÂà∞ÁöÑÂùó\n      for (const block of blocks) {\n        if (block.type === 'character') {\n          // Ê£ÄÊü•ÊòØÂê¶ÊúâmotionÂíåexpression\n          const hasMotionExpr = hasMotionAndExpression(\n            block.character || '',\n            block.motion,\n            block.expression,\n            live2dModels.value,\n          );\n\n          // Â¶ÇÊûúÊòØCGÊ®°ÂºèÊàñÊ≤°Êúâmotion/expressionÔºåËøõÂÖ•CGÊ®°Âºè\n          const isCGMode = block.isCG || !hasMotionExpr;\n\n          const dialogue: DialogueItem = {\n            character: block.character,\n            text: block.text || '',\n            message_id: msg.message_id,\n            role: 'assistant',\n            type: isCGMode ? 'cg' : undefined,\n            scene: block.scene,\n            sceneImageUrl: block.sceneImageUrl, // ‰ªé‰∏ñÁïå‰π¶ÂåπÈÖçÂà∞ÁöÑËÉåÊôØÂõæÁâáURL\n            motion: block.motion,\n            expression: block.expression,\n            // ‰∏çÂÜçËÆæÁΩÆ isThroughÔºåÂõ†‰∏∫Âè™Êúâ*ÊòüÂè∑ÂåÖË£π*ÁöÑÈÉ®ÂàÜÂ∫îËØ•ÊòØÁÅ∞Ëâ≤Ôºå‰∏çÊòØÊï¥Ë°å\n            isCG: isCGMode,\n            cgImageUrl: isCGMode ? block.cgImageUrl || block.scene : undefined, // ‰ºòÂÖà‰ΩøÁî®‰ªé‰∏ñÁïå‰π¶ÂåπÈÖçÂà∞ÁöÑCG URL\n            statusBlock,\n            sprite: isCGMode\n              ? { type: 'none' } // CGÊ®°Âºè‰∏çÊòæÁ§∫Á´ãÁªò\n              : {\n                  type: live2dModels.value.some(m => m.name === block.character) ? 'live2d' : 'image',\n                  imageUrl: block.spriteImageUrl || msg.extra?.sprite_image || undefined,\n                },\n          };\n\n          // Êõ¥Êñ∞Âú∫ÊôØÔºàÁî®‰∫éÂêéÁª≠ÁªßÊâøÔºâ\n          if (block.scene) {\n            lastScene = block.scene;\n          }\n\n          newDialogues.push(dialogue);\n        } else if (block.type === 'narration') {\n          const dialogue: DialogueItem = {\n            character: '',\n            text: block.message || '',\n            type: 'narration',\n            message_id: msg.message_id,\n            role: 'system',\n            scene: block.scene,\n            sceneImageUrl: block.sceneImageUrl, // ‰ªé‰∏ñÁïå‰π¶ÂåπÈÖçÂà∞ÁöÑËÉåÊôØÂõæÁâáURL\n            statusBlock,\n          };\n\n          // Êõ¥Êñ∞Âú∫ÊôØÔºàÁî®‰∫éÂêéÁª≠ÁªßÊâøÔºâ\n          if (block.scene) {\n            lastScene = block.scene;\n          }\n\n          newDialogues.push(dialogue);\n        } else if (block.type === 'blacktext') {\n          newDialogues.push({\n            character: '',\n            text: block.message || '',\n            type: 'blackscreen',\n            message_id: msg.message_id,\n            role: 'system',\n            statusBlock,\n          });\n        } else if (block.type === 'user') {\n          const dialogue: DialogueItem = {\n            character: '‰Ω†',\n            text: block.message || '',\n            type: 'user',\n            message_id: msg.message_id,\n            role: 'user',\n            scene: block.scene,\n            sceneImageUrl: block.sceneImageUrl, // ‰ªé‰∏ñÁïå‰π¶ÂåπÈÖçÂà∞ÁöÑËÉåÊôØÂõæÁâáURL\n            isEditable: true,\n            // ‰∏çÂÜçËÆæÁΩÆ isThroughÔºåÂõ†‰∏∫Âè™Êúâ*ÊòüÂè∑ÂåÖË£π*ÁöÑÈÉ®ÂàÜÂ∫îËØ•ÊòØÁÅ∞Ëâ≤Ôºå‰∏çÊòØÊï¥Ë°å\n            statusBlock,\n          };\n\n          // Êõ¥Êñ∞Âú∫ÊôØÔºàÁî®‰∫éÂêéÁª≠ÁªßÊâøÔºâ\n          if (block.scene) {\n            lastScene = block.scene;\n          }\n\n          // Â∫îÁî®ÁºñËæëÔºàÂ¶ÇÊûúÊúâÔºâ\n          const edit = userMessageEdits.value.get(msg.message_id);\n          if (edit) {\n            if (edit.deleted) {\n              dialogue.isDeleted = true;\n            } else if (edit.text !== undefined) {\n              dialogue.editedText = edit.text;\n              dialogue.text = edit.text;\n            }\n          }\n\n          newDialogues.push(dialogue);\n        } else if (block.type === 'choice') {\n          // Ë∑≥ËøáÔºåÁ®çÂêéÁªü‰∏ÄÂ§ÑÁêÜ\n        }\n      }\n\n      // Â§ÑÁêÜÈÄâÈ°πÂùóÔºöÂå∫ÂàÜ‰∏§ÁßçÊ†ºÂºè\n      if (newFormatChoiceBlocks.length > 0) {\n        // Ê†ºÂºè1ÔºöÂ∏¶ËßíËâ≤ÂõûÂ§çÁöÑÈÄâÈ°πÔºàÁªßÁª≠ÂâßÊÉÖÊºîÂá∫Ôºâ\n        // Êî∂ÈõÜÊâÄÊúâÈÄâÈ°πÂà∞‰∏Ä‰∏™ choice ÂØπËØù‰∏≠\n        newDialogues.push({\n          character: '',\n          text: '',\n          type: 'choice',\n          message_id: msg.message_id,\n          role: 'system',\n          options: newFormatChoiceBlocks.map((choiceBlock, index) => ({\n            id: `choice_${index}`,\n            text: choiceBlock.choiceText,\n            character: choiceBlock.choiceCharacter,\n            response: choiceBlock.choiceResponse,\n          })),\n          statusBlock,\n        });\n      } else if (oldFormatChoiceBlocks.length > 0) {\n        // Ê†ºÂºè2ÔºöÁ∫ØÈÄâÈ°πÂàóË°®ÔºàËß¶ÂèëAIÁîüÊàêÔºâ\n        // ÂêàÂπ∂ÊâÄÊúâÈÄâÈ°πÂùó\n        const allChoices: string[] = [];\n        for (const choiceBlock of oldFormatChoiceBlocks) {\n          allChoices.push(...choiceBlock.choices);\n        }\n        newDialogues.push({\n          character: '',\n          text: '',\n          type: 'choice',\n          message_id: msg.message_id,\n          role: 'system',\n          options: allChoices.map((choice, index) => ({\n            id: `choice_${index}`,\n            text: choice,\n          })),\n          statusBlock,\n        });\n      }\n    }\n\n    // ËøáÊª§Â∑≤Âà†Èô§ÁöÑÊ∂àÊÅØ\n    const filteredDialogues = newDialogues.filter(d => !d.isDeleted);\n    dialogues.value = filteredDialogues;\n\n    // Â¶ÇÊûúÊúâÊñ∞ÂØπËØùÔºåËá™Âä®Ë∑≥ËΩ¨Âà∞ÊúÄÊñ∞\n    if (filteredDialogues.length > 0 && currentDialogIndex.value < filteredDialogues.length - 1) {\n      currentDialogIndex.value = filteredDialogues.length - 1;\n    }\n\n    console.info(`Âä†ËΩΩ‰∫Ü ${dialogues.value.length} Êù°ÂØπËØù`);\n\n    // Â¶ÇÊûúÊ≤°ÊúâÂØπËØùÊï∞ÊçÆÔºå‰ΩøÁî®ÊµãËØïÊï∞ÊçÆ\n    if (dialogues.value.length === 0) {\n      loadTestDialogues();\n    }\n  } catch (error) {\n    console.error('Âä†ËΩΩÂØπËØùÊï∞ÊçÆÂ§±Ë¥•:', error);\n    // ‰ΩøÁî®ÊµãËØïÊï∞ÊçÆ\n    loadTestDialogues();\n  }\n}\n\n// Âä†ËΩΩÊµãËØïÂØπËØùÊï∞ÊçÆ\nfunction loadTestDialogues() {\n  console.info('‰ΩøÁî®ÊµãËØïÂØπËØùÊï∞ÊçÆ');\n  dialogues.value = [\n    {\n      character: 'Â∞èÈõ™',\n      text: '‰Ω†Â•ΩÂïäÔºåÊ¨¢ËøéÊù•Âà∞Ëøô‰∏™ Galgame È£éÊ†ºÁöÑÂØπËØùÁïåÈù¢ÔºÅ',\n      type: undefined,\n      scene: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=1920&h=1080&fit=crop',\n      sprite: { type: 'image' as const, imageUrl: '/placeholder-user.jpg' },\n    },\n    {\n      character: 'Â∞èÈõ™',\n      text: 'ËøôÊòØ‰∏Ä‰∏™ÊîØÊåÅÂ§öÁßçÊºîÂá∫ÊïàÊûúÁöÑÁïåÈù¢ÔºåÂåÖÊã¨ËßíËâ≤ÂØπËØù„ÄÅÊóÅÁôΩ„ÄÅÈªëÂ±èËΩ¨Âú∫ÂíåÈÄâÈ°πÈÄâÊã©„ÄÇ',\n      isThrough: false,\n    },\n    {\n      character: '',\n      text: 'ËøôÊòØ‰∏ÄÊÆµÊóÅÁôΩÊñáÂ≠óÔºåÁî®‰∫éÊèèËø∞Âú∫ÊôØÊàñË°•ÂÖÖËØ¥Êòé„ÄÇÊóÅÁôΩ‰ºö‰ª•Êñú‰ΩìÂ±Ö‰∏≠ÊòæÁ§∫„ÄÇ',\n      type: 'narration' as const,\n    },\n    {\n      character: 'Â∞èÈõ™',\n      text: '*through* ËøôÊòØ‰∏ÄÊÆµÂÜÖÂøÉÁã¨ÁôΩÔºå‰ΩøÁî®‰∫Ü through Ê†ºÂºèÔºå‰ºö‰ª•ÊµÖÁÅ∞Ëâ≤Êñú‰ΩìÊòæÁ§∫„ÄÇ',\n      isThrough: true,\n    },\n    {\n      character: '',\n      text: 'Êó∂Èó¥ÊÇÑÁÑ∂ÊµÅÈÄù...',\n      type: 'blackscreen' as const,\n    },\n    {\n      character: 'Â∞èÈõ™',\n      text: '‰Ω†ÂèØ‰ª•ÈÄöËøáÁÇπÂáªÂè≥‰∏äËßíÁöÑÈΩøËΩÆÂõæÊ†áÊâìÂºÄËÆæÁΩÆÈù¢ÊùøÔºåËá™ÂÆö‰πâÂØπËØùÊ°ÜÁöÑÊ†∑ÂºèÂíåÈ¢úËâ≤„ÄÇ',\n    },\n    {\n      character: 'Â∞èÈõ™',\n      text: 'Áé∞Âú®ÔºåËØ∑ÈÄâÊã©‰Ω†ÊÉ≥Ë¶ÅÂÅöÁöÑ‰∫ãÊÉÖÔºö',\n    },\n    {\n      character: '',\n      text: '',\n      type: 'choice' as const,\n      options: [\n        { id: 'opt1', text: 'Êü•ÁúãËÆæÁΩÆÈÄâÈ°π' },\n        { id: 'opt2', text: 'ÁªßÁª≠ÂØπËØù' },\n        { id: 'opt3', text: '‰∫ÜËß£Êõ¥Â§öÂäüËÉΩ' },\n      ],\n    },\n    {\n      character: 'Â∞èÈõ™',\n      text: 'ÊÑüË∞¢‰Ω†ÁöÑÈÄâÊã©ÔºÅËøô‰∏™ÁïåÈù¢ËøòÊîØÊåÅ Live2D Ê®°ÂûãÊòæÁ§∫Ôºå‰∏çËøáÈúÄË¶ÅÂÖàÂú®ËßíËâ≤Âç°ÂèòÈáè‰∏≠ÈÖçÁΩÆÊ®°Âûã„ÄÇ',\n    },\n    {\n      character: 'Â∞èÈõ™',\n      text: '‰Ω†ËøòÂèØ‰ª•ÁÇπÂáªÂ∑¶‰∏äËßíÁöÑËßíËâ≤ÊåâÈíÆÔºåÊü•ÁúãËßíËâ≤Áä∂ÊÄÅÊ†èÂíåÂ∞èÂâßÂú∫„ÄÇ',\n    },\n    {\n      character: '',\n      text: 'ÊµãËØïÂØπËØùÂà∞Ê≠§ÁªìÊùü„ÄÇÂú®ÂÆûÈôÖ‰ΩøÁî®Êó∂ÔºåÂØπËØùÊï∞ÊçÆ‰ºö‰ªéÈÖíÈ¶ÜÊ∂àÊÅØ‰∏≠Ëá™Âä®ËØªÂèñ„ÄÇ',\n      type: 'narration' as const,\n    },\n  ];\n}\n\n// Âä†ËΩΩ Live2D Ê®°ÂûãÈÖçÁΩÆ\nasync function loadLive2dModels() {\n  try {\n    const modelsMap = new Map<string, any>();\n\n    // 1. ÂÖà‰ªéËßíËâ≤Âç°ÂèòÈáèËØªÂèñÂü∫Á°ÄÈÖçÁΩÆ\n    const variables = getVariables({ type: 'character' }) || {};\n    if (variables?.live2d_models && Array.isArray(variables.live2d_models)) {\n      for (const model of variables.live2d_models) {\n        if (model.name) {\n          modelsMap.set(model.name, { ...model });\n        }\n      }\n    }\n\n    // 2. ‰ªé‰∏ñÁïå‰π¶ËØªÂèñÊ®°ÂûãËµÑÊ∫êÔºåÂêàÂπ∂ defaultAnimation Á≠âÈÖçÁΩÆ\n    try {\n      const resources = await loadWorldbookResources();\n      for (const [modelName, modelData] of resources.models.entries()) {\n        const existingModel = modelsMap.get(modelName);\n        if (existingModel) {\n          // ÂêàÂπ∂ defaultAnimation Á≠âÈÖçÁΩÆ\n          if (modelData.defaultAnimation) {\n            existingModel.defaultAnimation = modelData.defaultAnimation;\n          }\n          // Â¶ÇÊûú‰∏ñÁïå‰π¶‰∏≠ÊúâÊõ¥Êñ∞ÁöÑÊñá‰ª∂Ë∑ØÂæÑÔºå‰πüÂèØ‰ª•Êõ¥Êñ∞\n          if (modelData.files) {\n            // Êõ¥Êñ∞Êñá‰ª∂Ë∑ØÂæÑÔºàÂ¶ÇÊûú‰∏ñÁïå‰π¶‰∏≠ÁöÑË∑ØÂæÑÊõ¥Êñ∞Ôºâ\n            if (modelData.files.model3) {\n              existingModel.modelPath = modelData.files.model3.split('/').pop() || existingModel.modelPath;\n              // Êõ¥Êñ∞ basePath\n              const basePath = modelData.files.model3.substring(0, modelData.files.model3.lastIndexOf('/') + 1);\n              existingModel.basePath = basePath || existingModel.basePath;\n            }\n            if (modelData.files.textures) {\n              existingModel.textures = modelData.files.textures;\n            }\n          }\n          // Êõ¥Êñ∞ motions Âíå expressionsÔºàÂ¶ÇÊûú‰∏ñÁïå‰π¶‰∏≠ÁöÑÊõ¥ÂÆåÊï¥Ôºâ\n          if (modelData.motions && modelData.motions.length > 0) {\n            existingModel.motions = modelData.motions.map(m => ({\n              group: m.group || 'idle',\n              name: m.name,\n              file: m.file,\n            }));\n          }\n          if (modelData.expressions && modelData.expressions.length > 0) {\n            existingModel.expressions = modelData.expressions.map(e => e.name || e.file);\n          }\n        } else {\n          // Â¶ÇÊûúËßíËâ≤Âç°ÂèòÈáè‰∏≠Ê≤°ÊúâËØ•Ê®°ÂûãÔºå‰ΩÜ‰∏ñÁïå‰π¶‰∏≠ÊúâÔºåÂàõÂª∫Âü∫Á°ÄÈÖçÁΩÆ\n          // ËøôÁßçÊÉÖÂÜµ‰∏ãÈÄöÂ∏∏‰∏ç‰ºöÂèëÁîüÔºåÂõ†‰∏∫Ê®°ÂûãÂ∫îËØ•ÂÖàÂú®ËßíËâ≤Âç°ÂèòÈáè‰∏≠ÂÆö‰πâ\n          console.warn(`‰∏ñÁïå‰π¶‰∏≠ÊâæÂà∞Ê®°Âûã ${modelName}Ôºå‰ΩÜËßíËâ≤Âç°ÂèòÈáè‰∏≠Êú™ÊâæÂà∞ÂØπÂ∫îÈÖçÁΩÆ`);\n        }\n      }\n    } catch (error) {\n      console.warn('‰ªé‰∏ñÁïå‰π¶Âä†ËΩΩÊ®°ÂûãËµÑÊ∫êÂ§±Ë¥•:', error);\n    }\n\n    live2dModels.value = Array.from(modelsMap.values());\n    console.info(`Âä†ËΩΩ‰∫Ü ${live2dModels.value.length} ‰∏™ Live2D Ê®°ÂûãÈÖçÁΩÆÔºàÂ∑≤ÂêàÂπ∂‰∏ñÁïå‰π¶ËµÑÊ∫êÔºâ`);\n  } catch (error) {\n    console.error('Âä†ËΩΩ Live2D Ê®°ÂûãÈÖçÁΩÆÂ§±Ë¥•:', error);\n  }\n}\n\nfunction nextDialogue(skipBlackscreen = false) {\n  if (currentDialogIndex.value < dialogues.value.length - 1) {\n    const nextIndex = currentDialogIndex.value + 1;\n    currentDialogIndex.value = nextIndex;\n    if (skipBlackscreen) {\n      blackScreen.value = false;\n    }\n    showChoices.value = false;\n  }\n}\n\nfunction prevDialogue() {\n  if (currentDialogIndex.value > 0) {\n    currentDialogIndex.value--;\n    showChoices.value = false;\n  }\n}\n\n// ÁõëÂê¨ÂΩìÂâçÂØπËØùÂèòÂåñÔºåÂ§ÑÁêÜÈªëÂ±èÂíåÈÄâÈ°π\nwatch(\n  () => [currentDialogIndex.value, currentDialogue.value],\n  () => {\n    const dialogue = currentDialogue.value;\n    if (!dialogue) return;\n\n    // Â¶ÇÊûúÂàáÊç¢Âà∞ÁöÑÂØπËØù‰∏çÊòØÊ≠£Âú®ÊµÅÂºèÂä†ËΩΩÁöÑÊ∂àÊÅØÔºåÊ∏ÖÈô§ÊµÅÂºèÁä∂ÊÄÅ\n    if (streamingMessageId.value !== null && dialogue.message_id !== streamingMessageId.value) {\n      isStreaming.value = false;\n      streamingText.value = '';\n      streamingMessageId.value = null;\n    }\n\n    if (dialogue.type === 'blackscreen') {\n      blackScreenText.value = dialogue.text;\n      blackScreen.value = true;\n      showChoices.value = false;\n    } else if (dialogue.type === 'choice') {\n      showChoices.value = true;\n      blackScreen.value = false;\n    } else {\n      blackScreen.value = false;\n      showChoices.value = false;\n    }\n  },\n  { immediate: true },\n);\n\n// Ëá™Âä®Êí≠ÊîæÈÄªËæë\nwatch(\n  () => [autoPlay.value, autoPlaySpeed.value, currentDialogIndex.value, showChoices.value, currentDialogue.value],\n  () => {\n    if (autoPlayTimerRef.value) {\n      clearTimeout(autoPlayTimerRef.value);\n      autoPlayTimerRef.value = null;\n    }\n\n    if (autoPlay.value && currentDialogIndex.value < dialogues.value.length - 1 && !showChoices.value) {\n      const dialogue = currentDialogue.value;\n      const delay = dialogue?.type === 'blackscreen' ? autoPlaySpeed.value + 2000 : autoPlaySpeed.value;\n      autoPlayTimerRef.value = setTimeout(() => {\n        nextDialogue();\n      }, delay);\n    }\n  },\n  { immediate: true },\n);\n\n// ÂÖ®Â±èÂàáÊç¢\nasync function toggleFullscreen() {\n  try {\n    if (!document.fullscreenElement && containerRef.value) {\n      // Â¶ÇÊûúÊòØÁ´ñÂ±èÔºåËØ∑Ê±ÇÊ®™Â±èÊñπÂêë\n      if (window.innerHeight > window.innerWidth) {\n        // Â∞ùËØïÈîÅÂÆöÂ±èÂπïÊñπÂêëÔºàÈúÄË¶ÅÁî®Êà∑ÊâãÂäøËß¶ÂèëÔºâ\n        if (screen.orientation && screen.orientation.lock) {\n          try {\n            await screen.orientation.lock('landscape');\n          } catch (e) {\n            console.warn('Êó†Ê≥ïÈîÅÂÆöÂ±èÂπïÊñπÂêë:', e);\n          }\n        }\n      }\n      await containerRef.value.requestFullscreen();\n      isFullscreen.value = true;\n    } else {\n      await document.exitFullscreen();\n      isFullscreen.value = false;\n      // ÈÄÄÂá∫ÂÖ®Â±èÊó∂Ëß£ÈîÅÂ±èÂπïÊñπÂêë\n      if (screen.orientation && screen.orientation.unlock) {\n        try {\n          await screen.orientation.unlock();\n        } catch (e) {\n          // ÂøΩÁï•ÈîôËØØ\n        }\n      }\n    }\n    menuExpanded.value = false;\n  } catch (error) {\n    console.error('ÂÖ®Â±èÂàáÊç¢Â§±Ë¥•:', error);\n  }\n}\n\n// ÁõëÂê¨ÂÖ®Â±èÂèòÂåñÂíåÁ™óÂè£Â§ßÂ∞èÂèòÂåñ\nconst handleFullscreenChange = () => {\n  isFullscreen.value = !!document.fullscreenElement;\n  // Ëß¶ÂèëÂÆπÂô®Ê†∑ÂºèÈáçÊñ∞ËÆ°ÁÆó\n  nextTick(() => {\n    // Âº∫Âà∂Êõ¥Êñ∞\n  });\n};\n\n// ÁõëÂê¨Á™óÂè£Â§ßÂ∞èÂèòÂåñÔºåÊõ¥Êñ∞ÂÆπÂô®Ê†∑Âºè\nconst handleResize = () => {\n  // Ëß¶ÂèëÂìçÂ∫îÂºèÊõ¥Êñ∞ÔºàcontainerStyle ÊòØ computedÔºå‰ºöËá™Âä®Êõ¥Êñ∞Ôºâ\n  // ‰ΩøÁî® nextTick Á°Æ‰øù DOM Êõ¥Êñ∞ÂÆåÊàê\n  nextTick(() => {\n    // Âº∫Âà∂Ëß¶Âèë computed ÈáçÊñ∞ËÆ°ÁÆó\n    if (containerRef.value) {\n      // ÈÄöËøáËÆøÈóÆ containerStyle Êù•Ëß¶ÂèëÈáçÊñ∞ËÆ°ÁÆó\n      const _ = containerStyle.value;\n    }\n  });\n};\n\n// ‰∫ã‰ª∂ÁõëÂê¨Âô®Ê∏ÖÁêÜÂáΩÊï∞ÈõÜÂêà\nconst eventCleanups: Array<() => void> = [];\n\nonMounted(() => {\n  document.addEventListener('fullscreenchange', handleFullscreenChange);\n  window.addEventListener('resize', handleResize);\n  window.addEventListener('orientationchange', handleResize);\n\n  // Âä†ËΩΩÊï∞ÊçÆ\n  loadLive2dModels();\n  loadDialoguesFromTavern();\n\n  // ÁõëÂê¨ËÅäÂ§©Ê∂àÊÅØÂèòÂåñ\n  if (typeof eventOn === 'function' && typeof tavern_events !== 'undefined') {\n    // ÁõëÂê¨Êñ∞Ê∂àÊÅØ\n    const messageReceivedCleanup = eventOn(tavern_events.MESSAGE_RECEIVED, async (messageId: number) => {\n      await loadDialoguesFromTavern();\n      // Ëá™Âä®Ë∑≥ËΩ¨Âà∞ÊúÄÊñ∞Ê∂àÊÅØ\n      if (autoPlay.value) {\n        currentDialogIndex.value = dialogues.value.length - 1;\n      }\n      // Â¶ÇÊûúÊî∂Âà∞ÁöÑÊ∂àÊÅØID‰∏éÊ≠£Âú®ÊµÅÂºèÂä†ËΩΩÁöÑÊ∂àÊÅØIDÂåπÈÖçÔºåÊ∏ÖÈô§ÊµÅÂºèÁä∂ÊÄÅ\n      if (streamingMessageId.value === messageId) {\n        isStreaming.value = false;\n        streamingText.value = '';\n        streamingMessageId.value = null;\n      }\n    });\n    if (messageReceivedCleanup) eventCleanups.push(messageReceivedCleanup);\n\n    // ÁõëÂê¨Ê∂àÊÅØÊõ¥Êñ∞\n    const messageUpdatedCleanup = eventOn(tavern_events.MESSAGE_UPDATED, async () => {\n      await loadDialoguesFromTavern();\n      // Â¶ÇÊûúÂΩìÂâçÊ≠£Âú®ÊµÅÂºèÂä†ËΩΩÁöÑÊ∂àÊÅØÂ∑≤Êõ¥Êñ∞ÔºåÂÅúÊ≠¢ÊµÅÂºèÁä∂ÊÄÅ\n      if (streamingMessageId.value !== null) {\n        const updatedMessage = dialogues.value.find(d => d.message_id === streamingMessageId.value);\n        if (updatedMessage && updatedMessage.text === streamingText.value) {\n          isStreaming.value = false;\n          streamingText.value = '';\n          streamingMessageId.value = null;\n        }\n      }\n    });\n    if (messageUpdatedCleanup) eventCleanups.push(messageUpdatedCleanup);\n\n    // ÁõëÂê¨ËÅäÂ§©ÂàáÊç¢\n    const chatChangedCleanup = eventOn(tavern_events.CHAT_CHANGED, () => {\n      loadDialoguesFromTavern();\n      currentDialogIndex.value = 0;\n      isStreaming.value = false;\n      streamingText.value = '';\n      streamingMessageId.value = null;\n    });\n    if (chatChangedCleanup) eventCleanups.push(chatChangedCleanup);\n\n    // ÁõëÂê¨ÊµÅÂºètoken\n    const streamTokenCleanup = eventOn(tavern_events.STREAM_TOKEN_RECEIVED, (text: string) => {\n      handleStreamToken(text);\n    });\n    if (streamTokenCleanup) eventCleanups.push(streamTokenCleanup);\n  }\n});\n\nonUnmounted(() => {\n  document.removeEventListener('fullscreenchange', handleFullscreenChange);\n  window.removeEventListener('resize', handleResize);\n  window.removeEventListener('orientationchange', handleResize);\n  if (autoPlayTimerRef.value) {\n    clearTimeout(autoPlayTimerRef.value);\n    autoPlayTimerRef.value = null;\n  }\n  // Ê∏ÖÁêÜÊâÄÊúâ‰∫ã‰ª∂ÁõëÂê¨Âô®\n  eventCleanups.forEach(cleanup => cleanup());\n  eventCleanups.length = 0;\n});\n\nfunction handleBlackScreenClick(e: MouseEvent) {\n  const rect = (e.currentTarget as HTMLElement).getBoundingClientRect();\n  const clickX = e.clientX - rect.left;\n  const halfWidth = rect.width / 2;\n\n  if (clickX < halfWidth) {\n    if (currentDialogIndex.value > 0) {\n      currentDialogIndex.value--;\n      blackScreen.value = false;\n    }\n  } else {\n    nextDialogue(true);\n  }\n}\n\nfunction handleClick() {\n  if (!showSettings.value && !menuExpanded.value && !showChoices.value) {\n    if (!blackScreen.value) {\n      nextDialogue();\n    }\n  }\n}\n\n/**\n * Ë£ÅÂâ™Ê∂àÊÅØÊñáÊú¨ÔºåÂú® </content> Ê†áÁ≠æ‰πãÂâçÂÅúÊ≠¢\n */\nfunction trimMessageBeforeContentTag(messageText: string): string {\n  // Êü•Êâæ </content> Ê†áÁ≠æÁöÑ‰ΩçÁΩÆ\n  const contentEndIndex = messageText.indexOf('</content>');\n  if (contentEndIndex !== -1) {\n    // Â¶ÇÊûúÂú® </content> ‰πãÂâçÔºåËøîÂõûÊà™ÂèñÁöÑÂÜÖÂÆπÔºàÂåÖÂê´ </content>Ôºâ\n    return messageText.substring(0, contentEndIndex + 10); // 10 ÊòØ '</content>' ÁöÑÈïøÂ∫¶\n  }\n  // Â¶ÇÊûúÊ≤°ÊúâÊâæÂà∞ </content>ÔºåËøîÂõûÂéüÊñáÊú¨\n  return messageText;\n}\n\n// ‰øùÂ≠òÂà∞Ê≠£Êñá‰ΩÜ‰∏çÂèëÈÄÅÔºà‰∏çÂà∑Êñ∞ÁïåÈù¢Ôºâ\nasync function handleSaveToStory(text: string) {\n  try {\n    // Ëé∑ÂèñÂΩìÂâçÊ∂àÊÅØID\n    const currentMessageId = getCurrentMessageId();\n    const chat_message = getChatMessages(currentMessageId)[0];\n\n    if (!chat_message) {\n      console.warn('Êó†Ê≥ïËé∑ÂèñÂΩìÂâçÊ∂àÊÅØ');\n      return;\n    }\n\n    // Ëé∑ÂèñÂΩìÂâçÂú∫ÊôØÔºà‰ªéÂΩìÂâçÂØπËØùÁªßÊâøÔºâ\n    const currentScene = currentDialogue.value?.scene || '{{scene}}';\n\n    // Â∞ÜÊñáÊú¨Ê∑ªÂä†Âà∞Ê∂àÊÅØÊ≠£Êñá‰∏≠Ôºà‰ΩøÁî®Êñ∞Ê†ºÂºèÔºåÁªßÊâøÂú∫ÊôØÔºâ\n    const newMessage = chat_message.message + '\\n\\n[[user||Âú∫ÊôØÔºö' + currentScene + '||Âè∞ËØçÔºö' + text + ']]';\n\n    // ‰ΩøÁî® setChatMessages Êõ¥Êñ∞Ê∂àÊÅØÔºà‰∏çÂà∑Êñ∞ÁïåÈù¢Ôºâ\n    await setChatMessages(\n      [\n        {\n          message_id: currentMessageId,\n          message: newMessage,\n        },\n      ],\n      { refresh: 'none' }, // ‰∏çÂà∑Êñ∞ÁïåÈù¢\n    );\n\n    // Âú®Êú¨Âú∞ÂØπËØùÂàóË°®‰∏≠Ê∑ªÂä†Áî®Êà∑Ê∂àÊÅØÔºà‰∏çÈáçÊñ∞Âä†ËΩΩÔºâ\n    const newDialogue: DialogueItem = {\n      character: '‰Ω†',\n      text,\n      type: 'user',\n      isEditable: true,\n      message_id: getLastMessageId() + 1, // ‰∏¥Êó∂ID\n    };\n\n    const newDialogues = [...dialogues.value];\n    newDialogues.splice(currentDialogIndex.value + 1, 0, newDialogue);\n    dialogues.value = newDialogues;\n\n    // ÁßªÂä®Âà∞Êñ∞ÊèíÂÖ•ÁöÑÂØπËØù\n    currentDialogIndex.value = currentDialogIndex.value + 1;\n\n    console.info('Â∑≤‰øùÂ≠òÂà∞Ê≠£ÊñáÔºà‰∏çÂà∑Êñ∞ÁïåÈù¢Ôºâ:', text);\n  } catch (error) {\n    console.error('‰øùÂ≠òÂà∞Ê≠£ÊñáÂ§±Ë¥•:', error);\n  }\n}\n\n// Ë£ÅÂâ™ÈÄâÈ°πÊñáÊú¨ÔºöÂè™‰øùÁïôË¢´ÈÄâÊã©ÁöÑÈÄâÈ°πÔºåÂà†Èô§Êú™ÈÄâÊã©ÁöÑÈÄâÈ°πÂùó\nasync function trimChoiceText(messageId: number, selectedText: string): Promise<void> {\n  try {\n    const messages = getChatMessages(messageId);\n    if (messages.length === 0) return;\n\n    const originalMessage = messages[0];\n    const messageText = originalMessage.message || '';\n\n    // Êü•ÊâæÊâÄÊúâÈÄâÈ°πÂùó\n    const choiceBlockRegex = /\\[\\[choice\\|\\|([^\\]]+)\\]\\]/g;\n    let match;\n    let newMessageText = messageText;\n    const allChoiceBlocks: Array<{ block: string; parts: string[] }> = [];\n\n    // Êî∂ÈõÜÊâÄÊúâÈÄâÈ°πÂùó\n    while ((match = choiceBlockRegex.exec(messageText)) !== null) {\n      const choiceBlock = match[0];\n      const parts = match[1]\n        .split('||')\n        .map(c => c.trim())\n        .filter(c => c);\n      allChoiceBlocks.push({ block: choiceBlock, parts });\n    }\n\n    // Â§ÑÁêÜÊñ∞Ê†ºÂºèÔºö[[choice||ÈÄâÈ°π1||ËßíËâ≤Âêç||Âè∞ËØç]]\n    const newFormatBlocks = allChoiceBlocks.filter(cb => cb.parts.length >= 3);\n    if (newFormatBlocks.length > 0) {\n      // Âà†Èô§ÊâÄÊúâÊú™ÈÄâÊã©ÁöÑÈÄâÈ°πÂùóÔºåÂè™‰øùÁïôË¢´ÈÄâÊã©ÁöÑÈÄâÈ°πÂùó\n      for (const choiceBlock of newFormatBlocks) {\n        const choiceText = choiceBlock.parts[0];\n        if (choiceText !== selectedText) {\n          // Âà†Èô§Êú™ÈÄâÊã©ÁöÑÈÄâÈ°πÂùó\n          newMessageText = newMessageText.replace(choiceBlock.block, '');\n          console.info('Â∑≤Âà†Èô§Êú™ÈÄâÊã©ÁöÑÈÄâÈ°π:', choiceText);\n        }\n      }\n      // Ê∏ÖÁêÜÂ§ö‰ΩôÁöÑÁ©∫Ë°å\n      newMessageText = newMessageText.replace(/\\n\\s*\\n/g, '\\n').trim();\n    } else {\n      // Â§ÑÁêÜÊóßÊ†ºÂºèÔºö[[choice||ÈÄâÈ°π1||ÈÄâÈ°π2||ÈÄâÈ°π3]]\n      const oldFormatBlocks = allChoiceBlocks.filter(cb => cb.parts.length < 3 && cb.parts.length > 0);\n      for (const choiceBlock of oldFormatBlocks) {\n        const selectedIndex = choiceBlock.parts.findIndex(c => c === selectedText);\n        if (selectedIndex !== -1) {\n          // Âè™‰øùÁïôË¢´ÈÄâÊã©ÁöÑÈÄâÈ°π\n          const trimmedChoiceBlock = `[[choice||${selectedText}]]`;\n          newMessageText = newMessageText.replace(choiceBlock.block, trimmedChoiceBlock);\n          console.info('Â∑≤Ë£ÅÂâ™ÈÄâÈ°πÊñáÊú¨ÔºàÊóßÊ†ºÂºèÔºâÔºåÂè™‰øùÁïôË¢´ÈÄâÊã©ÁöÑÈÄâÈ°π:', selectedText);\n        }\n      }\n    }\n\n    // Â¶ÇÊûúÊ∂àÊÅØÊñáÊú¨ÊúâÂèòÂåñÔºåÊõ¥Êñ∞Ê∂àÊÅØÔºà‰∏çÂà∑Êñ∞ÁïåÈù¢Ôºâ\n    if (newMessageText !== messageText) {\n      await setChatMessages(\n        [\n          {\n            message_id: messageId,\n            message: newMessageText,\n          },\n        ],\n        { refresh: 'none' }, // ‰∏çÂà∑Êñ∞ÁïåÈù¢\n      );\n      console.info('Â∑≤Êõ¥Êñ∞Ê∂àÊÅØÊñáÊú¨Ôºà‰∏çÂà∑Êñ∞ÁïåÈù¢Ôºâ');\n    }\n  } catch (error) {\n    console.error('Ë£ÅÂâ™ÈÄâÈ°πÊñáÊú¨Â§±Ë¥•:', error);\n  }\n}\n\nasync function handleChoiceSelect(id: string, customText?: string) {\n  console.info('ÈÄâÊã©ÈÄâÈ°π:', id, customText);\n\n  // Ëé∑ÂèñÂΩìÂâçÂØπËØùÁöÑÊ∂àÊÅØID\n  const currentMessageId = currentDialogue.value?.message_id;\n  if (currentMessageId === undefined) {\n    console.warn('ÂΩìÂâçÂØπËØùÊ≤°ÊúâÊ∂àÊÅØIDÔºåÊó†Ê≥ïÂèëÈÄÅÊ∂àÊÅØ');\n    nextDialogue();\n    return;\n  }\n\n  try {\n    // Ëé∑ÂèñÊúÄÂêé‰∏ÄÊù°Ê∂àÊÅØÁöÑID\n    const lastMessageId = getLastMessageId();\n\n    // Âà§Êñ≠ÊòØÂê¶ÊâÄÊúâÂØπËØùÊºîÂá∫Âä†ËΩΩÂÆåÊàê\n    const isAllDialoguesLoaded = currentDialogIndex.value >= dialogues.value.length - 1;\n\n    // Á°ÆÂÆöË¶ÅÂèëÈÄÅÁöÑÊñáÊú¨ÂíåÈÄâÈ°π‰ø°ÊÅØ\n    let messageText = '';\n    let selectedOption: ChoiceOption | undefined;\n\n    if (id === 'custom' && customText) {\n      // Ëá™ÂÆö‰πâËæìÂÖ•ÈÄâÈ°π\n      messageText = customText.trim();\n    } else {\n      // Êü•ÊâæÂØπÂ∫îÁöÑÈÄâÈ°π\n      selectedOption = currentDialogue.value?.options?.find(opt => opt.id === id);\n      messageText = selectedOption?.text || '';\n    }\n\n    if (!messageText) {\n      console.warn('Ê∂àÊÅØÊñáÊú¨‰∏∫Á©∫ÔºåÂèñÊ∂àÂèëÈÄÅ');\n      nextDialogue();\n      return;\n    }\n\n    // 1. Ëá™Âä®ËØÜÂà´Âπ∂Ë£ÅÂâ™ÈÄâÈ°πÊñáÊú¨ÔºàÂè™‰øùÁïôË¢´ÈÄâÊã©ÁöÑÈÄâÈ°πÔºåÂà†Èô§ÂÖ∂‰ªñÊú™ÈÄâÊã©ÁöÑÈÄâÈ°πÔºâ\n    await trimChoiceText(currentMessageId, messageText);\n\n    // 2. Â¶ÇÊûúÈÄâÊã©‰∫ÜÈÄâÈ°π‰∏îÊúâËßíËâ≤ÂõûÂ§çÔºåÊòæÁ§∫ËßíËâ≤ÂõûÂ§ç\n    if (selectedOption && selectedOption.character && selectedOption.response) {\n      // Âú®ÂΩìÂâç‰ΩçÁΩÆÂêéÊèíÂÖ•ËßíËâ≤ÂõûÂ§çÂØπËØù\n      const responseDialogue: DialogueItem = {\n        character: selectedOption.character,\n        text: selectedOption.response,\n        type: undefined,\n        message_id: currentMessageId, // ‰ΩøÁî®Áõ∏ÂêåÁöÑÊ∂àÊÅØID\n        role: 'assistant',\n      };\n\n      // ÊèíÂÖ•Âà∞ÂØπËØùÂàóË°®\n      const newDialogues = [...dialogues.value];\n      newDialogues.splice(currentDialogIndex.value + 1, 0, responseDialogue);\n      dialogues.value = newDialogues;\n\n      // ÁßªÂä®Âà∞ËßíËâ≤ÂõûÂ§çÂØπËØù\n      currentDialogIndex.value = currentDialogIndex.value + 1;\n    }\n\n    // 3. Âå∫ÂàÜÊºîÂá∫‰∏≠ÂíåÊºîÂá∫ÂêéÁöÑË°å‰∏∫\n    if (isAllDialoguesLoaded) {\n      // ÊºîÂá∫ÂêéÔºöÁúüÈÄâÈ°πÊ°ÜÔºåË£ÅÂâ™ÂΩìÂâçÊ∂àÊÅØÂπ∂Âú® </content> ‰πãÂâçÂÅúÊ≠¢ÔºåÁÑ∂ÂêéÂà†Èô§ÂêéÁª≠ÂØπËØùÂπ∂Ëß¶Âèë AI ÂõûÂ§ç\n      if (currentMessageId !== undefined) {\n        try {\n          // ÂÖàË£ÅÂâ™ÂΩìÂâçÊ∂àÊÅØÊñáÊú¨ÔºàÂú® </content> Ê†áÁ≠æ‰πãÂâçÂÅúÊ≠¢Ôºâ\n          const messages = getChatMessages(currentMessageId);\n          if (messages.length > 0) {\n            const currentMessage = messages[0];\n            const originalText = currentMessage.message || '';\n            const trimmedText = trimMessageBeforeContentTag(originalText);\n\n            if (trimmedText !== originalText) {\n              await setChatMessages(\n                [\n                  {\n                    message_id: currentMessageId,\n                    message: trimmedText,\n                  },\n                ],\n                { refresh: 'none' },\n              );\n              console.info('Â∑≤Ë£ÅÂâ™Ê∂àÊÅØÊñáÊú¨ÔºàÂú® </content> Ê†áÁ≠æ‰πãÂâçÂÅúÊ≠¢Ôºâ');\n            }\n          }\n        } catch (error) {\n          console.error('Ë£ÅÂâ™Ê∂àÊÅØÊñáÊú¨Â§±Ë¥•:', error);\n        }\n      }\n\n      if (currentMessageId !== undefined && currentMessageId < lastMessageId) {\n        const messagesToDelete: number[] = [];\n        for (let i = currentMessageId + 1; i <= lastMessageId; i++) {\n          messagesToDelete.push(i);\n        }\n        if (messagesToDelete.length > 0) {\n          await deleteChatMessages(messagesToDelete, { refresh: 'all' });\n          console.info(`Â∑≤Âà†Èô§ ${messagesToDelete.length} Êù°ÂêéÁª≠Ê∂àÊÅØ`);\n        }\n      }\n\n      // ÂèëÈÄÅÁî®Êà∑ËæìÂÖ•ÁöÑÊ∂àÊÅØ\n      await createChatMessages(\n        [\n          {\n            role: 'user',\n            message: messageText,\n          },\n        ],\n        { refresh: 'all' },\n      );\n      console.info('Â∑≤ÂèëÈÄÅÁî®Êà∑Ê∂àÊÅØ:', messageText);\n\n      // ÂáÜÂ§áÊµÅÂºèÁïåÈù¢ÔºöÁ´ãÂç≥ÂºÄÂßãÁõëÂê¨ÊµÅÂºètoken\n      const expectedMessageId = getLastMessageId() + 1;\n      isStreaming.value = true;\n      streamingText.value = '';\n      streamingMessageId.value = expectedMessageId;\n\n      // Ëß¶Âèë AI ÁîüÊàêÂõûÂ§ç\n      await triggerSlash('/trigger');\n      console.info('Â∑≤Ëß¶Âèë AI ÁîüÊàê');\n\n      // ÈáçÊñ∞Âä†ËΩΩÂØπËØùÊï∞ÊçÆ\n      await loadDialoguesFromTavern();\n\n      // Ë∑≥ËΩ¨Âà∞ÊúÄÊñ∞ÂØπËØùÔºàÂ¶ÇÊûúÊúâÊñ∞Ê∂àÊÅØÔºâ\n      nextTick(() => {\n        if (dialogues.value.length > 0) {\n          const newMessage = dialogues.value.find(d => d.message_id === expectedMessageId);\n          if (newMessage) {\n            currentDialogIndex.value = dialogues.value.indexOf(newMessage);\n          } else {\n            currentDialogIndex.value = dialogues.value.length - 1;\n          }\n        }\n      });\n    } else {\n      // ÊºîÂá∫‰∏≠ÔºöÂ∏¶ËßíËâ≤ÂõûÂ§çÁöÑÈÄâÈ°πÔºàÊ†ºÂºè1Ôºâ‰ºöÁªßÁª≠ÂâßÊÉÖÊºîÂá∫Ôºå‰∏çËß¶Âèë AI ÂõûÂ§ç\n      // Â¶ÇÊûúÊòØËá™ÂÆö‰πâËæìÂÖ•ÈÄâÈ°πÔºåÂàôË£ÅÂâ™ÂΩìÂâçÊ∂àÊÅØÂπ∂Âú® </content> ‰πãÂâçÂÅúÊ≠¢ÔºåÁÑ∂ÂêéÂà†Èô§ÂêéÁª≠ÂØπËØùÂπ∂Ëß¶Âèë AI ÂõûÂ§ç\n      if (id === 'custom' && customText) {\n        // Ëá™ÂÆö‰πâËæìÂÖ•ÈÄâÈ°πÔºöÂÖàË£ÅÂâ™ÂΩìÂâçÊ∂àÊÅØÊñáÊú¨ÔºàÂú® </content> Ê†áÁ≠æ‰πãÂâçÂÅúÊ≠¢Ôºâ\n        if (currentMessageId !== undefined) {\n          try {\n            const messages = getChatMessages(currentMessageId);\n            if (messages.length > 0) {\n              const currentMessage = messages[0];\n              const originalText = currentMessage.message || '';\n              const trimmedText = trimMessageBeforeContentTag(originalText);\n\n              if (trimmedText !== originalText) {\n                await setChatMessages(\n                  [\n                    {\n                      message_id: currentMessageId,\n                      message: trimmedText,\n                    },\n                  ],\n                  { refresh: 'none' },\n                );\n                console.info('Â∑≤Ë£ÅÂâ™Ê∂àÊÅØÊñáÊú¨ÔºàÂú® </content> Ê†áÁ≠æ‰πãÂâçÂÅúÊ≠¢Ôºâ');\n              }\n            }\n          } catch (error) {\n            console.error('Ë£ÅÂâ™Ê∂àÊÅØÊñáÊú¨Â§±Ë¥•:', error);\n          }\n        }\n\n        // ÁÑ∂ÂêéÂà†Èô§ÂêéÁª≠ÂØπËØùÂπ∂Ëß¶Âèë AI ÂõûÂ§ç\n        if (currentMessageId !== undefined && currentMessageId < lastMessageId) {\n          const messagesToDelete: number[] = [];\n          for (let i = currentMessageId + 1; i <= lastMessageId; i++) {\n            messagesToDelete.push(i);\n          }\n          if (messagesToDelete.length > 0) {\n            await deleteChatMessages(messagesToDelete, { refresh: 'all' });\n            console.info(`Â∑≤Âà†Èô§ ${messagesToDelete.length} Êù°ÂêéÁª≠Ê∂àÊÅØ`);\n          }\n        }\n\n        // ÂèëÈÄÅÁî®Êà∑ËæìÂÖ•ÁöÑÊ∂àÊÅØ\n        await createChatMessages(\n          [\n            {\n              role: 'user',\n              message: messageText,\n            },\n          ],\n          { refresh: 'all' },\n        );\n        console.info('Â∑≤ÂèëÈÄÅÁî®Êà∑Ê∂àÊÅØÔºàËá™ÂÆö‰πâËæìÂÖ•Ôºâ:', messageText);\n\n        // ÂáÜÂ§áÊµÅÂºèÁïåÈù¢\n        const expectedMessageId = getLastMessageId() + 1;\n        isStreaming.value = true;\n        streamingText.value = '';\n        streamingMessageId.value = expectedMessageId;\n\n        // Ëß¶Âèë AI ÁîüÊàêÂõûÂ§ç\n        await triggerSlash('/trigger');\n        console.info('Â∑≤Ëß¶Âèë AI ÁîüÊàêÔºàËá™ÂÆö‰πâËæìÂÖ•Ôºâ');\n\n        // ÈáçÊñ∞Âä†ËΩΩÂØπËØùÊï∞ÊçÆ\n        await loadDialoguesFromTavern();\n\n        // Ë∑≥ËΩ¨Âà∞ÊúÄÊñ∞ÂØπËØù\n        nextTick(() => {\n          if (dialogues.value.length > 0) {\n            const newMessage = dialogues.value.find(d => d.message_id === expectedMessageId);\n            if (newMessage) {\n              currentDialogIndex.value = dialogues.value.indexOf(newMessage);\n            } else {\n              currentDialogIndex.value = dialogues.value.length - 1;\n            }\n          }\n        });\n      } else {\n        // ÊôÆÈÄöÈÄâÈ°πÔºöÂè™ÊòæÁ§∫ËßíËâ≤ÂõûÂ§çÔºå‰∏çÂà†Èô§ÂêéÁª≠ÂØπËØùÔºå‰∏çËß¶Âèë AI ÂõûÂ§ç\n        // ÁªßÁª≠‰∏ã‰∏ÄÊù°ÂØπËØù\n        nextDialogue();\n      }\n    }\n  } catch (error) {\n    console.error('Â§ÑÁêÜÈÄâÊã©Êó∂Âá∫Èîô:', error);\n    isStreaming.value = false;\n    streamingText.value = '';\n    streamingMessageId.value = null;\n    nextDialogue();\n  }\n}\n\n// Ëé∑ÂèñË¶ÅÊòæÁ§∫ÁöÑÊñáÊú¨\nfunction getDisplayText(): string {\n  const dialogue = currentDialogue.value;\n  if (!dialogue) return '';\n\n  // Á°Æ‰øùËøîÂõûÊúâÊïàÊñáÊú¨\n  const text = dialogue.text || dialogue.message || '';\n  if (!text) return '';\n\n  // Â¶ÇÊûúÂΩìÂâçÊ∂àÊÅØÊ≠£Âú®ÊµÅÂºèÂä†ËΩΩ\n  if (isStreaming.value && streamingMessageId.value === dialogue.message_id) {\n    // Âè™ËøîÂõûÊ∂àÊÅØ‰∏≠Â∑≤‰øùÂ≠òÁöÑÊñáÊú¨ÔºàÂ∑≤ÂÆåÊàêÈÉ®ÂàÜÔºâÔºå‰∏çÊòæÁ§∫ÊµÅÂºè‰∏≠ÁöÑÊú™ÂÆåÊàêÈÉ®ÂàÜ\n    return text;\n  }\n\n  // Âê¶ÂàôËøîÂõûÊ∂àÊÅØÁöÑÂÆåÊï¥ÊñáÊú¨\n  return text;\n}\n\n// Â§ÑÁêÜÊµÅÂºètoken\nfunction handleStreamToken(text: string) {\n  if (!isStreaming.value || streamingMessageId.value === null) {\n    return;\n  }\n\n  // Êõ¥Êñ∞ÊµÅÂºèÊñáÊú¨\n  streamingText.value = text;\n}\n\n// ÂéÜÂè≤ÂäüËÉΩÔºöÊòæÁ§∫ÂØπËØùÂéÜÂè≤Âπ∂ÂÖÅËÆ∏Âø´ÈÄüË∑≥ËΩ¨\nconst showHistoryDialog = ref(false);\nconst historyMessages = ref<\n  Array<{\n    id: number;\n    role: string;\n    items: Array<{\n      type: 'character' | 'user' | 'narration' | 'blacktext' | 'choice';\n      character?: string;\n      text: string;\n    }>;\n  }>\n>([]);\n\nasync function handleHistory() {\n  menuExpanded.value = false;\n  showHistoryDialog.value = true;\n\n  try {\n    // Ëé∑ÂèñÊâÄÊúâÊ∂àÊÅØ\n    const lastMessageId = getLastMessageId();\n    const messages: Array<{\n      id: number;\n      role: string;\n      items: Array<{\n        type: 'character' | 'user' | 'narration' | 'blacktext' | 'choice';\n        character?: string;\n        text: string;\n      }>;\n    }> = [];\n\n    for (let i = 0; i <= lastMessageId; i++) {\n      try {\n        const chatMessages = getChatMessages(i);\n        if (chatMessages.length > 0) {\n          const msg = chatMessages[0];\n          const messageText = msg.message || '';\n\n          // Ëß£ÊûêÊ∂àÊÅØÂùó\n          const blocks = await parseMessageBlocks(messageText);\n\n          const items: Array<{\n            type: 'character' | 'user' | 'narration' | 'blacktext' | 'choice';\n            character?: string;\n            text: string;\n          }> = [];\n\n          for (const block of blocks) {\n            if (block.type === 'character' && block.character && block.text) {\n              items.push({\n                type: 'character',\n                character: block.character,\n                text: block.text,\n              });\n            } else if (block.type === 'user') {\n              const userText = 'message' in block ? block.message : block.text;\n              if (userText) {\n                // ‰øùÁïôÂéüÂßãÊñáÊú¨ÔºàÂåÖÂê´ *through* Ê†áËÆ∞ÔºâÔºåÁî®‰∫éÊ†ºÂºèÂåñÊòæÁ§∫\n                items.push({\n                  type: 'user',\n                  character: '‰Ω†',\n                  text: userText,\n                });\n              }\n            } else if (block.type === 'narration') {\n              const narrationText = 'message' in block ? block.message : block.text;\n              if (narrationText) {\n                items.push({\n                  type: 'narration',\n                  text: narrationText,\n                });\n              }\n            } else if (block.type === 'blacktext') {\n              const blackText = 'message' in block ? block.message : block.text;\n              if (blackText) {\n                items.push({\n                  type: 'blacktext',\n                  text: blackText,\n                });\n              }\n            } else if (block.type === 'choice' && (block.choiceText || block.text)) {\n              items.push({\n                type: 'choice',\n                text: block.choiceText || block.text || '',\n              });\n            }\n          }\n\n          // Â¶ÇÊûúÊ≤°ÊúâËß£ÊûêÂà∞‰ªª‰ΩïÂùóÔºå‰ΩøÁî®ÂéüÂßãÊ∂àÊÅØÊñáÊú¨\n          if (items.length === 0) {\n            const cleanText = messageText\n              .replace(/\\[\\[[^\\]]+\\]\\]/g, '')\n              .replace(/<[^>]+>/g, '')\n              .trim();\n            if (cleanText) {\n              items.push({\n                type: msg.role === 'user' ? 'user' : 'character',\n                character: msg.role === 'user' ? '‰Ω†' : 'AI',\n                text: cleanText,\n              });\n            }\n          }\n\n          if (items.length > 0) {\n            messages.push({\n              id: i,\n              role: msg.role || 'user',\n              items,\n            });\n          }\n        }\n      } catch (error) {\n        // ÂøΩÁï•Âçï‰∏™Ê∂àÊÅØËé∑ÂèñÂ§±Ë¥•\n        console.warn(`Ëé∑ÂèñÊ∂àÊÅØ ${i} Â§±Ë¥•:`, error);\n      }\n    }\n\n    historyMessages.value = messages.reverse(); // ÊúÄÊñ∞ÁöÑÂú®Ââç\n    console.info(`Â∑≤Âä†ËΩΩ ${historyMessages.value.length} Êù°ÂéÜÂè≤Ê∂àÊÅØ`);\n  } catch (error) {\n    console.error('Âä†ËΩΩÂéÜÂè≤Ê∂àÊÅØÂ§±Ë¥•:', error);\n  }\n}\n\n// Ê†ºÂºèÂåñÁî®Êà∑ÊñáÊú¨ÔºåÂ§ÑÁêÜ *ÊòüÂè∑ÂåÖË£π* ÁöÑÂÜÖÂøÉÊÉ≥Ê≥ï\nfunction formatUserText(text: string): string {\n  if (!text) return '';\n\n  // Â∞Ü *ÊòüÂè∑ÂåÖË£π* ÁöÑÂÜÖÂÆπËΩ¨Êç¢‰∏∫Êñú‰ΩìÁÅ∞Ëâ≤ÔºàÂÜÖÂøÉÊÉ≥Ê≥ïÔºâÔºåÂ∑¶Âè≥Á®çÂæÆÁ©∫Âá∫Êù•‰∏ÄÁÇπ\n  // ÂåπÈÖç *ÂÜÖÂÆπ* Ê†ºÂºèÔºàÊéíÈô§ *through* Ê†áËÆ∞Ôºâ\n  return text.replace(/\\*([^*]+)\\*/g, (match, content) => {\n    // Â¶ÇÊûúÊòØ *through* Ê†áËÆ∞ÔºåË∑≥Ëøá\n    if (content.trim() === 'through') return match;\n    // ËΩ¨Êç¢‰∏∫ÂÜÖÂøÉÊÉ≥Ê≥ïÊ†ºÂºèÔºàÊñú‰ΩìÁÅ∞Ëâ≤ÔºåÂ∑¶Âè≥ÁïôÁ©∫Ôºâ\n    return ` <span style=\"color: #9ca3af; font-style: italic;\">${content}</span> `;\n  });\n}\n\n// Ë∑≥ËΩ¨Âà∞ÊåáÂÆöÁöÑÂéÜÂè≤Ê∂àÊÅØ\nasync function jumpToHistoryMessage(messageId: number) {\n  try {\n    // ÂÖ≥Èó≠ÂéÜÂè≤ÂØπËØùÊ°Ü\n    showHistoryDialog.value = false;\n\n    // ÈáçÊñ∞Âä†ËΩΩÂØπËØùÊï∞ÊçÆ\n    await loadDialoguesFromTavern();\n\n    // ÊâæÂà∞ÂØπÂ∫îÁöÑÂØπËØùÁ¥¢Âºï\n    const dialogueIndex = dialogues.value.findIndex(d => d.message_id === messageId);\n    if (dialogueIndex >= 0) {\n      currentDialogIndex.value = dialogueIndex;\n      console.info(`Â∑≤Ë∑≥ËΩ¨Âà∞Ê∂àÊÅØ ${messageId}ÔºàÁ¥¢Âºï ${dialogueIndex}Ôºâ`);\n    } else {\n      console.warn(`Êú™ÊâæÂà∞Ê∂àÊÅØ ${messageId} ÂØπÂ∫îÁöÑÂØπËØù`);\n    }\n  } catch (error) {\n    console.error('Ë∑≥ËΩ¨Âà∞ÂéÜÂè≤Ê∂àÊÅØÂ§±Ë¥•:', error);\n  }\n}\n\nfunction handleSaveStyle() {\n  dialogStyle.value = { ...previewStyle.value };\n}\n\nfunction handleSettingsClick() {\n  if (menuExpanded.value) {\n    if (!customModeEnabled.value) {\n      previewStyle.value = { ...dialogStyle.value };\n    }\n    showSettings.value = true;\n    menuExpanded.value = false;\n  } else {\n    menuExpanded.value = true;\n  }\n}\n\nfunction handleCharacterClick() {\n  // Â¶ÇÊûúËèúÂçïÂ∑≤Â±ïÂºÄÔºåÁÇπÂáªËßíËâ≤ÊåâÈíÆÊâìÂºÄÁä∂ÊÄÅÊ†è\n  if (characterMenuExpanded.value) {\n    showCharacterPanel.value = true;\n    characterMenuExpanded.value = false;\n  } else {\n    // Âê¶ÂàôÂ±ïÂºÄËèúÂçï\n    characterMenuExpanded.value = true;\n  }\n}\n\nfunction handleInputClick() {\n  showInputBox.value = true;\n  characterMenuExpanded.value = false;\n  // ËÅöÁÑ¶ËæìÂÖ•Ê°Ü\n  nextTick(() => {\n    inputRef.value?.focus();\n  });\n}\n\n// ÂèëÈÄÅËæìÂÖ•Ôºà‰∏çÂà∑Êñ∞ÁïåÈù¢Ôºâ\nasync function handleSendInput() {\n  if (!inputText.value.trim()) return;\n\n  const text = inputText.value.trim();\n  inputText.value = '';\n  showInputBox.value = false;\n\n  // Âà§Êñ≠ÊòØÂê¶ÊâÄÊúâÂØπËØùÊºîÂá∫Âä†ËΩΩÂÆåÊàê\n  const isAllDialoguesLoaded = currentDialogIndex.value >= dialogues.value.length - 1;\n  const currentMessageId = currentDialogue.value?.message_id;\n  const lastMessageId = getLastMessageId();\n\n  // Â¶ÇÊûúÊºîÂá∫‰∏≠ÔºàËøòÊúâÂêéÁª≠ÂØπËØùÔºâÔºåÂÖàË£ÅÂâ™‰πãÂêéÁöÑÂâßÊÉÖÊñáÊú¨ÔºàÂú® </content> Ê†áÁ≠æ‰πãÂâçÂÅúÊ≠¢Ôºâ\n  if (!isAllDialoguesLoaded && currentMessageId !== undefined) {\n    try {\n      // Ëé∑ÂèñÂΩìÂâçÊ∂àÊÅØÁöÑÂÆåÊï¥ÊñáÊú¨\n      const messages = getChatMessages(currentMessageId);\n      if (messages.length > 0) {\n        const currentMessage = messages[0];\n        const originalText = currentMessage.message || '';\n\n        // Ë£ÅÂâ™Ê∂àÊÅØÊñáÊú¨ÔºàÂú® </content> Ê†áÁ≠æ‰πãÂâçÂÅúÊ≠¢Ôºâ\n        const trimmedText = trimMessageBeforeContentTag(originalText);\n\n        // Â¶ÇÊûúÊúâË£ÅÂâ™ÔºàÊñáÊú¨ÂèëÁîüÂèòÂåñÔºâÔºåÊõ¥Êñ∞Ê∂àÊÅØ\n        if (trimmedText !== originalText) {\n          await setChatMessages(\n            [\n              {\n                message_id: currentMessageId,\n                message: trimmedText,\n              },\n            ],\n            { refresh: 'none' }, // ‰∏çÂà∑Êñ∞ÁïåÈù¢\n          );\n          console.info('Â∑≤Ë£ÅÂâ™Ê∂àÊÅØÊñáÊú¨ÔºàÂú® </content> Ê†áÁ≠æ‰πãÂâçÂÅúÊ≠¢Ôºâ');\n        }\n      }\n\n      // Âà†Èô§ÂΩìÂâçÊ∂àÊÅØ‰πãÂêéÁöÑÊâÄÊúâÊ∂àÊÅØ\n      if (currentMessageId < lastMessageId) {\n        const messagesToDelete: number[] = [];\n        for (let i = currentMessageId + 1; i <= lastMessageId; i++) {\n          messagesToDelete.push(i);\n        }\n        if (messagesToDelete.length > 0) {\n          await deleteChatMessages(messagesToDelete, { refresh: 'all' });\n          console.info(`Â∑≤Âà†Èô§ ${messagesToDelete.length} Êù°ÂêéÁª≠Ê∂àÊÅØ`);\n        }\n      }\n    } catch (error) {\n      console.error('Ë£ÅÂâ™ÂíåÂà†Èô§ÂêéÁª≠Ê∂àÊÅØÂ§±Ë¥•:', error);\n    }\n  }\n\n  // Âú®ÂΩìÂâç‰ΩçÁΩÆÂêéÊèíÂÖ•Áî®Êà∑ÂØπËØù\n  const newDialogue: DialogueItem = {\n    character: '‰Ω†',\n    text,\n    type: 'user',\n    isEditable: true,\n    message_id: getLastMessageId() + 1, // ‰∏¥Êó∂IDÔºåÂÆûÈôÖ‰ºö‰ªéÈÖíÈ¶ÜËé∑Âèñ\n  };\n\n  // ÊèíÂÖ•Âà∞ÂØπËØùÂàóË°®\n  const newDialogues = [...dialogues.value];\n  newDialogues.splice(currentDialogIndex.value + 1, 0, newDialogue);\n  dialogues.value = newDialogues;\n\n  // ÁßªÂä®Âà∞Êñ∞ÊèíÂÖ•ÁöÑÂØπËØù\n  currentDialogIndex.value = currentDialogIndex.value + 1;\n\n  // ÂèëÈÄÅÂà∞ÈÖíÈ¶ÜÂπ∂Ëß¶Âèë AI ÂõûÂ§ç\n  try {\n    // Âú®ÂèëÈÄÅÂâçÂ∫îÁî®ÊâÄÊúâÁºñËæëÂíåÂà†Èô§Êìç‰Ωú\n    await applyUserMessageEdits();\n\n    // Ëé∑ÂèñÂΩìÂâçÂú∫ÊôØÔºà‰ªéÂΩìÂâçÂØπËØùÁªßÊâøÔºâ\n    const currentScene = currentDialogue.value?.scene || '{{scene}}';\n\n    // ‰ΩøÁî®Êñ∞Ê†ºÂºèÊ†ºÂºèÂåñÁî®Êà∑Ê∂àÊÅØ\n    const formattedMessage = `[[user||Âú∫ÊôØÔºö${currentScene}||Âè∞ËØçÔºö${text}]]`;\n\n    await createChatMessages(\n      [\n        {\n          role: 'user',\n          message: formattedMessage,\n        },\n      ],\n      { refresh: 'all' }, // Âà∑Êñ∞ÁïåÈù¢‰ª•Ëß¶Âèë AI ÂõûÂ§ç\n    );\n    console.info('Â∑≤ÂèëÈÄÅÁî®Êà∑Ê∂àÊÅØ:', text);\n\n    // ÂáÜÂ§áÊµÅÂºèÁïåÈù¢ÔºöÁ´ãÂç≥ÂºÄÂßãÁõëÂê¨ÊµÅÂºètoken\n    const expectedMessageId = getLastMessageId() + 1;\n    isStreaming.value = true;\n    streamingText.value = '';\n    streamingMessageId.value = expectedMessageId;\n\n    // Ëß¶Âèë AI ÁîüÊàêÂõûÂ§ç\n    await triggerSlash('/trigger');\n    console.info('Â∑≤Ëß¶Âèë AI ÁîüÊàê');\n\n    // ÈáçÊñ∞Âä†ËΩΩÂØπËØùÊï∞ÊçÆ\n    await loadDialoguesFromTavern();\n\n    // Ë∑≥ËΩ¨Âà∞ÊúÄÊñ∞ÂØπËØùÔºàÂ¶ÇÊûúÊúâÊñ∞Ê∂àÊÅØÔºâ\n    nextTick(() => {\n      if (dialogues.value.length > 0) {\n        const newMessage = dialogues.value.find(d => d.message_id === expectedMessageId);\n        if (newMessage) {\n          currentDialogIndex.value = dialogues.value.indexOf(newMessage);\n        } else {\n          currentDialogIndex.value = dialogues.value.length - 1;\n        }\n      }\n    });\n  } catch (error) {\n    console.error('ÂèëÈÄÅÊ∂àÊÅØÂ§±Ë¥•:', error);\n    isStreaming.value = false;\n    streamingText.value = '';\n    streamingMessageId.value = null;\n  }\n}\n\n// ‰øùÂ≠òËæìÂÖ•Âà∞Ê≠£ÊñáÔºà‰∏çÂèëÈÄÅÔºâ\nasync function handleSaveInput() {\n  if (!inputText.value.trim()) return;\n\n  const text = inputText.value.trim();\n  inputText.value = '';\n  showInputBox.value = false;\n\n  // ‰øùÂ≠òÂà∞ÂΩìÂâçÊ∂àÊÅØÁöÑÊ≠£Êñá‰∏≠\n  await handleSaveToStory(text);\n}\n\n// ÁºñËæëÁî®Êà∑Ê∂àÊÅØÔºàÁ´ãÂç≥ÂêåÊ≠•Âà∞Ê•ºÂ±ÇÊ∂àÊÅØÊñáÊú¨Ôºå‰∏çÂà∑Êñ∞ÁïåÈù¢Ôºâ\nasync function handleEditUserMessage(messageId: number, newText: string) {\n  try {\n    // Á´ãÂç≥ÂêåÊ≠•Âà∞Ê•ºÂ±ÇÊ∂àÊÅØÊñáÊú¨Ôºà‰∏çÂà∑Êñ∞ÁïåÈù¢Ôºâ\n    await syncEditToMessage(messageId, newText);\n\n    // ÂêåÊó∂Â≠òÂÇ®Âú®ÂÜÖÂ≠ò‰∏≠ÔºåÁî®‰∫éÂêéÁª≠ÂèëÈÄÅÊó∂Â∫îÁî®\n    userMessageEdits.value.set(messageId, { text: newText });\n\n    // Êõ¥Êñ∞Êú¨Âú∞ÂØπËØùÂàóË°®‰∏≠ÁöÑÊòæÁ§∫Ôºà‰ªÖÁî®‰∫éUIÊòæÁ§∫Ôºâ\n    const dialogueIndex = dialogues.value.findIndex(d => d.message_id === messageId);\n    if (dialogueIndex !== -1) {\n      const newDialogues = [...dialogues.value];\n      newDialogues[dialogueIndex] = {\n        ...newDialogues[dialogueIndex],\n        text: newText,\n      };\n      dialogues.value = newDialogues;\n    }\n\n    console.info('Â∑≤ÂêåÊ≠•ÁºñËæëÂà∞Ê•ºÂ±ÇÊ∂àÊÅØÔºà‰∏çÂà∑Êñ∞ÁïåÈù¢Ôºâ:', messageId, newText);\n  } catch (error) {\n    console.error('ÁºñËæëÁî®Êà∑Ê∂àÊÅØÂ§±Ë¥•:', error);\n  }\n}\n\n// Âà†Èô§Áî®Êà∑Ê∂àÊÅØ\nasync function handleDeleteUserMessage(messageId: number) {\n  try {\n    // Âè™Â≠òÂÇ®Âú®ÂÜÖÂ≠ò‰∏≠Ôºå‰∏çÁ´ãÂç≥Âà†Èô§ÈÖíÈ¶ÜÊ∂àÊÅØ\n    userMessageEdits.value.set(messageId, { deleted: true });\n\n    // ‰ªéÊú¨Âú∞ÂØπËØùÂàóË°®‰∏≠ÁßªÈô§Ôºà‰ªÖÁî®‰∫éUIÊòæÁ§∫Ôºâ\n    const dialogueIndex = dialogues.value.findIndex(d => d.message_id === messageId);\n    if (dialogueIndex !== -1) {\n      const newDialogues = [...dialogues.value];\n      newDialogues.splice(dialogueIndex, 1);\n      dialogues.value = newDialogues;\n      // Ë∞ÉÊï¥ÂΩìÂâçÁ¥¢Âºï\n      if (currentDialogIndex.value >= newDialogues.length) {\n        currentDialogIndex.value = Math.max(0, newDialogues.length - 1);\n      }\n    }\n\n    console.info('Â∑≤ÊöÇÂ≠òÂà†Èô§ÔºàÂÜÖÂ≠ò‰∏≠Ôºâ:', messageId);\n  } catch (error) {\n    console.error('Âà†Èô§Áî®Êà∑Ê∂àÊÅØÂ§±Ë¥•:', error);\n  }\n}\n\n// Âú®ÂèëÈÄÅÊ∂àÊÅØÂâçÂ∫îÁî®ÊâÄÊúâÁºñËæëÂíåÂà†Èô§Êìç‰ΩúÔºà‰∏çÂà∑Êñ∞ÁïåÈù¢Ôºâ\nasync function applyUserMessageEdits() {\n  if (userMessageEdits.value.size === 0) return;\n\n  try {\n    // Â∫îÁî®ÊâÄÊúâÁºñËæë\n    for (const [messageId, edit] of userMessageEdits.value.entries()) {\n      if (edit.deleted) {\n        // Âà†Èô§Ê∂àÊÅØÔºà‰∏çÂà∑Êñ∞ÁïåÈù¢Ôºâ\n        await deleteChatMessages([messageId], { refresh: 'none' });\n        console.info('Â∑≤Â∫îÁî®Âà†Èô§Ôºà‰∏çÂà∑Êñ∞ÁïåÈù¢Ôºâ:', messageId);\n      } else if (edit.text) {\n        // ÁºñËæëÊ∂àÊÅØÔºà‰∏çÂà∑Êñ∞ÁïåÈù¢Ôºâ\n        // ‰ΩøÁî®Áõ∏ÂêåÁöÑÈÄªËæëÂêåÊ≠•ÁºñËæë\n        await syncEditToMessage(messageId, edit.text);\n        console.info('Â∑≤Â∫îÁî®ÁºñËæëÔºà‰∏çÂà∑Êñ∞ÁïåÈù¢Ôºâ:', messageId);\n      }\n    }\n\n    // Ê∏ÖÁ©∫ÁºñËæëËÆ∞ÂΩï\n    userMessageEdits.value.clear();\n\n    // ‰∏çÈáçÊñ∞Âä†ËΩΩÂØπËØùÔºå‰øùÊåÅÁïåÈù¢Áä∂ÊÄÅ\n  } catch (error) {\n    console.error('Â∫îÁî®Áî®Êà∑Ê∂àÊÅØÁºñËæëÂ§±Ë¥•:', error);\n  }\n}\n\n// Á´ãÂç≥ÂêåÊ≠•ÁºñËæëÂà∞Ê•ºÂ±ÇÊ∂àÊÅØÊñáÊú¨Ôºà‰∏çÂà∑Êñ∞ÁïåÈù¢Ôºâ\nasync function syncEditToMessage(messageId: number, newText: string) {\n  try {\n    const messages = getChatMessages(messageId);\n    if (messages.length > 0) {\n      const originalMessage = messages[0];\n      const messageText = originalMessage.message || '';\n\n      // ÊèêÂèñ <content> Ê†áÁ≠æ‰∏≠ÁöÑÂÜÖÂÆπ\n      const contentMatch = messageText.match(/<content>([\\s\\S]*?)<\\/content>/i);\n      const contentText = contentMatch ? contentMatch[1] : messageText;\n\n      // ÂåπÈÖçÊâÄÊúâ [[user||...]] Ê†ºÂºèÁöÑÂùóÔºà‰ΩøÁî®ÈùûË¥™Â©™ÂåπÈÖçÔºåÁ°Æ‰øùËÉΩÂåπÈÖçÂà∞ÂÆåÊï¥ÁöÑÂùóÔºâ\n      const userBlockRegex = /\\[\\[user\\|\\|([^\\]]+)\\]\\]/g;\n      let match;\n      let newMessageText = messageText;\n      let foundMatch = false;\n\n      // Êü•ÊâæÂπ∂ÊõøÊç¢Á¨¨‰∏Ä‰∏™ user Âùó\n      while ((match = userBlockRegex.exec(contentText)) !== null) {\n        const content = match[1];\n        // Ëß£ÊûêÈîÆÂÄºÂØπ\n        const kvPairs: Record<string, string> = {};\n        const parts = content\n          .split('||')\n          .map(p => p.trim())\n          .filter(p => p);\n        for (const part of parts) {\n          const kvMatch = part.match(/^([^Ôºö:]+)[Ôºö:]\\s*(.+)$/);\n          if (kvMatch) {\n            const key = kvMatch[1].trim();\n            const value = kvMatch[2].trim();\n            if (key && value) {\n              kvPairs[key] = value;\n            }\n          }\n        }\n\n        // Â¶ÇÊûúÊâæÂà∞‰∫Ü user ÂùóÔºàÊúâÂú∫ÊôØÊàñÂè∞ËØçÂ≠óÊÆµÔºâÔºåÊõøÊç¢ÂÆÉ\n        if (\n          kvPairs['Âú∫ÊôØ'] ||\n          kvPairs['scene'] ||\n          kvPairs['Âè∞ËØç'] ||\n          kvPairs['Áî®Êà∑Ê∂àÊÅØ'] ||\n          kvPairs['Ê∂àÊÅØ'] ||\n          kvPairs['text']\n        ) {\n          const scene = kvPairs['Âú∫ÊôØ'] || kvPairs['scene'] || '{{scene}}';\n          const oldBlock = match[0];\n          // ‰ΩøÁî®Áî®Êà∑ÁºñËæëÂêéÁöÑÊñáÊú¨ÔºàÂèØËÉΩÂåÖÂê´*ÊòüÂè∑ÂåÖË£π*Âíå„Äê„ÄëÂåÖË£πÁöÑÂÜÖÂÆπÔºâ\n          const newBlock = `[[user||Âú∫ÊôØÔºö${scene}||Âè∞ËØçÔºö${newText}]]`;\n\n          // Â¶ÇÊûúÂú® <content> Ê†áÁ≠æÂÜÖÔºåÈúÄË¶ÅÊõøÊç¢ contentText ‰∏≠ÁöÑÂÜÖÂÆπ\n          if (contentMatch) {\n            const newContentText = contentText.replace(oldBlock, newBlock);\n            newMessageText = messageText.replace(contentMatch[0], `<content>${newContentText}</content>`);\n          } else {\n            newMessageText = messageText.replace(oldBlock, newBlock);\n          }\n          foundMatch = true;\n          break;\n        }\n      }\n\n      // Â¶ÇÊûúÊ≤°ÊúâÊâæÂà∞ÂåπÈÖçÁöÑÂùóÔºåÂú® <content> Ê†áÁ≠æÂÜÖÊ∑ªÂä†Êñ∞Ê†ºÂºè\n      if (!foundMatch) {\n        if (contentMatch) {\n          const newContentText = contentText + `\\n[[user||Âú∫ÊôØÔºö{{scene}}||Âè∞ËØçÔºö${newText}]]`;\n          newMessageText = messageText.replace(contentMatch[0], `<content>${newContentText}</content>`);\n        } else {\n          newMessageText = messageText + `\\n[[user||Âú∫ÊôØÔºö{{scene}}||Âè∞ËØçÔºö${newText}]]`;\n        }\n      }\n\n      await setChatMessages(\n        [\n          {\n            message_id: messageId,\n            message: newMessageText,\n          },\n        ],\n        { refresh: 'none' }, // ‰∏çÂà∑Êñ∞ÁïåÈù¢\n      );\n      console.info('Â∑≤ÂêåÊ≠•ÁºñËæëÂà∞Ê•ºÂ±ÇÊ∂àÊÅØÔºà‰∏çÂà∑Êñ∞ÁïåÈù¢Ôºâ:', messageId, newText);\n    }\n  } catch (error) {\n    console.error('ÂêåÊ≠•ÁºñËæëÂà∞Ê•ºÂ±ÇÊ∂àÊÅØÂ§±Ë¥•:', error);\n  }\n}\n</script>\n\n<style scoped>\n/* ÂéÜÂè≤ÂØπËØùÊ°ÜÊªöÂä®ÂÆπÂô® - ÈöêËóèÊªöÂä®Êù°‰ΩÜ‰øùÊåÅÊªöÂä®ÂäüËÉΩ */\n.history-scroll-container {\n  scrollbar-width: none; /* Firefox */\n  -ms-overflow-style: none; /* IE and Edge */\n}\n\n.history-scroll-container::-webkit-scrollbar {\n  display: none; /* Chrome, Safari, Opera */\n}\n\n/* ÂéÜÂè≤Ê∂àÊÅØÈ°πÊ†∑Âºè */\n.history-message-item {\n  position: relative;\n  margin-bottom: 0;\n}\n\n.history-message-item:hover {\n  background-color: rgba(0, 0, 0, 0.04);\n}\n</style>\n",null,"@layer theme, base, components, utilities;\n\n@layer theme {\n  @theme default {\n    --font-sans:\n      ui-sans-serif, system-ui, sans-serif, \"Apple Color Emoji\",\n      \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\";\n    --font-serif: ui-serif, Georgia, Cambria, \"Times New Roman\", Times, serif;\n    --font-mono:\n      ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\",\n      \"Courier New\", monospace;\n\n    --color-red-50: oklch(97.1% 0.013 17.38);\n    --color-red-100: oklch(93.6% 0.032 17.717);\n    --color-red-200: oklch(88.5% 0.062 18.334);\n    --color-red-300: oklch(80.8% 0.114 19.571);\n    --color-red-400: oklch(70.4% 0.191 22.216);\n    --color-red-500: oklch(63.7% 0.237 25.331);\n    --color-red-600: oklch(57.7% 0.245 27.325);\n    --color-red-700: oklch(50.5% 0.213 27.518);\n    --color-red-800: oklch(44.4% 0.177 26.899);\n    --color-red-900: oklch(39.6% 0.141 25.723);\n    --color-red-950: oklch(25.8% 0.092 26.042);\n\n    --color-orange-50: oklch(98% 0.016 73.684);\n    --color-orange-100: oklch(95.4% 0.038 75.164);\n    --color-orange-200: oklch(90.1% 0.076 70.697);\n    --color-orange-300: oklch(83.7% 0.128 66.29);\n    --color-orange-400: oklch(75% 0.183 55.934);\n    --color-orange-500: oklch(70.5% 0.213 47.604);\n    --color-orange-600: oklch(64.6% 0.222 41.116);\n    --color-orange-700: oklch(55.3% 0.195 38.402);\n    --color-orange-800: oklch(47% 0.157 37.304);\n    --color-orange-900: oklch(40.8% 0.123 38.172);\n    --color-orange-950: oklch(26.6% 0.079 36.259);\n\n    --color-amber-50: oklch(98.7% 0.022 95.277);\n    --color-amber-100: oklch(96.2% 0.059 95.617);\n    --color-amber-200: oklch(92.4% 0.12 95.746);\n    --color-amber-300: oklch(87.9% 0.169 91.605);\n    --color-amber-400: oklch(82.8% 0.189 84.429);\n    --color-amber-500: oklch(76.9% 0.188 70.08);\n    --color-amber-600: oklch(66.6% 0.179 58.318);\n    --color-amber-700: oklch(55.5% 0.163 48.998);\n    --color-amber-800: oklch(47.3% 0.137 46.201);\n    --color-amber-900: oklch(41.4% 0.112 45.904);\n    --color-amber-950: oklch(27.9% 0.077 45.635);\n\n    --color-yellow-50: oklch(98.7% 0.026 102.212);\n    --color-yellow-100: oklch(97.3% 0.071 103.193);\n    --color-yellow-200: oklch(94.5% 0.129 101.54);\n    --color-yellow-300: oklch(90.5% 0.182 98.111);\n    --color-yellow-400: oklch(85.2% 0.199 91.936);\n    --color-yellow-500: oklch(79.5% 0.184 86.047);\n    --color-yellow-600: oklch(68.1% 0.162 75.834);\n    --color-yellow-700: oklch(55.4% 0.135 66.442);\n    --color-yellow-800: oklch(47.6% 0.114 61.907);\n    --color-yellow-900: oklch(42.1% 0.095 57.708);\n    --color-yellow-950: oklch(28.6% 0.066 53.813);\n\n    --color-lime-50: oklch(98.6% 0.031 120.757);\n    --color-lime-100: oklch(96.7% 0.067 122.328);\n    --color-lime-200: oklch(93.8% 0.127 124.321);\n    --color-lime-300: oklch(89.7% 0.196 126.665);\n    --color-lime-400: oklch(84.1% 0.238 128.85);\n    --color-lime-500: oklch(76.8% 0.233 130.85);\n    --color-lime-600: oklch(64.8% 0.2 131.684);\n    --color-lime-700: oklch(53.2% 0.157 131.589);\n    --color-lime-800: oklch(45.3% 0.124 130.933);\n    --color-lime-900: oklch(40.5% 0.101 131.063);\n    --color-lime-950: oklch(27.4% 0.072 132.109);\n\n    --color-green-50: oklch(98.2% 0.018 155.826);\n    --color-green-100: oklch(96.2% 0.044 156.743);\n    --color-green-200: oklch(92.5% 0.084 155.995);\n    --color-green-300: oklch(87.1% 0.15 154.449);\n    --color-green-400: oklch(79.2% 0.209 151.711);\n    --color-green-500: oklch(72.3% 0.219 149.579);\n    --color-green-600: oklch(62.7% 0.194 149.214);\n    --color-green-700: oklch(52.7% 0.154 150.069);\n    --color-green-800: oklch(44.8% 0.119 151.328);\n    --color-green-900: oklch(39.3% 0.095 152.535);\n    --color-green-950: oklch(26.6% 0.065 152.934);\n\n    --color-emerald-50: oklch(97.9% 0.021 166.113);\n    --color-emerald-100: oklch(95% 0.052 163.051);\n    --color-emerald-200: oklch(90.5% 0.093 164.15);\n    --color-emerald-300: oklch(84.5% 0.143 164.978);\n    --color-emerald-400: oklch(76.5% 0.177 163.223);\n    --color-emerald-500: oklch(69.6% 0.17 162.48);\n    --color-emerald-600: oklch(59.6% 0.145 163.225);\n    --color-emerald-700: oklch(50.8% 0.118 165.612);\n    --color-emerald-800: oklch(43.2% 0.095 166.913);\n    --color-emerald-900: oklch(37.8% 0.077 168.94);\n    --color-emerald-950: oklch(26.2% 0.051 172.552);\n\n    --color-teal-50: oklch(98.4% 0.014 180.72);\n    --color-teal-100: oklch(95.3% 0.051 180.801);\n    --color-teal-200: oklch(91% 0.096 180.426);\n    --color-teal-300: oklch(85.5% 0.138 181.071);\n    --color-teal-400: oklch(77.7% 0.152 181.912);\n    --color-teal-500: oklch(70.4% 0.14 182.503);\n    --color-teal-600: oklch(60% 0.118 184.704);\n    --color-teal-700: oklch(51.1% 0.096 186.391);\n    --color-teal-800: oklch(43.7% 0.078 188.216);\n    --color-teal-900: oklch(38.6% 0.063 188.416);\n    --color-teal-950: oklch(27.7% 0.046 192.524);\n\n    --color-cyan-50: oklch(98.4% 0.019 200.873);\n    --color-cyan-100: oklch(95.6% 0.045 203.388);\n    --color-cyan-200: oklch(91.7% 0.08 205.041);\n    --color-cyan-300: oklch(86.5% 0.127 207.078);\n    --color-cyan-400: oklch(78.9% 0.154 211.53);\n    --color-cyan-500: oklch(71.5% 0.143 215.221);\n    --color-cyan-600: oklch(60.9% 0.126 221.723);\n    --color-cyan-700: oklch(52% 0.105 223.128);\n    --color-cyan-800: oklch(45% 0.085 224.283);\n    --color-cyan-900: oklch(39.8% 0.07 227.392);\n    --color-cyan-950: oklch(30.2% 0.056 229.695);\n\n    --color-sky-50: oklch(97.7% 0.013 236.62);\n    --color-sky-100: oklch(95.1% 0.026 236.824);\n    --color-sky-200: oklch(90.1% 0.058 230.902);\n    --color-sky-300: oklch(82.8% 0.111 230.318);\n    --color-sky-400: oklch(74.6% 0.16 232.661);\n    --color-sky-500: oklch(68.5% 0.169 237.323);\n    --color-sky-600: oklch(58.8% 0.158 241.966);\n    --color-sky-700: oklch(50% 0.134 242.749);\n    --color-sky-800: oklch(44.3% 0.11 240.79);\n    --color-sky-900: oklch(39.1% 0.09 240.876);\n    --color-sky-950: oklch(29.3% 0.066 243.157);\n\n    --color-blue-50: oklch(97% 0.014 254.604);\n    --color-blue-100: oklch(93.2% 0.032 255.585);\n    --color-blue-200: oklch(88.2% 0.059 254.128);\n    --color-blue-300: oklch(80.9% 0.105 251.813);\n    --color-blue-400: oklch(70.7% 0.165 254.624);\n    --color-blue-500: oklch(62.3% 0.214 259.815);\n    --color-blue-600: oklch(54.6% 0.245 262.881);\n    --color-blue-700: oklch(48.8% 0.243 264.376);\n    --color-blue-800: oklch(42.4% 0.199 265.638);\n    --color-blue-900: oklch(37.9% 0.146 265.522);\n    --color-blue-950: oklch(28.2% 0.091 267.935);\n\n    --color-indigo-50: oklch(96.2% 0.018 272.314);\n    --color-indigo-100: oklch(93% 0.034 272.788);\n    --color-indigo-200: oklch(87% 0.065 274.039);\n    --color-indigo-300: oklch(78.5% 0.115 274.713);\n    --color-indigo-400: oklch(67.3% 0.182 276.935);\n    --color-indigo-500: oklch(58.5% 0.233 277.117);\n    --color-indigo-600: oklch(51.1% 0.262 276.966);\n    --color-indigo-700: oklch(45.7% 0.24 277.023);\n    --color-indigo-800: oklch(39.8% 0.195 277.366);\n    --color-indigo-900: oklch(35.9% 0.144 278.697);\n    --color-indigo-950: oklch(25.7% 0.09 281.288);\n\n    --color-violet-50: oklch(96.9% 0.016 293.756);\n    --color-violet-100: oklch(94.3% 0.029 294.588);\n    --color-violet-200: oklch(89.4% 0.057 293.283);\n    --color-violet-300: oklch(81.1% 0.111 293.571);\n    --color-violet-400: oklch(70.2% 0.183 293.541);\n    --color-violet-500: oklch(60.6% 0.25 292.717);\n    --color-violet-600: oklch(54.1% 0.281 293.009);\n    --color-violet-700: oklch(49.1% 0.27 292.581);\n    --color-violet-800: oklch(43.2% 0.232 292.759);\n    --color-violet-900: oklch(38% 0.189 293.745);\n    --color-violet-950: oklch(28.3% 0.141 291.089);\n\n    --color-purple-50: oklch(97.7% 0.014 308.299);\n    --color-purple-100: oklch(94.6% 0.033 307.174);\n    --color-purple-200: oklch(90.2% 0.063 306.703);\n    --color-purple-300: oklch(82.7% 0.119 306.383);\n    --color-purple-400: oklch(71.4% 0.203 305.504);\n    --color-purple-500: oklch(62.7% 0.265 303.9);\n    --color-purple-600: oklch(55.8% 0.288 302.321);\n    --color-purple-700: oklch(49.6% 0.265 301.924);\n    --color-purple-800: oklch(43.8% 0.218 303.724);\n    --color-purple-900: oklch(38.1% 0.176 304.987);\n    --color-purple-950: oklch(29.1% 0.149 302.717);\n\n    --color-fuchsia-50: oklch(97.7% 0.017 320.058);\n    --color-fuchsia-100: oklch(95.2% 0.037 318.852);\n    --color-fuchsia-200: oklch(90.3% 0.076 319.62);\n    --color-fuchsia-300: oklch(83.3% 0.145 321.434);\n    --color-fuchsia-400: oklch(74% 0.238 322.16);\n    --color-fuchsia-500: oklch(66.7% 0.295 322.15);\n    --color-fuchsia-600: oklch(59.1% 0.293 322.896);\n    --color-fuchsia-700: oklch(51.8% 0.253 323.949);\n    --color-fuchsia-800: oklch(45.2% 0.211 324.591);\n    --color-fuchsia-900: oklch(40.1% 0.17 325.612);\n    --color-fuchsia-950: oklch(29.3% 0.136 325.661);\n\n    --color-pink-50: oklch(97.1% 0.014 343.198);\n    --color-pink-100: oklch(94.8% 0.028 342.258);\n    --color-pink-200: oklch(89.9% 0.061 343.231);\n    --color-pink-300: oklch(82.3% 0.12 346.018);\n    --color-pink-400: oklch(71.8% 0.202 349.761);\n    --color-pink-500: oklch(65.6% 0.241 354.308);\n    --color-pink-600: oklch(59.2% 0.249 0.584);\n    --color-pink-700: oklch(52.5% 0.223 3.958);\n    --color-pink-800: oklch(45.9% 0.187 3.815);\n    --color-pink-900: oklch(40.8% 0.153 2.432);\n    --color-pink-950: oklch(28.4% 0.109 3.907);\n\n    --color-rose-50: oklch(96.9% 0.015 12.422);\n    --color-rose-100: oklch(94.1% 0.03 12.58);\n    --color-rose-200: oklch(89.2% 0.058 10.001);\n    --color-rose-300: oklch(81% 0.117 11.638);\n    --color-rose-400: oklch(71.2% 0.194 13.428);\n    --color-rose-500: oklch(64.5% 0.246 16.439);\n    --color-rose-600: oklch(58.6% 0.253 17.585);\n    --color-rose-700: oklch(51.4% 0.222 16.935);\n    --color-rose-800: oklch(45.5% 0.188 13.697);\n    --color-rose-900: oklch(41% 0.159 10.272);\n    --color-rose-950: oklch(27.1% 0.105 12.094);\n\n    --color-slate-50: oklch(98.4% 0.003 247.858);\n    --color-slate-100: oklch(96.8% 0.007 247.896);\n    --color-slate-200: oklch(92.9% 0.013 255.508);\n    --color-slate-300: oklch(86.9% 0.022 252.894);\n    --color-slate-400: oklch(70.4% 0.04 256.788);\n    --color-slate-500: oklch(55.4% 0.046 257.417);\n    --color-slate-600: oklch(44.6% 0.043 257.281);\n    --color-slate-700: oklch(37.2% 0.044 257.287);\n    --color-slate-800: oklch(27.9% 0.041 260.031);\n    --color-slate-900: oklch(20.8% 0.042 265.755);\n    --color-slate-950: oklch(12.9% 0.042 264.695);\n\n    --color-gray-50: oklch(98.5% 0.002 247.839);\n    --color-gray-100: oklch(96.7% 0.003 264.542);\n    --color-gray-200: oklch(92.8% 0.006 264.531);\n    --color-gray-300: oklch(87.2% 0.01 258.338);\n    --color-gray-400: oklch(70.7% 0.022 261.325);\n    --color-gray-500: oklch(55.1% 0.027 264.364);\n    --color-gray-600: oklch(44.6% 0.03 256.802);\n    --color-gray-700: oklch(37.3% 0.034 259.733);\n    --color-gray-800: oklch(27.8% 0.033 256.848);\n    --color-gray-900: oklch(21% 0.034 264.665);\n    --color-gray-950: oklch(13% 0.028 261.692);\n\n    --color-zinc-50: oklch(98.5% 0 0);\n    --color-zinc-100: oklch(96.7% 0.001 286.375);\n    --color-zinc-200: oklch(92% 0.004 286.32);\n    --color-zinc-300: oklch(87.1% 0.006 286.286);\n    --color-zinc-400: oklch(70.5% 0.015 286.067);\n    --color-zinc-500: oklch(55.2% 0.016 285.938);\n    --color-zinc-600: oklch(44.2% 0.017 285.786);\n    --color-zinc-700: oklch(37% 0.013 285.805);\n    --color-zinc-800: oklch(27.4% 0.006 286.033);\n    --color-zinc-900: oklch(21% 0.006 285.885);\n    --color-zinc-950: oklch(14.1% 0.005 285.823);\n\n    --color-neutral-50: oklch(98.5% 0 0);\n    --color-neutral-100: oklch(97% 0 0);\n    --color-neutral-200: oklch(92.2% 0 0);\n    --color-neutral-300: oklch(87% 0 0);\n    --color-neutral-400: oklch(70.8% 0 0);\n    --color-neutral-500: oklch(55.6% 0 0);\n    --color-neutral-600: oklch(43.9% 0 0);\n    --color-neutral-700: oklch(37.1% 0 0);\n    --color-neutral-800: oklch(26.9% 0 0);\n    --color-neutral-900: oklch(20.5% 0 0);\n    --color-neutral-950: oklch(14.5% 0 0);\n\n    --color-stone-50: oklch(98.5% 0.001 106.423);\n    --color-stone-100: oklch(97% 0.001 106.424);\n    --color-stone-200: oklch(92.3% 0.003 48.717);\n    --color-stone-300: oklch(86.9% 0.005 56.366);\n    --color-stone-400: oklch(70.9% 0.01 56.259);\n    --color-stone-500: oklch(55.3% 0.013 58.071);\n    --color-stone-600: oklch(44.4% 0.011 73.639);\n    --color-stone-700: oklch(37.4% 0.01 67.558);\n    --color-stone-800: oklch(26.8% 0.007 34.298);\n    --color-stone-900: oklch(21.6% 0.006 56.043);\n    --color-stone-950: oklch(14.7% 0.004 49.25);\n\n    --color-black: #000;\n    --color-white: #fff;\n\n    --spacing: 0.25rem;\n\n    --breakpoint-sm: 40rem;\n    --breakpoint-md: 48rem;\n    --breakpoint-lg: 64rem;\n    --breakpoint-xl: 80rem;\n    --breakpoint-2xl: 96rem;\n\n    --container-3xs: 16rem;\n    --container-2xs: 18rem;\n    --container-xs: 20rem;\n    --container-sm: 24rem;\n    --container-md: 28rem;\n    --container-lg: 32rem;\n    --container-xl: 36rem;\n    --container-2xl: 42rem;\n    --container-3xl: 48rem;\n    --container-4xl: 56rem;\n    --container-5xl: 64rem;\n    --container-6xl: 72rem;\n    --container-7xl: 80rem;\n\n    --text-xs: 0.75rem;\n    --text-xs--line-height: calc(1 / 0.75);\n    --text-sm: 0.875rem;\n    --text-sm--line-height: calc(1.25 / 0.875);\n    --text-base: 1rem;\n    --text-base--line-height: calc(1.5 / 1);\n    --text-lg: 1.125rem;\n    --text-lg--line-height: calc(1.75 / 1.125);\n    --text-xl: 1.25rem;\n    --text-xl--line-height: calc(1.75 / 1.25);\n    --text-2xl: 1.5rem;\n    --text-2xl--line-height: calc(2 / 1.5);\n    --text-3xl: 1.875rem;\n    --text-3xl--line-height: calc(2.25 / 1.875);\n    --text-4xl: 2.25rem;\n    --text-4xl--line-height: calc(2.5 / 2.25);\n    --text-5xl: 3rem;\n    --text-5xl--line-height: 1;\n    --text-6xl: 3.75rem;\n    --text-6xl--line-height: 1;\n    --text-7xl: 4.5rem;\n    --text-7xl--line-height: 1;\n    --text-8xl: 6rem;\n    --text-8xl--line-height: 1;\n    --text-9xl: 8rem;\n    --text-9xl--line-height: 1;\n\n    --font-weight-thin: 100;\n    --font-weight-extralight: 200;\n    --font-weight-light: 300;\n    --font-weight-normal: 400;\n    --font-weight-medium: 500;\n    --font-weight-semibold: 600;\n    --font-weight-bold: 700;\n    --font-weight-extrabold: 800;\n    --font-weight-black: 900;\n\n    --tracking-tighter: -0.05em;\n    --tracking-tight: -0.025em;\n    --tracking-normal: 0em;\n    --tracking-wide: 0.025em;\n    --tracking-wider: 0.05em;\n    --tracking-widest: 0.1em;\n\n    --leading-tight: 1.25;\n    --leading-snug: 1.375;\n    --leading-normal: 1.5;\n    --leading-relaxed: 1.625;\n    --leading-loose: 2;\n\n    --radius-xs: 0.125rem;\n    --radius-sm: 0.25rem;\n    --radius-md: 0.375rem;\n    --radius-lg: 0.5rem;\n    --radius-xl: 0.75rem;\n    --radius-2xl: 1rem;\n    --radius-3xl: 1.5rem;\n    --radius-4xl: 2rem;\n\n    --shadow-2xs: 0 1px rgb(0 0 0 / 0.05);\n    --shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 0.05);\n    --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);\n    --shadow-md:\n      0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);\n    --shadow-lg:\n      0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);\n    --shadow-xl:\n      0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);\n    --shadow-2xl: 0 25px 50px -12px rgb(0 0 0 / 0.25);\n\n    --inset-shadow-2xs: inset 0 1px rgb(0 0 0 / 0.05);\n    --inset-shadow-xs: inset 0 1px 1px rgb(0 0 0 / 0.05);\n    --inset-shadow-sm: inset 0 2px 4px rgb(0 0 0 / 0.05);\n\n    --drop-shadow-xs: 0 1px 1px rgb(0 0 0 / 0.05);\n    --drop-shadow-sm: 0 1px 2px rgb(0 0 0 / 0.15);\n    --drop-shadow-md: 0 3px 3px rgb(0 0 0 / 0.12);\n    --drop-shadow-lg: 0 4px 4px rgb(0 0 0 / 0.15);\n    --drop-shadow-xl: 0 9px 7px rgb(0 0 0 / 0.1);\n    --drop-shadow-2xl: 0 25px 25px rgb(0 0 0 / 0.15);\n\n    --text-shadow-2xs: 0px 1px 0px rgb(0 0 0 / 0.15);\n    --text-shadow-xs: 0px 1px 1px rgb(0 0 0 / 0.2);\n    --text-shadow-sm:\n      0px 1px 0px rgb(0 0 0 / 0.075), 0px 1px 1px rgb(0 0 0 / 0.075),\n      0px 2px 2px rgb(0 0 0 / 0.075);\n    --text-shadow-md:\n      0px 1px 1px rgb(0 0 0 / 0.1), 0px 1px 2px rgb(0 0 0 / 0.1),\n      0px 2px 4px rgb(0 0 0 / 0.1);\n    --text-shadow-lg:\n      0px 1px 2px rgb(0 0 0 / 0.1), 0px 3px 2px rgb(0 0 0 / 0.1),\n      0px 4px 8px rgb(0 0 0 / 0.1);\n\n    --ease-in: cubic-bezier(0.4, 0, 1, 1);\n    --ease-out: cubic-bezier(0, 0, 0.2, 1);\n    --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);\n\n    --animate-spin: spin 1s linear infinite;\n    --animate-ping: ping 1s cubic-bezier(0, 0, 0.2, 1) infinite;\n    --animate-pulse: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n    --animate-bounce: bounce 1s infinite;\n\n    @keyframes spin {\n      to {\n        transform: rotate(360deg);\n      }\n    }\n\n    @keyframes ping {\n      75%,\n      100% {\n        transform: scale(2);\n        opacity: 0;\n      }\n    }\n\n    @keyframes pulse {\n      50% {\n        opacity: 0.5;\n      }\n    }\n\n    @keyframes bounce {\n      0%,\n      100% {\n        transform: translateY(-25%);\n        animation-timing-function: cubic-bezier(0.8, 0, 1, 1);\n      }\n\n      50% {\n        transform: none;\n        animation-timing-function: cubic-bezier(0, 0, 0.2, 1);\n      }\n    }\n\n    --blur-xs: 4px;\n    --blur-sm: 8px;\n    --blur-md: 12px;\n    --blur-lg: 16px;\n    --blur-xl: 24px;\n    --blur-2xl: 40px;\n    --blur-3xl: 64px;\n\n    --perspective-dramatic: 100px;\n    --perspective-near: 300px;\n    --perspective-normal: 500px;\n    --perspective-midrange: 800px;\n    --perspective-distant: 1200px;\n\n    --aspect-video: 16 / 9;\n\n    --default-transition-duration: 150ms;\n    --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n    --default-font-family: --theme(--font-sans, initial);\n    --default-font-feature-settings: --theme(\n      --font-sans--font-feature-settings,\n      initial\n    );\n    --default-font-variation-settings: --theme(\n      --font-sans--font-variation-settings,\n      initial\n    );\n    --default-mono-font-family: --theme(--font-mono, initial);\n    --default-mono-font-feature-settings: --theme(\n      --font-mono--font-feature-settings,\n      initial\n    );\n    --default-mono-font-variation-settings: --theme(\n      --font-mono--font-variation-settings,\n      initial\n    );\n  }\n\n  /* Deprecated */\n  @theme default inline reference {\n    --blur: 8px;\n    --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);\n    --shadow-inner: inset 0 2px 4px 0 rgb(0 0 0 / 0.05);\n    --drop-shadow: 0 1px 2px rgb(0 0 0 / 0.1), 0 1px 1px rgb(0 0 0 / 0.06);\n    --radius: 0.25rem;\n    --max-width-prose: 65ch;\n  }\n}\n\n@layer base {\n  /*\n  1. Prevent padding and border from affecting element width. (https://github.com/mozdevs/cssremedy/issues/4)\n  2. Remove default margins and padding\n  3. Reset all borders.\n*/\n\n  *,\n  ::after,\n  ::before,\n  ::backdrop,\n  ::file-selector-button {\n    box-sizing: border-box; /* 1 */\n    margin: 0; /* 2 */\n    padding: 0; /* 2 */\n    border: 0 solid; /* 3 */\n  }\n\n  /*\n  1. Use a consistent sensible line-height in all browsers.\n  2. Prevent adjustments of font size after orientation changes in iOS.\n  3. Use a more readable tab size.\n  4. Use the user's configured `sans` font-family by default.\n  5. Use the user's configured `sans` font-feature-settings by default.\n  6. Use the user's configured `sans` font-variation-settings by default.\n  7. Disable tap highlights on iOS.\n*/\n\n  html,\n  :host {\n    line-height: 1.5; /* 1 */\n    -webkit-text-size-adjust: 100%; /* 2 */\n    tab-size: 4; /* 3 */\n    font-family: --theme(\n      --default-font-family,\n      ui-sans-serif,\n      system-ui,\n      sans-serif,\n      \"Apple Color Emoji\",\n      \"Segoe UI Emoji\",\n      \"Segoe UI Symbol\",\n      \"Noto Color Emoji\"\n    ); /* 4 */\n    font-feature-settings: --theme(\n      --default-font-feature-settings,\n      normal\n    ); /* 5 */\n    font-variation-settings: --theme(\n      --default-font-variation-settings,\n      normal\n    ); /* 6 */\n    -webkit-tap-highlight-color: transparent; /* 7 */\n  }\n\n  /*\n  1. Add the correct height in Firefox.\n  2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)\n  3. Reset the default border style to a 1px solid border.\n*/\n\n  hr {\n    height: 0; /* 1 */\n    color: inherit; /* 2 */\n    border-top-width: 1px; /* 3 */\n  }\n\n  /*\n  Add the correct text decoration in Chrome, Edge, and Safari.\n*/\n\n  abbr:where([title]) {\n    -webkit-text-decoration: underline dotted;\n    text-decoration: underline dotted;\n  }\n\n  /*\n  Remove the default font size and weight for headings.\n*/\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    font-size: inherit;\n    font-weight: inherit;\n  }\n\n  /*\n  Reset links to optimize for opt-in styling instead of opt-out.\n*/\n\n  a {\n    color: inherit;\n    -webkit-text-decoration: inherit;\n    text-decoration: inherit;\n  }\n\n  /*\n  Add the correct font weight in Edge and Safari.\n*/\n\n  b,\n  strong {\n    font-weight: bolder;\n  }\n\n  /*\n  1. Use the user's configured `mono` font-family by default.\n  2. Use the user's configured `mono` font-feature-settings by default.\n  3. Use the user's configured `mono` font-variation-settings by default.\n  4. Correct the odd `em` font sizing in all browsers.\n*/\n\n  code,\n  kbd,\n  samp,\n  pre {\n    font-family: --theme(\n      --default-mono-font-family,\n      ui-monospace,\n      SFMono-Regular,\n      Menlo,\n      Monaco,\n      Consolas,\n      \"Liberation Mono\",\n      \"Courier New\",\n      monospace\n    ); /* 1 */\n    font-feature-settings: --theme(\n      --default-mono-font-feature-settings,\n      normal\n    ); /* 2 */\n    font-variation-settings: --theme(\n      --default-mono-font-variation-settings,\n      normal\n    ); /* 3 */\n    font-size: 1em; /* 4 */\n  }\n\n  /*\n  Add the correct font size in all browsers.\n*/\n\n  small {\n    font-size: 80%;\n  }\n\n  /*\n  Prevent `sub` and `sup` elements from affecting the line height in all browsers.\n*/\n\n  sub,\n  sup {\n    font-size: 75%;\n    line-height: 0;\n    position: relative;\n    vertical-align: baseline;\n  }\n\n  sub {\n    bottom: -0.25em;\n  }\n\n  sup {\n    top: -0.5em;\n  }\n\n  /*\n  1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)\n  2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)\n  3. Remove gaps between table borders by default.\n*/\n\n  table {\n    text-indent: 0; /* 1 */\n    border-color: inherit; /* 2 */\n    border-collapse: collapse; /* 3 */\n  }\n\n  /*\n  Use the modern Firefox focus style for all focusable elements.\n*/\n\n  :-moz-focusring {\n    outline: auto;\n  }\n\n  /*\n  Add the correct vertical alignment in Chrome and Firefox.\n*/\n\n  progress {\n    vertical-align: baseline;\n  }\n\n  /*\n  Add the correct display in Chrome and Safari.\n*/\n\n  summary {\n    display: list-item;\n  }\n\n  /*\n  Make lists unstyled by default.\n*/\n\n  ol,\n  ul,\n  menu {\n    list-style: none;\n  }\n\n  /*\n  1. Make replaced elements `display: block` by default. (https://github.com/mozdevs/cssremedy/issues/14)\n  2. Add `vertical-align: middle` to align replaced elements more sensibly by default. (https://github.com/jensimmons/cssremedy/issues/14#issuecomment-634934210)\n      This can trigger a poorly considered lint error in some tools but is included by design.\n*/\n\n  img,\n  svg,\n  video,\n  canvas,\n  audio,\n  iframe,\n  embed,\n  object {\n    display: block; /* 1 */\n    vertical-align: middle; /* 2 */\n  }\n\n  /*\n  Constrain images and videos to the parent width and preserve their intrinsic aspect ratio. (https://github.com/mozdevs/cssremedy/issues/14)\n*/\n\n  img,\n  video {\n    max-width: 100%;\n    height: auto;\n  }\n\n  /*\n  1. Inherit font styles in all browsers.\n  2. Remove border radius in all browsers.\n  3. Remove background color in all browsers.\n  4. Ensure consistent opacity for disabled states in all browsers.\n*/\n\n  button,\n  input,\n  select,\n  optgroup,\n  textarea,\n  ::file-selector-button {\n    font: inherit; /* 1 */\n    font-feature-settings: inherit; /* 1 */\n    font-variation-settings: inherit; /* 1 */\n    letter-spacing: inherit; /* 1 */\n    color: inherit; /* 1 */\n    border-radius: 0; /* 2 */\n    background-color: transparent; /* 3 */\n    opacity: 1; /* 4 */\n  }\n\n  /*\n  Restore default font weight.\n*/\n\n  :where(select:is([multiple], [size])) optgroup {\n    font-weight: bolder;\n  }\n\n  /*\n  Restore indentation.\n*/\n\n  :where(select:is([multiple], [size])) optgroup option {\n    padding-inline-start: 20px;\n  }\n\n  /*\n  Restore space after button.\n*/\n\n  ::file-selector-button {\n    margin-inline-end: 4px;\n  }\n\n  /*\n  Reset the default placeholder opacity in Firefox. (https://github.com/tailwindlabs/tailwindcss/issues/3300)\n*/\n\n  ::placeholder {\n    opacity: 1;\n  }\n\n  /*\n  Set the default placeholder color to a semi-transparent version of the current text color in browsers that do not\n  crash when using `color-mix(‚Ä¶)` with `currentcolor`. (https://github.com/tailwindlabs/tailwindcss/issues/17194)\n*/\n\n  @supports (not (-webkit-appearance: -apple-pay-button)) /* Not Safari */ or\n    (contain-intrinsic-size: 1px) /* Safari 17+ */ {\n    ::placeholder {\n      color: color-mix(in oklab, currentcolor 50%, transparent);\n    }\n  }\n\n  /*\n  Prevent resizing textareas horizontally by default.\n*/\n\n  textarea {\n    resize: vertical;\n  }\n\n  /*\n  Remove the inner padding in Chrome and Safari on macOS.\n*/\n\n  ::-webkit-search-decoration {\n    -webkit-appearance: none;\n  }\n\n  /*\n  1. Ensure date/time inputs have the same height when empty in iOS Safari.\n  2. Ensure text alignment can be changed on date/time inputs in iOS Safari.\n*/\n\n  ::-webkit-date-and-time-value {\n    min-height: 1lh; /* 1 */\n    text-align: inherit; /* 2 */\n  }\n\n  /*\n  Prevent height from changing on date/time inputs in macOS Safari when the input is set to `display: block`.\n*/\n\n  ::-webkit-datetime-edit {\n    display: inline-flex;\n  }\n\n  /*\n  Remove excess padding from pseudo-elements in date/time inputs to ensure consistent height across browsers.\n*/\n\n  ::-webkit-datetime-edit-fields-wrapper {\n    padding: 0;\n  }\n\n  ::-webkit-datetime-edit,\n  ::-webkit-datetime-edit-year-field,\n  ::-webkit-datetime-edit-month-field,\n  ::-webkit-datetime-edit-day-field,\n  ::-webkit-datetime-edit-hour-field,\n  ::-webkit-datetime-edit-minute-field,\n  ::-webkit-datetime-edit-second-field,\n  ::-webkit-datetime-edit-millisecond-field,\n  ::-webkit-datetime-edit-meridiem-field {\n    padding-block: 0;\n  }\n\n  /*\n  Center dropdown marker shown on inputs with paired `<datalist>`s in Chrome. (https://github.com/tailwindlabs/tailwindcss/issues/18499)\n*/\n\n  ::-webkit-calendar-picker-indicator {\n    line-height: 1;\n  }\n\n  /*\n  Remove the additional `:invalid` styles in Firefox. (https://github.com/mozilla/gecko-dev/blob/2f9eacd9d3d995c937b4251a5557d95d494c9be1/layout/style/res/forms.css#L728-L737)\n*/\n\n  :-moz-ui-invalid {\n    box-shadow: none;\n  }\n\n  /*\n  Correct the inability to style the border radius in iOS Safari.\n*/\n\n  button,\n  input:where([type=\"button\"], [type=\"reset\"], [type=\"submit\"]),\n  ::file-selector-button {\n    appearance: button;\n  }\n\n  /*\n  Correct the cursor style of increment and decrement buttons in Safari.\n*/\n\n  ::-webkit-inner-spin-button,\n  ::-webkit-outer-spin-button {\n    height: auto;\n  }\n\n  /*\n  Make elements with the HTML hidden attribute stay hidden by default.\n*/\n\n  [hidden]:where(:not([hidden=\"until-found\"])) {\n    display: none !important;\n  }\n}\n\n@layer utilities {\n  @tailwind utilities;\n}\n","@import 'tailwindcss';\n\n@custom-variant dark (&:is(.dark *));\n\n/* iframe ÈÄÇÈÖçÔºö‰ΩøÁî® width Âíå aspect-ratioÔºåÁ¶ÅÊ≠¢‰ΩøÁî® vh Á≠âÂèóÂÆø‰∏ªÈ´òÂ∫¶ÂΩ±ÂìçÁöÑÂçï‰Ωç */\nhtml,\nbody {\n  width: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n  background: transparent; /* ËÉåÊôØÈÄèÊòéÔºå‰∏çÂ°´ÂÖÖÈ¢úËâ≤ */\n}\n\n/* Ê®™Â±èÊòæÁ§∫ - Galgame È£éÊ†º 16:9 */\n#app {\n  width: 100%;\n  aspect-ratio: 16 / 9; /* ‰ΩøÁî® aspect-ratio ËÆ©È´òÂ∫¶Ê†πÊçÆÂÆΩÂ∫¶Âä®ÊÄÅË∞ÉÊï¥ */\n  margin: 0 auto;\n  position: relative;\n  background: transparent; /* ËÉåÊôØÈÄèÊòéÔºå‰∏çÂ°´ÂÖÖÈ¢úËâ≤ */\n  /* ÈÅøÂÖç‰ΩøÁî®‰ºöÂº∫Âà∂ÊíëÈ´òÁà∂ÂÆπÂô®ÁöÑÂÖÉÁ¥† */\n  overflow: hidden;\n}\n\n/* ÂÆö‰πâËá™ÂÆö‰πâ‰∏ªÈ¢òÂèòÈáè */\n@theme inline {\n  --color-background: oklch(0.97 0.02 145);\n  --color-foreground: oklch(0.25 0.05 145);\n  --color-card: oklch(0.99 0.01 145);\n  --color-card-foreground: oklch(0.25 0.05 145);\n  --color-popover: oklch(0.99 0.01 145);\n  --color-popover-foreground: oklch(0.25 0.05 145);\n  --color-primary: oklch(0.55 0.15 145);\n  --color-primary-foreground: oklch(0.99 0.01 145);\n  --color-secondary: oklch(0.92 0.03 145);\n  --color-secondary-foreground: oklch(0.35 0.08 145);\n  --color-muted: oklch(0.94 0.02 145);\n  --color-muted-foreground: oklch(0.5 0.05 145);\n  --color-accent: oklch(0.75 0.12 90);\n  --color-accent-foreground: oklch(0.25 0.05 145);\n  --color-destructive: oklch(0.577 0.245 27.325);\n  --color-destructive-foreground: oklch(0.577 0.245 27.325);\n  --color-border: oklch(0.85 0.04 145);\n  --color-input: oklch(0.9 0.03 145);\n  --color-ring: oklch(0.55 0.15 145);\n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  --radius-xl: calc(var(--radius) + 4px);\n}\n\n@layer base {\n  * {\n    @apply border-border outline-ring/50;\n  }\n  body {\n    @apply bg-background text-foreground;\n  }\n}\n\n/* ÁªøËâ≤Ê∏ÖÊñ∞‰∏ªÈ¢ò - CSS ÂèòÈáèÂ§á‰ªΩÔºà‰æõÁõ¥Êé•ÂºïÁî®Ôºâ */\n:root {\n  --background: oklch(0.97 0.02 145);\n  --foreground: oklch(0.25 0.05 145);\n  --card: oklch(0.99 0.01 145);\n  --card-foreground: oklch(0.25 0.05 145);\n  --popover: oklch(0.99 0.01 145);\n  --popover-foreground: oklch(0.25 0.05 145);\n  --primary: oklch(0.55 0.15 145);\n  --primary-foreground: oklch(0.99 0.01 145);\n  --secondary: oklch(0.92 0.03 145);\n  --secondary-foreground: oklch(0.35 0.08 145);\n  --muted: oklch(0.94 0.02 145);\n  --muted-foreground: oklch(0.5 0.05 145);\n  --accent: oklch(0.75 0.12 90);\n  --accent-foreground: oklch(0.25 0.05 145);\n  --destructive: oklch(0.577 0.245 27.325);\n  --destructive-foreground: oklch(0.577 0.245 27.325);\n  --border: oklch(0.85 0.04 145);\n  --input: oklch(0.9 0.03 145);\n  --ring: oklch(0.55 0.15 145);\n}\n\n.dark {\n  --background: oklch(0.145 0 0);\n  --foreground: oklch(0.985 0 0);\n  --card: oklch(0.145 0 0);\n  --card-foreground: oklch(0.985 0 0);\n  --popover: oklch(0.145 0 0);\n  --popover-foreground: oklch(0.985 0 0);\n  --primary: oklch(0.985 0 0);\n  --primary-foreground: oklch(0.205 0 0);\n  --secondary: oklch(0.269 0 0);\n  --secondary-foreground: oklch(0.985 0 0);\n  --muted: oklch(0.269 0 0);\n  --muted-foreground: oklch(0.708 0 0);\n  --accent: oklch(0.269 0 0);\n  --accent-foreground: oklch(0.985 0 0);\n  --destructive: oklch(0.396 0.141 25.723);\n  --destructive-foreground: oklch(0.637 0.237 25.331);\n  --border: oklch(0.269 0 0);\n  --input: oklch(0.269 0 0);\n  --ring: oklch(0.439 0 0);\n}\n\n/* Âü∫Á°ÄÊ†∑Âºè */\n* {\n  border-color: var(--border);\n}\n\nbody {\n  background-color: var(--background);\n  color: var(--foreground);\n}\n\n/* Âä®ÁîªÊ†∑Âºè */\n@keyframes fade-in {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n@keyframes slide-in-from-left-2 {\n  from {\n    transform: translateX(-8px);\n    opacity: 0;\n  }\n  to {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n\n@keyframes slide-in-from-top-2 {\n  from {\n    transform: translateY(-8px);\n    opacity: 0;\n  }\n  to {\n    transform: translateY(0);\n    opacity: 1;\n  }\n}\n\n@keyframes slide-in-from-bottom-2 {\n  from {\n    transform: translateY(8px);\n    opacity: 0;\n  }\n  to {\n    transform: translateY(0);\n    opacity: 1;\n  }\n}\n\n.animate-in {\n  animation-duration: 0.3s;\n  animation-timing-function: ease-out;\n  animation-fill-mode: both;\n}\n\n.fade-in {\n  animation-name: fade-in;\n}\n\n.slide-in-from-left-2 {\n  animation-name: slide-in-from-left-2;\n}\n\n.slide-in-from-top-2 {\n  animation-name: slide-in-from-top-2;\n}\n\n.slide-in-from-bottom-2 {\n  animation-name: slide-in-from-bottom-2;\n}\n"],"names":[],"ignoreList":[],"sourceRoot":""}